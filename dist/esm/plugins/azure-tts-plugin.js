var e={51719:(e,t,i)=>{const r=i(16561);class n extends Error{constructor(e,...t){let i;super(...t),Error.captureStackTrace&&Error.captureStackTrace(this,n),this.name="StatusError",this.message=e.statusMessage,this.statusCode=e.status,this.res=e,this.json=e.json.bind(e),this.text=e.text.bind(e),this.arrayBuffer=e.arrayBuffer.bind(e);Object.defineProperty(this,"responseBody",{get:()=>(i||(i=this.arrayBuffer()),i)}),this.headers={};for(const[t,i]of e.headers.entries())this.headers[t.toLowerCase()]=i}}e.exports=r(((e,t,i,r,o)=>async(s,a,c={})=>{s=o+(s||"");let u=new URL(s);if(r||(r={}),u.username&&(r.Authorization="Basic "+btoa(u.username+":"+u.password),u=new URL(u.protocol+"//"+u.host+u.pathname+u.search)),"https:"!==u.protocol&&"http:"!==u.protocol)throw new Error(`Unknown protocol, ${u.protocol}`);if(a)if(a instanceof ArrayBuffer||ArrayBuffer.isView(a)||"string"==typeof a);else{if("object"!=typeof a)throw new Error("Unknown body type.");a=JSON.stringify(a),r["Content-Type"]="application/json"}c=new Headers({...r||{},...c});const p=await fetch(u,{method:t,headers:c,body:a});if(p.statusCode=p.status,!e.has(p.status))throw new n(p);return"json"===i?p.json():"buffer"===i?p.arrayBuffer():"string"===i?p.text():p}))},16561:e=>{const t=new Set(["json","buffer","string"]);e.exports=e=>(...i)=>{const r=new Set;let n,o,s,a="";return i.forEach((e=>{if("string"==typeof e)if(e.toUpperCase()===e){if(n){throw new Error(`Can't set method to ${e}, already set to ${n}.`)}n=e}else if(e.startsWith("http:")||e.startsWith("https:"))a=e;else{if(!t.has(e))throw new Error(`Unknown encoding, ${e}`);o=e}else if("number"==typeof e)r.add(e);else{if("object"!=typeof e)throw new Error("Unknown type: "+typeof e);if(Array.isArray(e)||e instanceof Set)e.forEach((e=>r.add(e)));else{if(s)throw new Error("Cannot set headers twice.");s=e}}})),n||(n="GET"),0===r.size&&r.add(200),e(r,n,o,s,a)}},19755:function(e,t){var i,r,n;r="undefined"!=typeof window?window:this,n=function(r,n){var o=[],s=Object.getPrototypeOf,a=o.slice,c=o.flat?function(e){return o.flat.call(e)}:function(e){return o.concat.apply([],e)},u=o.push,p=o.indexOf,h={},l=h.toString,d=h.hasOwnProperty,f=d.toString,v=f.call(Object),m={},g=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},y=function(e){return null!=e&&e===e.window},S=r.document,w={type:!0,src:!0,nonce:!0,noModule:!0};function b(e,t,i){var r,n,o=(i=i||S).createElement("script");if(o.text=e,t)for(r in w)(n=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,n);i.head.appendChild(o).parentNode.removeChild(o)}function C(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?h[l.call(e)]||"object":typeof e}var x="3.7.0",A=/HTML$/i,T=function(e,t){return new T.fn.init(e,t)};function P(e){var t=!!e&&"length"in e&&e.length,i=C(e);return!g(e)&&!y(e)&&("array"===i||0===t||"number"==typeof t&&t>0&&t-1 in e)}function I(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}T.fn=T.prototype={jquery:x,constructor:T,length:0,toArray:function(){return a.call(this)},get:function(e){return null==e?a.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=T.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return T.each(this,e)},map:function(e){return this.pushStack(T.map(this,(function(t,i){return e.call(t,i,t)})))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(T.grep(this,(function(e,t){return(t+1)%2})))},odd:function(){return this.pushStack(T.grep(this,(function(e,t){return t%2})))},eq:function(e){var t=this.length,i=+e+(e<0?t:0);return this.pushStack(i>=0&&i<t?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:o.sort,splice:o.splice},T.extend=T.fn.extend=function(){var e,t,i,r,n,o,s=arguments[0]||{},a=1,c=arguments.length,u=!1;for("boolean"==typeof s&&(u=s,s=arguments[a]||{},a++),"object"==typeof s||g(s)||(s={}),a===c&&(s=this,a--);a<c;a++)if(null!=(e=arguments[a]))for(t in e)r=e[t],"__proto__"!==t&&s!==r&&(u&&r&&(T.isPlainObject(r)||(n=Array.isArray(r)))?(i=s[t],o=n&&!Array.isArray(i)?[]:n||T.isPlainObject(i)?i:{},n=!1,s[t]=T.extend(u,o,r)):void 0!==r&&(s[t]=r));return s},T.extend({expando:"jQuery"+(x+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,i;return!(!e||"[object Object]"!==l.call(e)||(t=s(e))&&("function"!=typeof(i=d.call(t,"constructor")&&t.constructor)||f.call(i)!==v))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,i){b(e,{nonce:t&&t.nonce},i)},each:function(e,t){var i,r=0;if(P(e))for(i=e.length;r<i&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},text:function(e){var t,i="",r=0,n=e.nodeType;if(n){if(1===n||9===n||11===n)return e.textContent;if(3===n||4===n)return e.nodeValue}else for(;t=e[r++];)i+=T.text(t);return i},makeArray:function(e,t){var i=t||[];return null!=e&&(P(Object(e))?T.merge(i,"string"==typeof e?[e]:e):u.call(i,e)),i},inArray:function(e,t,i){return null==t?-1:p.call(t,e,i)},isXMLDoc:function(e){var t=e&&e.namespaceURI,i=e&&(e.ownerDocument||e).documentElement;return!A.test(t||i&&i.nodeName||"HTML")},merge:function(e,t){for(var i=+t.length,r=0,n=e.length;r<i;r++)e[n++]=t[r];return e.length=n,e},grep:function(e,t,i){for(var r=[],n=0,o=e.length,s=!i;n<o;n++)!t(e[n],n)!==s&&r.push(e[n]);return r},map:function(e,t,i){var r,n,o=0,s=[];if(P(e))for(r=e.length;o<r;o++)null!=(n=t(e[o],o,i))&&s.push(n);else for(o in e)null!=(n=t(e[o],o,i))&&s.push(n);return c(s)},guid:1,support:m}),"function"==typeof Symbol&&(T.fn[Symbol.iterator]=o[Symbol.iterator]),T.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){h["[object "+t+"]"]=t.toLowerCase()}));var E=o.pop,k=o.sort,R=o.splice,M="[\\x20\\t\\r\\n\\f]",D=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g");T.contains=function(e,t){var i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(e.contains?e.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))};var N=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function O(e,t){return t?"\0"===e?"ï¿½":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e}T.escapeSelector=function(e){return(e+"").replace(N,O)};var L=S,z=u;!function(){var e,t,i,n,s,c,u,h,l,f,v=z,g=T.expando,y=0,S=0,w=ee(),b=ee(),C=ee(),x=ee(),A=function(e,t){return e===t&&(s=!0),0},P="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",N="(?:\\\\[\\da-fA-F]{1,6}"+M+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",O="\\["+M+"*("+N+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+N+"))|)"+M+"*\\]",B=":("+N+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+O+")*)|.*)\\)|)",_=new RegExp(M+"+","g"),F=new RegExp("^"+M+"*,"+M+"*"),H=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),j=new RegExp(M+"|>"),K=new RegExp(B),q=new RegExp("^"+N+"$"),U={ID:new RegExp("^#("+N+")"),CLASS:new RegExp("^\\.("+N+")"),TAG:new RegExp("^("+N+"|[*])"),ATTR:new RegExp("^"+O),PSEUDO:new RegExp("^"+B),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+P+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},W=/^(?:input|select|textarea|button)$/i,V=/^h\d$/i,$=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,G=/[+~]/,J=new RegExp("\\\\[\\da-fA-F]{1,6}"+M+"?|\\\\([^\\r\\n\\f])","g"),X=function(e,t){var i="0x"+e.slice(1)-65536;return t||(i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320))},Q=function(){ce()},Y=le((function(e){return!0===e.disabled&&I(e,"fieldset")}),{dir:"parentNode",next:"legend"});try{v.apply(o=a.call(L.childNodes),L.childNodes),o[L.childNodes.length].nodeType}catch(e){v={apply:function(e,t){z.apply(e,a.call(t))},call:function(e){z.apply(e,a.call(arguments,1))}}}function Z(e,t,i,r){var n,o,s,a,u,p,d,f=t&&t.ownerDocument,y=t?t.nodeType:9;if(i=i||[],"string"!=typeof e||!e||1!==y&&9!==y&&11!==y)return i;if(!r&&(ce(t),t=t||c,h)){if(11!==y&&(u=$.exec(e)))if(n=u[1]){if(9===y){if(!(s=t.getElementById(n)))return i;if(s.id===n)return v.call(i,s),i}else if(f&&(s=f.getElementById(n))&&Z.contains(t,s)&&s.id===n)return v.call(i,s),i}else{if(u[2])return v.apply(i,t.getElementsByTagName(e)),i;if((n=u[3])&&t.getElementsByClassName)return v.apply(i,t.getElementsByClassName(n)),i}if(!(x[e+" "]||l&&l.test(e))){if(d=e,f=t,1===y&&(j.test(e)||H.test(e))){for((f=G.test(e)&&ae(t.parentNode)||t)==t&&m.scope||((a=t.getAttribute("id"))?a=T.escapeSelector(a):t.setAttribute("id",a=g)),o=(p=pe(e)).length;o--;)p[o]=(a?"#"+a:":scope")+" "+he(p[o]);d=p.join(",")}try{return v.apply(i,f.querySelectorAll(d)),i}catch(t){x(e,!0)}finally{a===g&&t.removeAttribute("id")}}}return ye(e.replace(D,"$1"),t,i,r)}function ee(){var e=[];return function i(r,n){return e.push(r+" ")>t.cacheLength&&delete i[e.shift()],i[r+" "]=n}}function te(e){return e[g]=!0,e}function ie(e){var t=c.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function re(e){return function(t){return I(t,"input")&&t.type===e}}function ne(e){return function(t){return(I(t,"input")||I(t,"button"))&&t.type===e}}function oe(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&Y(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function se(e){return te((function(t){return t=+t,te((function(i,r){for(var n,o=e([],i.length,t),s=o.length;s--;)i[n=o[s]]&&(i[n]=!(r[n]=i[n]))}))}))}function ae(e){return e&&void 0!==e.getElementsByTagName&&e}function ce(e){var i,r=e?e.ownerDocument||e:L;return r!=c&&9===r.nodeType&&r.documentElement?(u=(c=r).documentElement,h=!T.isXMLDoc(c),f=u.matches||u.webkitMatchesSelector||u.msMatchesSelector,L!=c&&(i=c.defaultView)&&i.top!==i&&i.addEventListener("unload",Q),m.getById=ie((function(e){return u.appendChild(e).id=T.expando,!c.getElementsByName||!c.getElementsByName(T.expando).length})),m.disconnectedMatch=ie((function(e){return f.call(e,"*")})),m.scope=ie((function(){return c.querySelectorAll(":scope")})),m.cssHas=ie((function(){try{return c.querySelector(":has(*,:jqfake)"),!1}catch(e){return!0}})),m.getById?(t.filter.ID=function(e){var t=e.replace(J,X);return function(e){return e.getAttribute("id")===t}},t.find.ID=function(e,t){if(void 0!==t.getElementById&&h){var i=t.getElementById(e);return i?[i]:[]}}):(t.filter.ID=function(e){var t=e.replace(J,X);return function(e){var i=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return i&&i.value===t}},t.find.ID=function(e,t){if(void 0!==t.getElementById&&h){var i,r,n,o=t.getElementById(e);if(o){if((i=o.getAttributeNode("id"))&&i.value===e)return[o];for(n=t.getElementsByName(e),r=0;o=n[r++];)if((i=o.getAttributeNode("id"))&&i.value===e)return[o]}return[]}}),t.find.TAG=function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):t.querySelectorAll(e)},t.find.CLASS=function(e,t){if(void 0!==t.getElementsByClassName&&h)return t.getElementsByClassName(e)},l=[],ie((function(e){var t;u.appendChild(e).innerHTML="<a id='"+g+"' href='' disabled='disabled'></a><select id='"+g+"-\r\\' disabled='disabled'><option selected=''></option></select>",e.querySelectorAll("[selected]").length||l.push("\\["+M+"*(?:value|"+P+")"),e.querySelectorAll("[id~="+g+"-]").length||l.push("~="),e.querySelectorAll("a#"+g+"+*").length||l.push(".#.+[+~]"),e.querySelectorAll(":checked").length||l.push(":checked"),(t=c.createElement("input")).setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),u.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&l.push(":enabled",":disabled"),(t=c.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||l.push("\\["+M+"*name"+M+"*="+M+"*(?:''|\"\")")})),m.cssHas||l.push(":has"),l=l.length&&new RegExp(l.join("|")),A=function(e,t){if(e===t)return s=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i||(1&(i=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!m.sortDetached&&t.compareDocumentPosition(e)===i?e===c||e.ownerDocument==L&&Z.contains(L,e)?-1:t===c||t.ownerDocument==L&&Z.contains(L,t)?1:n?p.call(n,e)-p.call(n,t):0:4&i?-1:1)},c):c}for(e in Z.matches=function(e,t){return Z(e,null,null,t)},Z.matchesSelector=function(e,t){if(ce(e),h&&!x[t+" "]&&(!l||!l.test(t)))try{var i=f.call(e,t);if(i||m.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(e){x(t,!0)}return Z(t,c,null,[e]).length>0},Z.contains=function(e,t){return(e.ownerDocument||e)!=c&&ce(e),T.contains(e,t)},Z.attr=function(e,i){(e.ownerDocument||e)!=c&&ce(e);var r=t.attrHandle[i.toLowerCase()],n=r&&d.call(t.attrHandle,i.toLowerCase())?r(e,i,!h):void 0;return void 0!==n?n:e.getAttribute(i)},Z.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},T.uniqueSort=function(e){var t,i=[],r=0,o=0;if(s=!m.sortStable,n=!m.sortStable&&a.call(e,0),k.call(e,A),s){for(;t=e[o++];)t===e[o]&&(r=i.push(o));for(;r--;)R.call(e,i[r],1)}return n=null,e},T.fn.uniqueSort=function(){return this.pushStack(T.uniqueSort(a.apply(this)))},t=T.expr={cacheLength:50,createPseudo:te,match:U,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(J,X),e[3]=(e[3]||e[4]||e[5]||"").replace(J,X),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||Z.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&Z.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return U.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&K.test(i)&&(t=pe(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(J,X).toLowerCase();return"*"===e?function(){return!0}:function(e){return I(e,t)}},CLASS:function(e){var t=w[e+" "];return t||(t=new RegExp("(^|"+M+")"+e+"("+M+"|$)"))&&w(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,i){return function(r){var n=Z.attr(r,e);return null==n?"!="===t:!t||(n+="","="===t?n===i:"!="===t?n!==i:"^="===t?i&&0===n.indexOf(i):"*="===t?i&&n.indexOf(i)>-1:"$="===t?i&&n.slice(-i.length)===i:"~="===t?(" "+n.replace(_," ")+" ").indexOf(i)>-1:"|="===t&&(n===i||n.slice(0,i.length+1)===i+"-"))}},CHILD:function(e,t,i,r,n){var o="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===r&&0===n?function(e){return!!e.parentNode}:function(t,i,c){var u,p,h,l,d,f=o!==s?"nextSibling":"previousSibling",v=t.parentNode,m=a&&t.nodeName.toLowerCase(),S=!c&&!a,w=!1;if(v){if(o){for(;f;){for(h=t;h=h[f];)if(a?I(h,m):1===h.nodeType)return!1;d=f="only"===e&&!d&&"nextSibling"}return!0}if(d=[s?v.firstChild:v.lastChild],s&&S){for(w=(l=(u=(p=v[g]||(v[g]={}))[e]||[])[0]===y&&u[1])&&u[2],h=l&&v.childNodes[l];h=++l&&h&&h[f]||(w=l=0)||d.pop();)if(1===h.nodeType&&++w&&h===t){p[e]=[y,l,w];break}}else if(S&&(w=l=(u=(p=t[g]||(t[g]={}))[e]||[])[0]===y&&u[1]),!1===w)for(;(h=++l&&h&&h[f]||(w=l=0)||d.pop())&&(!(a?I(h,m):1===h.nodeType)||!++w||(S&&((p=h[g]||(h[g]={}))[e]=[y,w]),h!==t)););return(w-=n)===r||w%r==0&&w/r>=0}}},PSEUDO:function(e,i){var r,n=t.pseudos[e]||t.setFilters[e.toLowerCase()]||Z.error("unsupported pseudo: "+e);return n[g]?n(i):n.length>1?(r=[e,e,"",i],t.setFilters.hasOwnProperty(e.toLowerCase())?te((function(e,t){for(var r,o=n(e,i),s=o.length;s--;)e[r=p.call(e,o[s])]=!(t[r]=o[s])})):function(e){return n(e,0,r)}):n}},pseudos:{not:te((function(e){var t=[],i=[],r=ge(e.replace(D,"$1"));return r[g]?te((function(e,t,i,n){for(var o,s=r(e,null,n,[]),a=e.length;a--;)(o=s[a])&&(e[a]=!(t[a]=o))})):function(e,n,o){return t[0]=e,r(t,null,o,i),t[0]=null,!i.pop()}})),has:te((function(e){return function(t){return Z(e,t).length>0}})),contains:te((function(e){return e=e.replace(J,X),function(t){return(t.textContent||T.text(t)).indexOf(e)>-1}})),lang:te((function(e){return q.test(e||"")||Z.error("unsupported lang: "+e),e=e.replace(J,X).toLowerCase(),function(t){var i;do{if(i=h?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(i=i.toLowerCase())===e||0===i.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(e){var t=r.location&&r.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===u},focus:function(e){return e===function(){try{return c.activeElement}catch(e){}}()&&c.hasFocus()&&!!(e.type||e.href||~e.tabIndex)},enabled:oe(!1),disabled:oe(!0),checked:function(e){return I(e,"input")&&!!e.checked||I(e,"option")&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!t.pseudos.empty(e)},header:function(e){return V.test(e.nodeName)},input:function(e){return W.test(e.nodeName)},button:function(e){return I(e,"input")&&"button"===e.type||I(e,"button")},text:function(e){var t;return I(e,"input")&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:se((function(){return[0]})),last:se((function(e,t){return[t-1]})),eq:se((function(e,t,i){return[i<0?i+t:i]})),even:se((function(e,t){for(var i=0;i<t;i+=2)e.push(i);return e})),odd:se((function(e,t){for(var i=1;i<t;i+=2)e.push(i);return e})),lt:se((function(e,t,i){var r;for(r=i<0?i+t:i>t?t:i;--r>=0;)e.push(r);return e})),gt:se((function(e,t,i){for(var r=i<0?i+t:i;++r<t;)e.push(r);return e}))}},t.pseudos.nth=t.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})t.pseudos[e]=re(e);for(e in{submit:!0,reset:!0})t.pseudos[e]=ne(e);function ue(){}function pe(e,i){var r,n,o,s,a,c,u,p=b[e+" "];if(p)return i?0:p.slice(0);for(a=e,c=[],u=t.preFilter;a;){for(s in r&&!(n=F.exec(a))||(n&&(a=a.slice(n[0].length)||a),c.push(o=[])),r=!1,(n=H.exec(a))&&(r=n.shift(),o.push({value:r,type:n[0].replace(D," ")}),a=a.slice(r.length)),t.filter)!(n=U[s].exec(a))||u[s]&&!(n=u[s](n))||(r=n.shift(),o.push({value:r,type:s,matches:n}),a=a.slice(r.length));if(!r)break}return i?a.length:a?Z.error(e):b(e,c).slice(0)}function he(e){for(var t=0,i=e.length,r="";t<i;t++)r+=e[t].value;return r}function le(e,t,i){var r=t.dir,n=t.next,o=n||r,s=i&&"parentNode"===o,a=S++;return t.first?function(t,i,n){for(;t=t[r];)if(1===t.nodeType||s)return e(t,i,n);return!1}:function(t,i,c){var u,p,h=[y,a];if(c){for(;t=t[r];)if((1===t.nodeType||s)&&e(t,i,c))return!0}else for(;t=t[r];)if(1===t.nodeType||s)if(p=t[g]||(t[g]={}),n&&I(t,n))t=t[r]||t;else{if((u=p[o])&&u[0]===y&&u[1]===a)return h[2]=u[2];if(p[o]=h,h[2]=e(t,i,c))return!0}return!1}}function de(e){return e.length>1?function(t,i,r){for(var n=e.length;n--;)if(!e[n](t,i,r))return!1;return!0}:e[0]}function fe(e,t,i,r,n){for(var o,s=[],a=0,c=e.length,u=null!=t;a<c;a++)(o=e[a])&&(i&&!i(o,r,n)||(s.push(o),u&&t.push(a)));return s}function ve(e,t,i,r,n,o){return r&&!r[g]&&(r=ve(r)),n&&!n[g]&&(n=ve(n,o)),te((function(o,s,a,c){var u,h,l,d,f=[],m=[],g=s.length,y=o||function(e,t,i){for(var r=0,n=t.length;r<n;r++)Z(e,t[r],i);return i}(t||"*",a.nodeType?[a]:a,[]),S=!e||!o&&t?y:fe(y,f,e,a,c);if(i?i(S,d=n||(o?e:g||r)?[]:s,a,c):d=S,r)for(u=fe(d,m),r(u,[],a,c),h=u.length;h--;)(l=u[h])&&(d[m[h]]=!(S[m[h]]=l));if(o){if(n||e){if(n){for(u=[],h=d.length;h--;)(l=d[h])&&u.push(S[h]=l);n(null,d=[],u,c)}for(h=d.length;h--;)(l=d[h])&&(u=n?p.call(o,l):f[h])>-1&&(o[u]=!(s[u]=l))}}else d=fe(d===s?d.splice(g,d.length):d),n?n(null,s,d,c):v.apply(s,d)}))}function me(e){for(var r,n,o,s=e.length,a=t.relative[e[0].type],c=a||t.relative[" "],u=a?1:0,h=le((function(e){return e===r}),c,!0),l=le((function(e){return p.call(r,e)>-1}),c,!0),d=[function(e,t,n){var o=!a&&(n||t!=i)||((r=t).nodeType?h(e,t,n):l(e,t,n));return r=null,o}];u<s;u++)if(n=t.relative[e[u].type])d=[le(de(d),n)];else{if((n=t.filter[e[u].type].apply(null,e[u].matches))[g]){for(o=++u;o<s&&!t.relative[e[o].type];o++);return ve(u>1&&de(d),u>1&&he(e.slice(0,u-1).concat({value:" "===e[u-2].type?"*":""})).replace(D,"$1"),n,u<o&&me(e.slice(u,o)),o<s&&me(e=e.slice(o)),o<s&&he(e))}d.push(n)}return de(d)}function ge(e,r){var n,o=[],s=[],a=C[e+" "];if(!a){for(r||(r=pe(e)),n=r.length;n--;)(a=me(r[n]))[g]?o.push(a):s.push(a);a=C(e,function(e,r){var n=r.length>0,o=e.length>0,s=function(s,a,u,p,l){var d,f,m,g=0,S="0",w=s&&[],b=[],C=i,x=s||o&&t.find.TAG("*",l),A=y+=null==C?1:Math.random()||.1,P=x.length;for(l&&(i=a==c||a||l);S!==P&&null!=(d=x[S]);S++){if(o&&d){for(f=0,a||d.ownerDocument==c||(ce(d),u=!h);m=e[f++];)if(m(d,a||c,u)){v.call(p,d);break}l&&(y=A)}n&&((d=!m&&d)&&g--,s&&w.push(d))}if(g+=S,n&&S!==g){for(f=0;m=r[f++];)m(w,b,a,u);if(s){if(g>0)for(;S--;)w[S]||b[S]||(b[S]=E.call(p));b=fe(b)}v.apply(p,b),l&&!s&&b.length>0&&g+r.length>1&&T.uniqueSort(p)}return l&&(y=A,i=C),w};return n?te(s):s}(s,o)),a.selector=e}return a}function ye(e,i,r,n){var o,s,a,c,u,p="function"==typeof e&&e,l=!n&&pe(e=p.selector||e);if(r=r||[],1===l.length){if((s=l[0]=l[0].slice(0)).length>2&&"ID"===(a=s[0]).type&&9===i.nodeType&&h&&t.relative[s[1].type]){if(!(i=(t.find.ID(a.matches[0].replace(J,X),i)||[])[0]))return r;p&&(i=i.parentNode),e=e.slice(s.shift().value.length)}for(o=U.needsContext.test(e)?0:s.length;o--&&(a=s[o],!t.relative[c=a.type]);)if((u=t.find[c])&&(n=u(a.matches[0].replace(J,X),G.test(s[0].type)&&ae(i.parentNode)||i))){if(s.splice(o,1),!(e=n.length&&he(s)))return v.apply(r,n),r;break}}return(p||ge(e,l))(n,i,!h,r,!i||G.test(e)&&ae(i.parentNode)||i),r}ue.prototype=t.filters=t.pseudos,t.setFilters=new ue,m.sortStable=g.split("").sort(A).join("")===g,ce(),m.sortDetached=ie((function(e){return 1&e.compareDocumentPosition(c.createElement("fieldset"))})),T.find=Z,T.expr[":"]=T.expr.pseudos,T.unique=T.uniqueSort,Z.compile=ge,Z.select=ye,Z.setDocument=ce,Z.escape=T.escapeSelector,Z.getText=T.text,Z.isXML=T.isXMLDoc,Z.selectors=T.expr,Z.support=T.support,Z.uniqueSort=T.uniqueSort}();var B=function(e,t,i){for(var r=[],n=void 0!==i;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(n&&T(e).is(i))break;r.push(e)}return r},_=function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i},F=T.expr.match.needsContext,H=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function j(e,t,i){return g(t)?T.grep(e,(function(e,r){return!!t.call(e,r,e)!==i})):t.nodeType?T.grep(e,(function(e){return e===t!==i})):"string"!=typeof t?T.grep(e,(function(e){return p.call(t,e)>-1!==i})):T.filter(t,e,i)}T.filter=function(e,t,i){var r=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?T.find.matchesSelector(r,e)?[r]:[]:T.find.matches(e,T.grep(t,(function(e){return 1===e.nodeType})))},T.fn.extend({find:function(e){var t,i,r=this.length,n=this;if("string"!=typeof e)return this.pushStack(T(e).filter((function(){for(t=0;t<r;t++)if(T.contains(n[t],this))return!0})));for(i=this.pushStack([]),t=0;t<r;t++)T.find(e,n[t],i);return r>1?T.uniqueSort(i):i},filter:function(e){return this.pushStack(j(this,e||[],!1))},not:function(e){return this.pushStack(j(this,e||[],!0))},is:function(e){return!!j(this,"string"==typeof e&&F.test(e)?T(e):e||[],!1).length}});var K,q=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(T.fn.init=function(e,t,i){var r,n;if(!e)return this;if(i=i||K,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:q.exec(e))||!r[1]&&t)return!t||t.jquery?(t||i).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof T?t[0]:t,T.merge(this,T.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:S,!0)),H.test(r[1])&&T.isPlainObject(t))for(r in t)g(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(n=S.getElementById(r[2]))&&(this[0]=n,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):g(e)?void 0!==i.ready?i.ready(e):e(T):T.makeArray(e,this)}).prototype=T.fn,K=T(S);var U=/^(?:parents|prev(?:Until|All))/,W={children:!0,contents:!0,next:!0,prev:!0};function V(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}T.fn.extend({has:function(e){var t=T(e,this),i=t.length;return this.filter((function(){for(var e=0;e<i;e++)if(T.contains(this,t[e]))return!0}))},closest:function(e,t){var i,r=0,n=this.length,o=[],s="string"!=typeof e&&T(e);if(!F.test(e))for(;r<n;r++)for(i=this[r];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(s?s.index(i)>-1:1===i.nodeType&&T.find.matchesSelector(i,e))){o.push(i);break}return this.pushStack(o.length>1?T.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?p.call(T(e),this[0]):p.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(T.uniqueSort(T.merge(this.get(),T(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),T.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return B(e,"parentNode")},parentsUntil:function(e,t,i){return B(e,"parentNode",i)},next:function(e){return V(e,"nextSibling")},prev:function(e){return V(e,"previousSibling")},nextAll:function(e){return B(e,"nextSibling")},prevAll:function(e){return B(e,"previousSibling")},nextUntil:function(e,t,i){return B(e,"nextSibling",i)},prevUntil:function(e,t,i){return B(e,"previousSibling",i)},siblings:function(e){return _((e.parentNode||{}).firstChild,e)},children:function(e){return _(e.firstChild)},contents:function(e){return null!=e.contentDocument&&s(e.contentDocument)?e.contentDocument:(I(e,"template")&&(e=e.content||e),T.merge([],e.childNodes))}},(function(e,t){T.fn[e]=function(i,r){var n=T.map(this,t,i);return"Until"!==e.slice(-5)&&(r=i),r&&"string"==typeof r&&(n=T.filter(r,n)),this.length>1&&(W[e]||T.uniqueSort(n),U.test(e)&&n.reverse()),this.pushStack(n)}}));var $=/[^\x20\t\r\n\f]+/g;function G(e){return e}function J(e){throw e}function X(e,t,i,r){var n;try{e&&g(n=e.promise)?n.call(e).done(t).fail(i):e&&g(n=e.then)?n.call(e,t,i):t.apply(void 0,[e].slice(r))}catch(e){i.apply(void 0,[e])}}T.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return T.each(e.match($)||[],(function(e,i){t[i]=!0})),t}(e):T.extend({},e);var t,i,r,n,o=[],s=[],a=-1,c=function(){for(n=n||e.once,r=t=!0;s.length;a=-1)for(i=s.shift();++a<o.length;)!1===o[a].apply(i[0],i[1])&&e.stopOnFalse&&(a=o.length,i=!1);e.memory||(i=!1),t=!1,n&&(o=i?[]:"")},u={add:function(){return o&&(i&&!t&&(a=o.length-1,s.push(i)),function t(i){T.each(i,(function(i,r){g(r)?e.unique&&u.has(r)||o.push(r):r&&r.length&&"string"!==C(r)&&t(r)}))}(arguments),i&&!t&&c()),this},remove:function(){return T.each(arguments,(function(e,t){for(var i;(i=T.inArray(t,o,i))>-1;)o.splice(i,1),i<=a&&a--})),this},has:function(e){return e?T.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return n=s=[],o=i="",this},disabled:function(){return!o},lock:function(){return n=s=[],i||t||(o=i=""),this},locked:function(){return!!n},fireWith:function(e,i){return n||(i=[e,(i=i||[]).slice?i.slice():i],s.push(i),t||c()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!r}};return u},T.extend({Deferred:function(e){var t=[["notify","progress",T.Callbacks("memory"),T.Callbacks("memory"),2],["resolve","done",T.Callbacks("once memory"),T.Callbacks("once memory"),0,"resolved"],["reject","fail",T.Callbacks("once memory"),T.Callbacks("once memory"),1,"rejected"]],i="pending",n={state:function(){return i},always:function(){return o.done(arguments).fail(arguments),this},catch:function(e){return n.then(null,e)},pipe:function(){var e=arguments;return T.Deferred((function(i){T.each(t,(function(t,r){var n=g(e[r[4]])&&e[r[4]];o[r[1]]((function(){var e=n&&n.apply(this,arguments);e&&g(e.promise)?e.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[r[0]+"With"](this,n?[e]:arguments)}))})),e=null})).promise()},then:function(e,i,n){var o=0;function s(e,t,i,n){return function(){var a=this,c=arguments,u=function(){var r,u;if(!(e<o)){if((r=i.apply(a,c))===t.promise())throw new TypeError("Thenable self-resolution");u=r&&("object"==typeof r||"function"==typeof r)&&r.then,g(u)?n?u.call(r,s(o,t,G,n),s(o,t,J,n)):(o++,u.call(r,s(o,t,G,n),s(o,t,J,n),s(o,t,G,t.notifyWith))):(i!==G&&(a=void 0,c=[r]),(n||t.resolveWith)(a,c))}},p=n?u:function(){try{u()}catch(r){T.Deferred.exceptionHook&&T.Deferred.exceptionHook(r,p.error),e+1>=o&&(i!==J&&(a=void 0,c=[r]),t.rejectWith(a,c))}};e?p():(T.Deferred.getErrorHook?p.error=T.Deferred.getErrorHook():T.Deferred.getStackHook&&(p.error=T.Deferred.getStackHook()),r.setTimeout(p))}}return T.Deferred((function(r){t[0][3].add(s(0,r,g(n)?n:G,r.notifyWith)),t[1][3].add(s(0,r,g(e)?e:G)),t[2][3].add(s(0,r,g(i)?i:J))})).promise()},promise:function(e){return null!=e?T.extend(e,n):n}},o={};return T.each(t,(function(e,r){var s=r[2],a=r[5];n[r[1]]=s.add,a&&s.add((function(){i=a}),t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),s.add(r[3].fire),o[r[0]]=function(){return o[r[0]+"With"](this===o?void 0:this,arguments),this},o[r[0]+"With"]=s.fireWith})),n.promise(o),e&&e.call(o,o),o},when:function(e){var t=arguments.length,i=t,r=Array(i),n=a.call(arguments),o=T.Deferred(),s=function(e){return function(i){r[e]=this,n[e]=arguments.length>1?a.call(arguments):i,--t||o.resolveWith(r,n)}};if(t<=1&&(X(e,o.done(s(i)).resolve,o.reject,!t),"pending"===o.state()||g(n[i]&&n[i].then)))return o.then();for(;i--;)X(n[i],s(i),o.reject);return o.promise()}});var Q=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;T.Deferred.exceptionHook=function(e,t){r.console&&r.console.warn&&e&&Q.test(e.name)&&r.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},T.readyException=function(e){r.setTimeout((function(){throw e}))};var Y=T.Deferred();function Z(){S.removeEventListener("DOMContentLoaded",Z),r.removeEventListener("load",Z),T.ready()}T.fn.ready=function(e){return Y.then(e).catch((function(e){T.readyException(e)})),this},T.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--T.readyWait:T.isReady)||(T.isReady=!0,!0!==e&&--T.readyWait>0||Y.resolveWith(S,[T]))}}),T.ready.then=Y.then,"complete"===S.readyState||"loading"!==S.readyState&&!S.documentElement.doScroll?r.setTimeout(T.ready):(S.addEventListener("DOMContentLoaded",Z),r.addEventListener("load",Z));var ee=function(e,t,i,r,n,o,s){var a=0,c=e.length,u=null==i;if("object"===C(i))for(a in n=!0,i)ee(e,t,a,i[a],!0,o,s);else if(void 0!==r&&(n=!0,g(r)||(s=!0),u&&(s?(t.call(e,r),t=null):(u=t,t=function(e,t,i){return u.call(T(e),i)})),t))for(;a<c;a++)t(e[a],i,s?r:r.call(e[a],a,t(e[a],i)));return n?e:u?t.call(e):c?t(e[0],i):o},te=/^-ms-/,ie=/-([a-z])/g;function re(e,t){return t.toUpperCase()}function ne(e){return e.replace(te,"ms-").replace(ie,re)}var oe=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function se(){this.expando=T.expando+se.uid++}se.uid=1,se.prototype={cache:function(e){var t=e[this.expando];return t||(t={},oe(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,i){var r,n=this.cache(e);if("string"==typeof t)n[ne(t)]=i;else for(r in t)n[ne(r)]=t[r];return n},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][ne(t)]},access:function(e,t,i){return void 0===t||t&&"string"==typeof t&&void 0===i?this.get(e,t):(this.set(e,t,i),void 0!==i?i:t)},remove:function(e,t){var i,r=e[this.expando];if(void 0!==r){if(void 0!==t){i=(t=Array.isArray(t)?t.map(ne):(t=ne(t))in r?[t]:t.match($)||[]).length;for(;i--;)delete r[t[i]]}(void 0===t||T.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!T.isEmptyObject(t)}};var ae=new se,ce=new se,ue=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,pe=/[A-Z]/g;function he(e,t,i){var r;if(void 0===i&&1===e.nodeType)if(r="data-"+t.replace(pe,"-$&").toLowerCase(),"string"==typeof(i=e.getAttribute(r))){try{i=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:ue.test(e)?JSON.parse(e):e)}(i)}catch(e){}ce.set(e,t,i)}else i=void 0;return i}T.extend({hasData:function(e){return ce.hasData(e)||ae.hasData(e)},data:function(e,t,i){return ce.access(e,t,i)},removeData:function(e,t){ce.remove(e,t)},_data:function(e,t,i){return ae.access(e,t,i)},_removeData:function(e,t){ae.remove(e,t)}}),T.fn.extend({data:function(e,t){var i,r,n,o=this[0],s=o&&o.attributes;if(void 0===e){if(this.length&&(n=ce.get(o),1===o.nodeType&&!ae.get(o,"hasDataAttrs"))){for(i=s.length;i--;)s[i]&&0===(r=s[i].name).indexOf("data-")&&(r=ne(r.slice(5)),he(o,r,n[r]));ae.set(o,"hasDataAttrs",!0)}return n}return"object"==typeof e?this.each((function(){ce.set(this,e)})):ee(this,(function(t){var i;if(o&&void 0===t)return void 0!==(i=ce.get(o,e))||void 0!==(i=he(o,e))?i:void 0;this.each((function(){ce.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){ce.remove(this,e)}))}}),T.extend({queue:function(e,t,i){var r;if(e)return t=(t||"fx")+"queue",r=ae.get(e,t),i&&(!r||Array.isArray(i)?r=ae.access(e,t,T.makeArray(i)):r.push(i)),r||[]},dequeue:function(e,t){t=t||"fx";var i=T.queue(e,t),r=i.length,n=i.shift(),o=T._queueHooks(e,t);"inprogress"===n&&(n=i.shift(),r--),n&&("fx"===t&&i.unshift("inprogress"),delete o.stop,n.call(e,(function(){T.dequeue(e,t)}),o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return ae.get(e,i)||ae.access(e,i,{empty:T.Callbacks("once memory").add((function(){ae.remove(e,[t+"queue",i])}))})}}),T.fn.extend({queue:function(e,t){var i=2;return"string"!=typeof e&&(t=e,e="fx",i--),arguments.length<i?T.queue(this[0],e):void 0===t?this:this.each((function(){var i=T.queue(this,e,t);T._queueHooks(this,e),"fx"===e&&"inprogress"!==i[0]&&T.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){T.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,r=1,n=T.Deferred(),o=this,s=this.length,a=function(){--r||n.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)(i=ae.get(o[s],e+"queueHooks"))&&i.empty&&(r++,i.empty.add(a));return a(),n.promise(t)}});var le=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,de=new RegExp("^(?:([+-])=|)("+le+")([a-z%]*)$","i"),fe=["Top","Right","Bottom","Left"],ve=S.documentElement,me=function(e){return T.contains(e.ownerDocument,e)},ge={composed:!0};ve.getRootNode&&(me=function(e){return T.contains(e.ownerDocument,e)||e.getRootNode(ge)===e.ownerDocument});var ye=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&me(e)&&"none"===T.css(e,"display")};function Se(e,t,i,r){var n,o,s=20,a=r?function(){return r.cur()}:function(){return T.css(e,t,"")},c=a(),u=i&&i[3]||(T.cssNumber[t]?"":"px"),p=e.nodeType&&(T.cssNumber[t]||"px"!==u&&+c)&&de.exec(T.css(e,t));if(p&&p[3]!==u){for(c/=2,u=u||p[3],p=+c||1;s--;)T.style(e,t,p+u),(1-o)*(1-(o=a()/c||.5))<=0&&(s=0),p/=o;p*=2,T.style(e,t,p+u),i=i||[]}return i&&(p=+p||+c||0,n=i[1]?p+(i[1]+1)*i[2]:+i[2],r&&(r.unit=u,r.start=p,r.end=n)),n}var we={};function be(e){var t,i=e.ownerDocument,r=e.nodeName,n=we[r];return n||(t=i.body.appendChild(i.createElement(r)),n=T.css(t,"display"),t.parentNode.removeChild(t),"none"===n&&(n="block"),we[r]=n,n)}function Ce(e,t){for(var i,r,n=[],o=0,s=e.length;o<s;o++)(r=e[o]).style&&(i=r.style.display,t?("none"===i&&(n[o]=ae.get(r,"display")||null,n[o]||(r.style.display="")),""===r.style.display&&ye(r)&&(n[o]=be(r))):"none"!==i&&(n[o]="none",ae.set(r,"display",i)));for(o=0;o<s;o++)null!=n[o]&&(e[o].style.display=n[o]);return e}T.fn.extend({show:function(){return Ce(this,!0)},hide:function(){return Ce(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){ye(this)?T(this).show():T(this).hide()}))}});var xe,Ae,Te=/^(?:checkbox|radio)$/i,Pe=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Ie=/^$|^module$|\/(?:java|ecma)script/i;xe=S.createDocumentFragment().appendChild(S.createElement("div")),(Ae=S.createElement("input")).setAttribute("type","radio"),Ae.setAttribute("checked","checked"),Ae.setAttribute("name","t"),xe.appendChild(Ae),m.checkClone=xe.cloneNode(!0).cloneNode(!0).lastChild.checked,xe.innerHTML="<textarea>x</textarea>",m.noCloneChecked=!!xe.cloneNode(!0).lastChild.defaultValue,xe.innerHTML="<option></option>",m.option=!!xe.lastChild;var Ee={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ke(e,t){var i;return i=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&I(e,t)?T.merge([e],i):i}function Re(e,t){for(var i=0,r=e.length;i<r;i++)ae.set(e[i],"globalEval",!t||ae.get(t[i],"globalEval"))}Ee.tbody=Ee.tfoot=Ee.colgroup=Ee.caption=Ee.thead,Ee.th=Ee.td,m.option||(Ee.optgroup=Ee.option=[1,"<select multiple='multiple'>","</select>"]);var Me=/<|&#?\w+;/;function De(e,t,i,r,n){for(var o,s,a,c,u,p,h=t.createDocumentFragment(),l=[],d=0,f=e.length;d<f;d++)if((o=e[d])||0===o)if("object"===C(o))T.merge(l,o.nodeType?[o]:o);else if(Me.test(o)){for(s=s||h.appendChild(t.createElement("div")),a=(Pe.exec(o)||["",""])[1].toLowerCase(),c=Ee[a]||Ee._default,s.innerHTML=c[1]+T.htmlPrefilter(o)+c[2],p=c[0];p--;)s=s.lastChild;T.merge(l,s.childNodes),(s=h.firstChild).textContent=""}else l.push(t.createTextNode(o));for(h.textContent="",d=0;o=l[d++];)if(r&&T.inArray(o,r)>-1)n&&n.push(o);else if(u=me(o),s=ke(h.appendChild(o),"script"),u&&Re(s),i)for(p=0;o=s[p++];)Ie.test(o.type||"")&&i.push(o);return h}var Ne=/^([^.]*)(?:\.(.+)|)/;function Oe(){return!0}function Le(){return!1}function ze(e,t,i,r,n,o){var s,a;if("object"==typeof t){for(a in"string"!=typeof i&&(r=r||i,i=void 0),t)ze(e,a,i,r,t[a],o);return e}if(null==r&&null==n?(n=i,r=i=void 0):null==n&&("string"==typeof i?(n=r,r=void 0):(n=r,r=i,i=void 0)),!1===n)n=Le;else if(!n)return e;return 1===o&&(s=n,n=function(e){return T().off(e),s.apply(this,arguments)},n.guid=s.guid||(s.guid=T.guid++)),e.each((function(){T.event.add(this,t,n,r,i)}))}function Be(e,t,i){i?(ae.set(e,t,!1),T.event.add(e,t,{namespace:!1,handler:function(e){var i,r=ae.get(this,t);if(1&e.isTrigger&&this[t]){if(r)(T.event.special[t]||{}).delegateType&&e.stopPropagation();else if(r=a.call(arguments),ae.set(this,t,r),this[t](),i=ae.get(this,t),ae.set(this,t,!1),r!==i)return e.stopImmediatePropagation(),e.preventDefault(),i}else r&&(ae.set(this,t,T.event.trigger(r[0],r.slice(1),this)),e.stopPropagation(),e.isImmediatePropagationStopped=Oe)}})):void 0===ae.get(e,t)&&T.event.add(e,t,Oe)}T.event={global:{},add:function(e,t,i,r,n){var o,s,a,c,u,p,h,l,d,f,v,m=ae.get(e);if(oe(e))for(i.handler&&(i=(o=i).handler,n=o.selector),n&&T.find.matchesSelector(ve,n),i.guid||(i.guid=T.guid++),(c=m.events)||(c=m.events=Object.create(null)),(s=m.handle)||(s=m.handle=function(t){return void 0!==T&&T.event.triggered!==t.type?T.event.dispatch.apply(e,arguments):void 0}),u=(t=(t||"").match($)||[""]).length;u--;)d=v=(a=Ne.exec(t[u])||[])[1],f=(a[2]||"").split(".").sort(),d&&(h=T.event.special[d]||{},d=(n?h.delegateType:h.bindType)||d,h=T.event.special[d]||{},p=T.extend({type:d,origType:v,data:r,handler:i,guid:i.guid,selector:n,needsContext:n&&T.expr.match.needsContext.test(n),namespace:f.join(".")},o),(l=c[d])||((l=c[d]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(e,r,f,s)||e.addEventListener&&e.addEventListener(d,s)),h.add&&(h.add.call(e,p),p.handler.guid||(p.handler.guid=i.guid)),n?l.splice(l.delegateCount++,0,p):l.push(p),T.event.global[d]=!0)},remove:function(e,t,i,r,n){var o,s,a,c,u,p,h,l,d,f,v,m=ae.hasData(e)&&ae.get(e);if(m&&(c=m.events)){for(u=(t=(t||"").match($)||[""]).length;u--;)if(d=v=(a=Ne.exec(t[u])||[])[1],f=(a[2]||"").split(".").sort(),d){for(h=T.event.special[d]||{},l=c[d=(r?h.delegateType:h.bindType)||d]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=l.length;o--;)p=l[o],!n&&v!==p.origType||i&&i.guid!==p.guid||a&&!a.test(p.namespace)||r&&r!==p.selector&&("**"!==r||!p.selector)||(l.splice(o,1),p.selector&&l.delegateCount--,h.remove&&h.remove.call(e,p));s&&!l.length&&(h.teardown&&!1!==h.teardown.call(e,f,m.handle)||T.removeEvent(e,d,m.handle),delete c[d])}else for(d in c)T.event.remove(e,d+t[u],i,r,!0);T.isEmptyObject(c)&&ae.remove(e,"handle events")}},dispatch:function(e){var t,i,r,n,o,s,a=new Array(arguments.length),c=T.event.fix(e),u=(ae.get(this,"events")||Object.create(null))[c.type]||[],p=T.event.special[c.type]||{};for(a[0]=c,t=1;t<arguments.length;t++)a[t]=arguments[t];if(c.delegateTarget=this,!p.preDispatch||!1!==p.preDispatch.call(this,c)){for(s=T.event.handlers.call(this,c,u),t=0;(n=s[t++])&&!c.isPropagationStopped();)for(c.currentTarget=n.elem,i=0;(o=n.handlers[i++])&&!c.isImmediatePropagationStopped();)c.rnamespace&&!1!==o.namespace&&!c.rnamespace.test(o.namespace)||(c.handleObj=o,c.data=o.data,void 0!==(r=((T.event.special[o.origType]||{}).handle||o.handler).apply(n.elem,a))&&!1===(c.result=r)&&(c.preventDefault(),c.stopPropagation()));return p.postDispatch&&p.postDispatch.call(this,c),c.result}},handlers:function(e,t){var i,r,n,o,s,a=[],c=t.delegateCount,u=e.target;if(c&&u.nodeType&&!("click"===e.type&&e.button>=1))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==e.type||!0!==u.disabled)){for(o=[],s={},i=0;i<c;i++)void 0===s[n=(r=t[i]).selector+" "]&&(s[n]=r.needsContext?T(n,this).index(u)>-1:T.find(n,this,null,[u]).length),s[n]&&o.push(r);o.length&&a.push({elem:u,handlers:o})}return u=this,c<t.length&&a.push({elem:u,handlers:t.slice(c)}),a},addProp:function(e,t){Object.defineProperty(T.Event.prototype,e,{enumerable:!0,configurable:!0,get:g(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[T.expando]?e:new T.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return Te.test(t.type)&&t.click&&I(t,"input")&&Be(t,"click",!0),!1},trigger:function(e){var t=this||e;return Te.test(t.type)&&t.click&&I(t,"input")&&Be(t,"click"),!0},_default:function(e){var t=e.target;return Te.test(t.type)&&t.click&&I(t,"input")&&ae.get(t,"click")||I(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},T.removeEvent=function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i)},T.Event=function(e,t){if(!(this instanceof T.Event))return new T.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Oe:Le,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&T.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[T.expando]=!0},T.Event.prototype={constructor:T.Event,isDefaultPrevented:Le,isPropagationStopped:Le,isImmediatePropagationStopped:Le,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Oe,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Oe,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Oe,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},T.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},T.event.addProp),T.each({focus:"focusin",blur:"focusout"},(function(e,t){function i(e){if(S.documentMode){var i=ae.get(this,"handle"),r=T.event.fix(e);r.type="focusin"===e.type?"focus":"blur",r.isSimulated=!0,i(e),r.target===r.currentTarget&&i(r)}else T.event.simulate(t,e.target,T.event.fix(e))}T.event.special[e]={setup:function(){var r;if(Be(this,e,!0),!S.documentMode)return!1;(r=ae.get(this,t))||this.addEventListener(t,i),ae.set(this,t,(r||0)+1)},trigger:function(){return Be(this,e),!0},teardown:function(){var e;if(!S.documentMode)return!1;(e=ae.get(this,t)-1)?ae.set(this,t,e):(this.removeEventListener(t,i),ae.remove(this,t))},_default:function(t){return ae.get(t.target,e)},delegateType:t},T.event.special[t]={setup:function(){var r=this.ownerDocument||this.document||this,n=S.documentMode?this:r,o=ae.get(n,t);o||(S.documentMode?this.addEventListener(t,i):r.addEventListener(e,i,!0)),ae.set(n,t,(o||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,n=S.documentMode?this:r,o=ae.get(n,t)-1;o?ae.set(n,t,o):(S.documentMode?this.removeEventListener(t,i):r.removeEventListener(e,i,!0),ae.remove(n,t))}}})),T.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){T.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,r=e.relatedTarget,n=e.handleObj;return r&&(r===this||T.contains(this,r))||(e.type=n.origType,i=n.handler.apply(this,arguments),e.type=t),i}}})),T.fn.extend({on:function(e,t,i,r){return ze(this,e,t,i,r)},one:function(e,t,i,r){return ze(this,e,t,i,r,1)},off:function(e,t,i){var r,n;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,T(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(n in e)this.off(n,t,e[n]);return this}return!1!==t&&"function"!=typeof t||(i=t,t=void 0),!1===i&&(i=Le),this.each((function(){T.event.remove(this,e,i,t)}))}});var _e=/<script|<style|<link/i,Fe=/checked\s*(?:[^=]|=\s*.checked.)/i,He=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function je(e,t){return I(e,"table")&&I(11!==t.nodeType?t:t.firstChild,"tr")&&T(e).children("tbody")[0]||e}function Ke(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function qe(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Ue(e,t){var i,r,n,o,s,a;if(1===t.nodeType){if(ae.hasData(e)&&(a=ae.get(e).events))for(n in ae.remove(t,"handle events"),a)for(i=0,r=a[n].length;i<r;i++)T.event.add(t,n,a[n][i]);ce.hasData(e)&&(o=ce.access(e),s=T.extend({},o),ce.set(t,s))}}function We(e,t){var i=t.nodeName.toLowerCase();"input"===i&&Te.test(e.type)?t.checked=e.checked:"input"!==i&&"textarea"!==i||(t.defaultValue=e.defaultValue)}function Ve(e,t,i,r){t=c(t);var n,o,s,a,u,p,h=0,l=e.length,d=l-1,f=t[0],v=g(f);if(v||l>1&&"string"==typeof f&&!m.checkClone&&Fe.test(f))return e.each((function(n){var o=e.eq(n);v&&(t[0]=f.call(this,n,o.html())),Ve(o,t,i,r)}));if(l&&(o=(n=De(t,e[0].ownerDocument,!1,e,r)).firstChild,1===n.childNodes.length&&(n=o),o||r)){for(a=(s=T.map(ke(n,"script"),Ke)).length;h<l;h++)u=n,h!==d&&(u=T.clone(u,!0,!0),a&&T.merge(s,ke(u,"script"))),i.call(e[h],u,h);if(a)for(p=s[s.length-1].ownerDocument,T.map(s,qe),h=0;h<a;h++)u=s[h],Ie.test(u.type||"")&&!ae.access(u,"globalEval")&&T.contains(p,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?T._evalUrl&&!u.noModule&&T._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")},p):b(u.textContent.replace(He,""),u,p))}return e}function $e(e,t,i){for(var r,n=t?T.filter(t,e):e,o=0;null!=(r=n[o]);o++)i||1!==r.nodeType||T.cleanData(ke(r)),r.parentNode&&(i&&me(r)&&Re(ke(r,"script")),r.parentNode.removeChild(r));return e}T.extend({htmlPrefilter:function(e){return e},clone:function(e,t,i){var r,n,o,s,a=e.cloneNode(!0),c=me(e);if(!(m.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||T.isXMLDoc(e)))for(s=ke(a),r=0,n=(o=ke(e)).length;r<n;r++)We(o[r],s[r]);if(t)if(i)for(o=o||ke(e),s=s||ke(a),r=0,n=o.length;r<n;r++)Ue(o[r],s[r]);else Ue(e,a);return(s=ke(a,"script")).length>0&&Re(s,!c&&ke(e,"script")),a},cleanData:function(e){for(var t,i,r,n=T.event.special,o=0;void 0!==(i=e[o]);o++)if(oe(i)){if(t=i[ae.expando]){if(t.events)for(r in t.events)n[r]?T.event.remove(i,r):T.removeEvent(i,r,t.handle);i[ae.expando]=void 0}i[ce.expando]&&(i[ce.expando]=void 0)}}}),T.fn.extend({detach:function(e){return $e(this,e,!0)},remove:function(e){return $e(this,e)},text:function(e){return ee(this,(function(e){return void 0===e?T.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return Ve(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||je(this,e).appendChild(e)}))},prepend:function(){return Ve(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=je(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return Ve(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return Ve(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(T.cleanData(ke(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return T.clone(this,e,t)}))},html:function(e){return ee(this,(function(e){var t=this[0]||{},i=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!_e.test(e)&&!Ee[(Pe.exec(e)||["",""])[1].toLowerCase()]){e=T.htmlPrefilter(e);try{for(;i<r;i++)1===(t=this[i]||{}).nodeType&&(T.cleanData(ke(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return Ve(this,arguments,(function(t){var i=this.parentNode;T.inArray(this,e)<0&&(T.cleanData(ke(this)),i&&i.replaceChild(t,this))}),e)}}),T.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){T.fn[e]=function(e){for(var i,r=[],n=T(e),o=n.length-1,s=0;s<=o;s++)i=s===o?this:this.clone(!0),T(n[s])[t](i),u.apply(r,i.get());return this.pushStack(r)}}));var Ge=new RegExp("^("+le+")(?!px)[a-z%]+$","i"),Je=/^--/,Xe=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=r),t.getComputedStyle(e)},Qe=function(e,t,i){var r,n,o={};for(n in t)o[n]=e.style[n],e.style[n]=t[n];for(n in r=i.call(e),t)e.style[n]=o[n];return r},Ye=new RegExp(fe.join("|"),"i");function Ze(e,t,i){var r,n,o,s,a=Je.test(t),c=e.style;return(i=i||Xe(e))&&(s=i.getPropertyValue(t)||i[t],a&&s&&(s=s.replace(D,"$1")||void 0),""!==s||me(e)||(s=T.style(e,t)),!m.pixelBoxStyles()&&Ge.test(s)&&Ye.test(t)&&(r=c.width,n=c.minWidth,o=c.maxWidth,c.minWidth=c.maxWidth=c.width=s,s=i.width,c.width=r,c.minWidth=n,c.maxWidth=o)),void 0!==s?s+"":s}function et(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(p){u.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",p.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ve.appendChild(u).appendChild(p);var e=r.getComputedStyle(p);i="1%"!==e.top,c=12===t(e.marginLeft),p.style.right="60%",s=36===t(e.right),n=36===t(e.width),p.style.position="absolute",o=12===t(p.offsetWidth/3),ve.removeChild(u),p=null}}function t(e){return Math.round(parseFloat(e))}var i,n,o,s,a,c,u=S.createElement("div"),p=S.createElement("div");p.style&&(p.style.backgroundClip="content-box",p.cloneNode(!0).style.backgroundClip="",m.clearCloneStyle="content-box"===p.style.backgroundClip,T.extend(m,{boxSizingReliable:function(){return e(),n},pixelBoxStyles:function(){return e(),s},pixelPosition:function(){return e(),i},reliableMarginLeft:function(){return e(),c},scrollboxSize:function(){return e(),o},reliableTrDimensions:function(){var e,t,i,n;return null==a&&(e=S.createElement("table"),t=S.createElement("tr"),i=S.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="border:1px solid",t.style.height="1px",i.style.height="9px",i.style.display="block",ve.appendChild(e).appendChild(t).appendChild(i),n=r.getComputedStyle(t),a=parseInt(n.height,10)+parseInt(n.borderTopWidth,10)+parseInt(n.borderBottomWidth,10)===t.offsetHeight,ve.removeChild(e)),a}}))}();var tt=["Webkit","Moz","ms"],it=S.createElement("div").style,rt={};function nt(e){var t=T.cssProps[e]||rt[e];return t||(e in it?e:rt[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),i=tt.length;i--;)if((e=tt[i]+t)in it)return e}(e)||e)}var ot=/^(none|table(?!-c[ea]).+)/,st={position:"absolute",visibility:"hidden",display:"block"},at={letterSpacing:"0",fontWeight:"400"};function ct(e,t,i){var r=de.exec(t);return r?Math.max(0,r[2]-(i||0))+(r[3]||"px"):t}function ut(e,t,i,r,n,o){var s="width"===t?1:0,a=0,c=0,u=0;if(i===(r?"border":"content"))return 0;for(;s<4;s+=2)"margin"===i&&(u+=T.css(e,i+fe[s],!0,n)),r?("content"===i&&(c-=T.css(e,"padding"+fe[s],!0,n)),"margin"!==i&&(c-=T.css(e,"border"+fe[s]+"Width",!0,n))):(c+=T.css(e,"padding"+fe[s],!0,n),"padding"!==i?c+=T.css(e,"border"+fe[s]+"Width",!0,n):a+=T.css(e,"border"+fe[s]+"Width",!0,n));return!r&&o>=0&&(c+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-c-a-.5))||0),c+u}function pt(e,t,i){var r=Xe(e),n=(!m.boxSizingReliable()||i)&&"border-box"===T.css(e,"boxSizing",!1,r),o=n,s=Ze(e,t,r),a="offset"+t[0].toUpperCase()+t.slice(1);if(Ge.test(s)){if(!i)return s;s="auto"}return(!m.boxSizingReliable()&&n||!m.reliableTrDimensions()&&I(e,"tr")||"auto"===s||!parseFloat(s)&&"inline"===T.css(e,"display",!1,r))&&e.getClientRects().length&&(n="border-box"===T.css(e,"boxSizing",!1,r),(o=a in e)&&(s=e[a])),(s=parseFloat(s)||0)+ut(e,t,i||(n?"border":"content"),o,r,s)+"px"}function ht(e,t,i,r,n){return new ht.prototype.init(e,t,i,r,n)}T.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=Ze(e,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(e,t,i,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var n,o,s,a=ne(t),c=Je.test(t),u=e.style;if(c||(t=nt(a)),s=T.cssHooks[t]||T.cssHooks[a],void 0===i)return s&&"get"in s&&void 0!==(n=s.get(e,!1,r))?n:u[t];"string"==(o=typeof i)&&(n=de.exec(i))&&n[1]&&(i=Se(e,t,n),o="number"),null!=i&&i==i&&("number"!==o||c||(i+=n&&n[3]||(T.cssNumber[a]?"":"px")),m.clearCloneStyle||""!==i||0!==t.indexOf("background")||(u[t]="inherit"),s&&"set"in s&&void 0===(i=s.set(e,i,r))||(c?u.setProperty(t,i):u[t]=i))}},css:function(e,t,i,r){var n,o,s,a=ne(t);return Je.test(t)||(t=nt(a)),(s=T.cssHooks[t]||T.cssHooks[a])&&"get"in s&&(n=s.get(e,!0,i)),void 0===n&&(n=Ze(e,t,r)),"normal"===n&&t in at&&(n=at[t]),""===i||i?(o=parseFloat(n),!0===i||isFinite(o)?o||0:n):n}}),T.each(["height","width"],(function(e,t){T.cssHooks[t]={get:function(e,i,r){if(i)return!ot.test(T.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?pt(e,t,r):Qe(e,st,(function(){return pt(e,t,r)}))},set:function(e,i,r){var n,o=Xe(e),s=!m.scrollboxSize()&&"absolute"===o.position,a=(s||r)&&"border-box"===T.css(e,"boxSizing",!1,o),c=r?ut(e,t,r,a,o):0;return a&&s&&(c-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(o[t])-ut(e,t,"border",!1,o)-.5)),c&&(n=de.exec(i))&&"px"!==(n[3]||"px")&&(e.style[t]=i,i=T.css(e,t)),ct(0,i,c)}}})),T.cssHooks.marginLeft=et(m.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(Ze(e,"marginLeft"))||e.getBoundingClientRect().left-Qe(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),T.each({margin:"",padding:"",border:"Width"},(function(e,t){T.cssHooks[e+t]={expand:function(i){for(var r=0,n={},o="string"==typeof i?i.split(" "):[i];r<4;r++)n[e+fe[r]+t]=o[r]||o[r-2]||o[0];return n}},"margin"!==e&&(T.cssHooks[e+t].set=ct)})),T.fn.extend({css:function(e,t){return ee(this,(function(e,t,i){var r,n,o={},s=0;if(Array.isArray(t)){for(r=Xe(e),n=t.length;s<n;s++)o[t[s]]=T.css(e,t[s],!1,r);return o}return void 0!==i?T.style(e,t,i):T.css(e,t)}),e,t,arguments.length>1)}}),T.Tween=ht,ht.prototype={constructor:ht,init:function(e,t,i,r,n,o){this.elem=e,this.prop=i,this.easing=n||T.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(T.cssNumber[i]?"":"px")},cur:function(){var e=ht.propHooks[this.prop];return e&&e.get?e.get(this):ht.propHooks._default.get(this)},run:function(e){var t,i=ht.propHooks[this.prop];return this.options.duration?this.pos=t=T.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):ht.propHooks._default.set(this),this}},ht.prototype.init.prototype=ht.prototype,ht.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=T.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){T.fx.step[e.prop]?T.fx.step[e.prop](e):1!==e.elem.nodeType||!T.cssHooks[e.prop]&&null==e.elem.style[nt(e.prop)]?e.elem[e.prop]=e.now:T.style(e.elem,e.prop,e.now+e.unit)}}},ht.propHooks.scrollTop=ht.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},T.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},T.fx=ht.prototype.init,T.fx.step={};var lt,dt,ft=/^(?:toggle|show|hide)$/,vt=/queueHooks$/;function mt(){dt&&(!1===S.hidden&&r.requestAnimationFrame?r.requestAnimationFrame(mt):r.setTimeout(mt,T.fx.interval),T.fx.tick())}function gt(){return r.setTimeout((function(){lt=void 0})),lt=Date.now()}function yt(e,t){var i,r=0,n={height:e};for(t=t?1:0;r<4;r+=2-t)n["margin"+(i=fe[r])]=n["padding"+i]=e;return t&&(n.opacity=n.width=e),n}function St(e,t,i){for(var r,n=(wt.tweeners[t]||[]).concat(wt.tweeners["*"]),o=0,s=n.length;o<s;o++)if(r=n[o].call(i,t,e))return r}function wt(e,t,i){var r,n,o=0,s=wt.prefilters.length,a=T.Deferred().always((function(){delete c.elem})),c=function(){if(n)return!1;for(var t=lt||gt(),i=Math.max(0,u.startTime+u.duration-t),r=1-(i/u.duration||0),o=0,s=u.tweens.length;o<s;o++)u.tweens[o].run(r);return a.notifyWith(e,[u,r,i]),r<1&&s?i:(s||a.notifyWith(e,[u,1,0]),a.resolveWith(e,[u]),!1)},u=a.promise({elem:e,props:T.extend({},t),opts:T.extend(!0,{specialEasing:{},easing:T.easing._default},i),originalProperties:t,originalOptions:i,startTime:lt||gt(),duration:i.duration,tweens:[],createTween:function(t,i){var r=T.Tween(e,u.opts,t,i,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(r),r},stop:function(t){var i=0,r=t?u.tweens.length:0;if(n)return this;for(n=!0;i<r;i++)u.tweens[i].run(1);return t?(a.notifyWith(e,[u,1,0]),a.resolveWith(e,[u,t])):a.rejectWith(e,[u,t]),this}}),p=u.props;for(function(e,t){var i,r,n,o,s;for(i in e)if(n=t[r=ne(i)],o=e[i],Array.isArray(o)&&(n=o[1],o=e[i]=o[0]),i!==r&&(e[r]=o,delete e[i]),(s=T.cssHooks[r])&&"expand"in s)for(i in o=s.expand(o),delete e[r],o)i in e||(e[i]=o[i],t[i]=n);else t[r]=n}(p,u.opts.specialEasing);o<s;o++)if(r=wt.prefilters[o].call(u,e,p,u.opts))return g(r.stop)&&(T._queueHooks(u.elem,u.opts.queue).stop=r.stop.bind(r)),r;return T.map(p,St,u),g(u.opts.start)&&u.opts.start.call(e,u),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always),T.fx.timer(T.extend(c,{elem:e,anim:u,queue:u.opts.queue})),u}T.Animation=T.extend(wt,{tweeners:{"*":[function(e,t){var i=this.createTween(e,t);return Se(i.elem,e,de.exec(t),i),i}]},tweener:function(e,t){g(e)?(t=e,e=["*"]):e=e.match($);for(var i,r=0,n=e.length;r<n;r++)i=e[r],wt.tweeners[i]=wt.tweeners[i]||[],wt.tweeners[i].unshift(t)},prefilters:[function(e,t,i){var r,n,o,s,a,c,u,p,h="width"in t||"height"in t,l=this,d={},f=e.style,v=e.nodeType&&ye(e),m=ae.get(e,"fxshow");for(r in i.queue||(null==(s=T._queueHooks(e,"fx")).unqueued&&(s.unqueued=0,a=s.empty.fire,s.empty.fire=function(){s.unqueued||a()}),s.unqueued++,l.always((function(){l.always((function(){s.unqueued--,T.queue(e,"fx").length||s.empty.fire()}))}))),t)if(n=t[r],ft.test(n)){if(delete t[r],o=o||"toggle"===n,n===(v?"hide":"show")){if("show"!==n||!m||void 0===m[r])continue;v=!0}d[r]=m&&m[r]||T.style(e,r)}if((c=!T.isEmptyObject(t))||!T.isEmptyObject(d))for(r in h&&1===e.nodeType&&(i.overflow=[f.overflow,f.overflowX,f.overflowY],null==(u=m&&m.display)&&(u=ae.get(e,"display")),"none"===(p=T.css(e,"display"))&&(u?p=u:(Ce([e],!0),u=e.style.display||u,p=T.css(e,"display"),Ce([e]))),("inline"===p||"inline-block"===p&&null!=u)&&"none"===T.css(e,"float")&&(c||(l.done((function(){f.display=u})),null==u&&(p=f.display,u="none"===p?"":p)),f.display="inline-block")),i.overflow&&(f.overflow="hidden",l.always((function(){f.overflow=i.overflow[0],f.overflowX=i.overflow[1],f.overflowY=i.overflow[2]}))),c=!1,d)c||(m?"hidden"in m&&(v=m.hidden):m=ae.access(e,"fxshow",{display:u}),o&&(m.hidden=!v),v&&Ce([e],!0),l.done((function(){for(r in v||Ce([e]),ae.remove(e,"fxshow"),d)T.style(e,r,d[r])}))),c=St(v?m[r]:0,r,l),r in m||(m[r]=c.start,v&&(c.end=c.start,c.start=0))}],prefilter:function(e,t){t?wt.prefilters.unshift(e):wt.prefilters.push(e)}}),T.speed=function(e,t,i){var r=e&&"object"==typeof e?T.extend({},e):{complete:i||!i&&t||g(e)&&e,duration:e,easing:i&&t||t&&!g(t)&&t};return T.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in T.fx.speeds?r.duration=T.fx.speeds[r.duration]:r.duration=T.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){g(r.old)&&r.old.call(this),r.queue&&T.dequeue(this,r.queue)},r},T.fn.extend({fadeTo:function(e,t,i,r){return this.filter(ye).css("opacity",0).show().end().animate({opacity:t},e,i,r)},animate:function(e,t,i,r){var n=T.isEmptyObject(e),o=T.speed(t,i,r),s=function(){var t=wt(this,T.extend({},e),o);(n||ae.get(this,"finish"))&&t.stop(!0)};return s.finish=s,n||!1===o.queue?this.each(s):this.queue(o.queue,s)},stop:function(e,t,i){var r=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each((function(){var t=!0,n=null!=e&&e+"queueHooks",o=T.timers,s=ae.get(this);if(n)s[n]&&s[n].stop&&r(s[n]);else for(n in s)s[n]&&s[n].stop&&vt.test(n)&&r(s[n]);for(n=o.length;n--;)o[n].elem!==this||null!=e&&o[n].queue!==e||(o[n].anim.stop(i),t=!1,o.splice(n,1));!t&&i||T.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,i=ae.get(this),r=i[e+"queue"],n=i[e+"queueHooks"],o=T.timers,s=r?r.length:0;for(i.finish=!0,T.queue(this,e,[]),n&&n.stop&&n.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<s;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete i.finish}))}}),T.each(["toggle","show","hide"],(function(e,t){var i=T.fn[t];T.fn[t]=function(e,r,n){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(yt(t,!0),e,r,n)}})),T.each({slideDown:yt("show"),slideUp:yt("hide"),slideToggle:yt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){T.fn[e]=function(e,i,r){return this.animate(t,e,i,r)}})),T.timers=[],T.fx.tick=function(){var e,t=0,i=T.timers;for(lt=Date.now();t<i.length;t++)(e=i[t])()||i[t]!==e||i.splice(t--,1);i.length||T.fx.stop(),lt=void 0},T.fx.timer=function(e){T.timers.push(e),T.fx.start()},T.fx.interval=13,T.fx.start=function(){dt||(dt=!0,mt())},T.fx.stop=function(){dt=null},T.fx.speeds={slow:600,fast:200,_default:400},T.fn.delay=function(e,t){return e=T.fx&&T.fx.speeds[e]||e,t=t||"fx",this.queue(t,(function(t,i){var n=r.setTimeout(t,e);i.stop=function(){r.clearTimeout(n)}}))},function(){var e=S.createElement("input"),t=S.createElement("select").appendChild(S.createElement("option"));e.type="checkbox",m.checkOn=""!==e.value,m.optSelected=t.selected,(e=S.createElement("input")).value="t",e.type="radio",m.radioValue="t"===e.value}();var bt,Ct=T.expr.attrHandle;T.fn.extend({attr:function(e,t){return ee(this,T.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){T.removeAttr(this,e)}))}}),T.extend({attr:function(e,t,i){var r,n,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?T.prop(e,t,i):(1===o&&T.isXMLDoc(e)||(n=T.attrHooks[t.toLowerCase()]||(T.expr.match.bool.test(t)?bt:void 0)),void 0!==i?null===i?void T.removeAttr(e,t):n&&"set"in n&&void 0!==(r=n.set(e,i,t))?r:(e.setAttribute(t,i+""),i):n&&"get"in n&&null!==(r=n.get(e,t))?r:null==(r=T.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!m.radioValue&&"radio"===t&&I(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}},removeAttr:function(e,t){var i,r=0,n=t&&t.match($);if(n&&1===e.nodeType)for(;i=n[r++];)e.removeAttribute(i)}}),bt={set:function(e,t,i){return!1===t?T.removeAttr(e,i):e.setAttribute(i,i),i}},T.each(T.expr.match.bool.source.match(/\w+/g),(function(e,t){var i=Ct[t]||T.find.attr;Ct[t]=function(e,t,r){var n,o,s=t.toLowerCase();return r||(o=Ct[s],Ct[s]=n,n=null!=i(e,t,r)?s:null,Ct[s]=o),n}}));var xt=/^(?:input|select|textarea|button)$/i,At=/^(?:a|area)$/i;function Tt(e){return(e.match($)||[]).join(" ")}function Pt(e){return e.getAttribute&&e.getAttribute("class")||""}function It(e){return Array.isArray(e)?e:"string"==typeof e&&e.match($)||[]}T.fn.extend({prop:function(e,t){return ee(this,T.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[T.propFix[e]||e]}))}}),T.extend({prop:function(e,t,i){var r,n,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&T.isXMLDoc(e)||(t=T.propFix[t]||t,n=T.propHooks[t]),void 0!==i?n&&"set"in n&&void 0!==(r=n.set(e,i,t))?r:e[t]=i:n&&"get"in n&&null!==(r=n.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=T.find.attr(e,"tabindex");return t?parseInt(t,10):xt.test(e.nodeName)||At.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),m.optSelected||(T.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),T.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){T.propFix[this.toLowerCase()]=this})),T.fn.extend({addClass:function(e){var t,i,r,n,o,s;return g(e)?this.each((function(t){T(this).addClass(e.call(this,t,Pt(this)))})):(t=It(e)).length?this.each((function(){if(r=Pt(this),i=1===this.nodeType&&" "+Tt(r)+" "){for(o=0;o<t.length;o++)n=t[o],i.indexOf(" "+n+" ")<0&&(i+=n+" ");s=Tt(i),r!==s&&this.setAttribute("class",s)}})):this},removeClass:function(e){var t,i,r,n,o,s;return g(e)?this.each((function(t){T(this).removeClass(e.call(this,t,Pt(this)))})):arguments.length?(t=It(e)).length?this.each((function(){if(r=Pt(this),i=1===this.nodeType&&" "+Tt(r)+" "){for(o=0;o<t.length;o++)for(n=t[o];i.indexOf(" "+n+" ")>-1;)i=i.replace(" "+n+" "," ");s=Tt(i),r!==s&&this.setAttribute("class",s)}})):this:this.attr("class","")},toggleClass:function(e,t){var i,r,n,o,s=typeof e,a="string"===s||Array.isArray(e);return g(e)?this.each((function(i){T(this).toggleClass(e.call(this,i,Pt(this),t),t)})):"boolean"==typeof t&&a?t?this.addClass(e):this.removeClass(e):(i=It(e),this.each((function(){if(a)for(o=T(this),n=0;n<i.length;n++)r=i[n],o.hasClass(r)?o.removeClass(r):o.addClass(r);else void 0!==e&&"boolean"!==s||((r=Pt(this))&&ae.set(this,"__className__",r),this.setAttribute&&this.setAttribute("class",r||!1===e?"":ae.get(this,"__className__")||""))})))},hasClass:function(e){var t,i,r=0;for(t=" "+e+" ";i=this[r++];)if(1===i.nodeType&&(" "+Tt(Pt(i))+" ").indexOf(t)>-1)return!0;return!1}});var Et=/\r/g;T.fn.extend({val:function(e){var t,i,r,n=this[0];return arguments.length?(r=g(e),this.each((function(i){var n;1===this.nodeType&&(null==(n=r?e.call(this,i,T(this).val()):e)?n="":"number"==typeof n?n+="":Array.isArray(n)&&(n=T.map(n,(function(e){return null==e?"":e+""}))),(t=T.valHooks[this.type]||T.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,n,"value")||(this.value=n))}))):n?(t=T.valHooks[n.type]||T.valHooks[n.nodeName.toLowerCase()])&&"get"in t&&void 0!==(i=t.get(n,"value"))?i:"string"==typeof(i=n.value)?i.replace(Et,""):null==i?"":i:void 0}}),T.extend({valHooks:{option:{get:function(e){var t=T.find.attr(e,"value");return null!=t?t:Tt(T.text(e))}},select:{get:function(e){var t,i,r,n=e.options,o=e.selectedIndex,s="select-one"===e.type,a=s?null:[],c=s?o+1:n.length;for(r=o<0?c:s?o:0;r<c;r++)if(((i=n[r]).selected||r===o)&&!i.disabled&&(!i.parentNode.disabled||!I(i.parentNode,"optgroup"))){if(t=T(i).val(),s)return t;a.push(t)}return a},set:function(e,t){for(var i,r,n=e.options,o=T.makeArray(t),s=n.length;s--;)((r=n[s]).selected=T.inArray(T.valHooks.option.get(r),o)>-1)&&(i=!0);return i||(e.selectedIndex=-1),o}}}}),T.each(["radio","checkbox"],(function(){T.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=T.inArray(T(e).val(),t)>-1}},m.checkOn||(T.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}));var kt=r.location,Rt={guid:Date.now()},Mt=/\?/;T.parseXML=function(e){var t,i;if(!e||"string"!=typeof e)return null;try{t=(new r.DOMParser).parseFromString(e,"text/xml")}catch(e){}return i=t&&t.getElementsByTagName("parsererror")[0],t&&!i||T.error("Invalid XML: "+(i?T.map(i.childNodes,(function(e){return e.textContent})).join("\n"):e)),t};var Dt=/^(?:focusinfocus|focusoutblur)$/,Nt=function(e){e.stopPropagation()};T.extend(T.event,{trigger:function(e,t,i,n){var o,s,a,c,u,p,h,l,f=[i||S],v=d.call(e,"type")?e.type:e,m=d.call(e,"namespace")?e.namespace.split("."):[];if(s=l=a=i=i||S,3!==i.nodeType&&8!==i.nodeType&&!Dt.test(v+T.event.triggered)&&(v.indexOf(".")>-1&&(m=v.split("."),v=m.shift(),m.sort()),u=v.indexOf(":")<0&&"on"+v,(e=e[T.expando]?e:new T.Event(v,"object"==typeof e&&e)).isTrigger=n?2:3,e.namespace=m.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),t=null==t?[e]:T.makeArray(t,[e]),h=T.event.special[v]||{},n||!h.trigger||!1!==h.trigger.apply(i,t))){if(!n&&!h.noBubble&&!y(i)){for(c=h.delegateType||v,Dt.test(c+v)||(s=s.parentNode);s;s=s.parentNode)f.push(s),a=s;a===(i.ownerDocument||S)&&f.push(a.defaultView||a.parentWindow||r)}for(o=0;(s=f[o++])&&!e.isPropagationStopped();)l=s,e.type=o>1?c:h.bindType||v,(p=(ae.get(s,"events")||Object.create(null))[e.type]&&ae.get(s,"handle"))&&p.apply(s,t),(p=u&&s[u])&&p.apply&&oe(s)&&(e.result=p.apply(s,t),!1===e.result&&e.preventDefault());return e.type=v,n||e.isDefaultPrevented()||h._default&&!1!==h._default.apply(f.pop(),t)||!oe(i)||u&&g(i[v])&&!y(i)&&((a=i[u])&&(i[u]=null),T.event.triggered=v,e.isPropagationStopped()&&l.addEventListener(v,Nt),i[v](),e.isPropagationStopped()&&l.removeEventListener(v,Nt),T.event.triggered=void 0,a&&(i[u]=a)),e.result}},simulate:function(e,t,i){var r=T.extend(new T.Event,i,{type:e,isSimulated:!0});T.event.trigger(r,null,t)}}),T.fn.extend({trigger:function(e,t){return this.each((function(){T.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var i=this[0];if(i)return T.event.trigger(e,t,i,!0)}});var Ot=/\[\]$/,Lt=/\r?\n/g,zt=/^(?:submit|button|image|reset|file)$/i,Bt=/^(?:input|select|textarea|keygen)/i;function _t(e,t,i,r){var n;if(Array.isArray(t))T.each(t,(function(t,n){i||Ot.test(e)?r(e,n):_t(e+"["+("object"==typeof n&&null!=n?t:"")+"]",n,i,r)}));else if(i||"object"!==C(t))r(e,t);else for(n in t)_t(e+"["+n+"]",t[n],i,r)}T.param=function(e,t){var i,r=[],n=function(e,t){var i=g(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==i?"":i)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!T.isPlainObject(e))T.each(e,(function(){n(this.name,this.value)}));else for(i in e)_t(i,e[i],t,n);return r.join("&")},T.fn.extend({serialize:function(){return T.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=T.prop(this,"elements");return e?T.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!T(this).is(":disabled")&&Bt.test(this.nodeName)&&!zt.test(e)&&(this.checked||!Te.test(e))})).map((function(e,t){var i=T(this).val();return null==i?null:Array.isArray(i)?T.map(i,(function(e){return{name:t.name,value:e.replace(Lt,"\r\n")}})):{name:t.name,value:i.replace(Lt,"\r\n")}})).get()}});var Ft=/%20/g,Ht=/#.*$/,jt=/([?&])_=[^&]*/,Kt=/^(.*?):[ \t]*([^\r\n]*)$/gm,qt=/^(?:GET|HEAD)$/,Ut=/^\/\//,Wt={},Vt={},$t="*/".concat("*"),Gt=S.createElement("a");function Jt(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var r,n=0,o=t.toLowerCase().match($)||[];if(g(i))for(;r=o[n++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(i)):(e[r]=e[r]||[]).push(i)}}function Xt(e,t,i,r){var n={},o=e===Vt;function s(a){var c;return n[a]=!0,T.each(e[a]||[],(function(e,a){var u=a(t,i,r);return"string"!=typeof u||o||n[u]?o?!(c=u):void 0:(t.dataTypes.unshift(u),s(u),!1)})),c}return s(t.dataTypes[0])||!n["*"]&&s("*")}function Qt(e,t){var i,r,n=T.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((n[i]?e:r||(r={}))[i]=t[i]);return r&&T.extend(!0,e,r),e}Gt.href=kt.href,T.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:kt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(kt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":$t,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":T.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Qt(Qt(e,T.ajaxSettings),t):Qt(T.ajaxSettings,e)},ajaxPrefilter:Jt(Wt),ajaxTransport:Jt(Vt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var i,n,o,s,a,c,u,p,h,l,d=T.ajaxSetup({},t),f=d.context||d,v=d.context&&(f.nodeType||f.jquery)?T(f):T.event,m=T.Deferred(),g=T.Callbacks("once memory"),y=d.statusCode||{},w={},b={},C="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(u){if(!s)for(s={};t=Kt.exec(o);)s[t[1].toLowerCase()+" "]=(s[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=s[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return u?o:null},setRequestHeader:function(e,t){return null==u&&(e=b[e.toLowerCase()]=b[e.toLowerCase()]||e,w[e]=t),this},overrideMimeType:function(e){return null==u&&(d.mimeType=e),this},statusCode:function(e){var t;if(e)if(u)x.always(e[x.status]);else for(t in e)y[t]=[y[t],e[t]];return this},abort:function(e){var t=e||C;return i&&i.abort(t),A(0,t),this}};if(m.promise(x),d.url=((e||d.url||kt.href)+"").replace(Ut,kt.protocol+"//"),d.type=t.method||t.type||d.method||d.type,d.dataTypes=(d.dataType||"*").toLowerCase().match($)||[""],null==d.crossDomain){c=S.createElement("a");try{c.href=d.url,c.href=c.href,d.crossDomain=Gt.protocol+"//"+Gt.host!=c.protocol+"//"+c.host}catch(e){d.crossDomain=!0}}if(d.data&&d.processData&&"string"!=typeof d.data&&(d.data=T.param(d.data,d.traditional)),Xt(Wt,d,t,x),u)return x;for(h in(p=T.event&&d.global)&&0==T.active++&&T.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!qt.test(d.type),n=d.url.replace(Ht,""),d.hasContent?d.data&&d.processData&&0===(d.contentType||"").indexOf("application/x-www-form-urlencoded")&&(d.data=d.data.replace(Ft,"+")):(l=d.url.slice(n.length),d.data&&(d.processData||"string"==typeof d.data)&&(n+=(Mt.test(n)?"&":"?")+d.data,delete d.data),!1===d.cache&&(n=n.replace(jt,"$1"),l=(Mt.test(n)?"&":"?")+"_="+Rt.guid+++l),d.url=n+l),d.ifModified&&(T.lastModified[n]&&x.setRequestHeader("If-Modified-Since",T.lastModified[n]),T.etag[n]&&x.setRequestHeader("If-None-Match",T.etag[n])),(d.data&&d.hasContent&&!1!==d.contentType||t.contentType)&&x.setRequestHeader("Content-Type",d.contentType),x.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+$t+"; q=0.01":""):d.accepts["*"]),d.headers)x.setRequestHeader(h,d.headers[h]);if(d.beforeSend&&(!1===d.beforeSend.call(f,x,d)||u))return x.abort();if(C="abort",g.add(d.complete),x.done(d.success),x.fail(d.error),i=Xt(Vt,d,t,x)){if(x.readyState=1,p&&v.trigger("ajaxSend",[x,d]),u)return x;d.async&&d.timeout>0&&(a=r.setTimeout((function(){x.abort("timeout")}),d.timeout));try{u=!1,i.send(w,A)}catch(e){if(u)throw e;A(-1,e)}}else A(-1,"No Transport");function A(e,t,s,c){var h,l,S,w,b,C=t;u||(u=!0,a&&r.clearTimeout(a),i=void 0,o=c||"",x.readyState=e>0?4:0,h=e>=200&&e<300||304===e,s&&(w=function(e,t,i){for(var r,n,o,s,a=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(n in a)if(a[n]&&a[n].test(r)){c.unshift(n);break}if(c[0]in i)o=c[0];else{for(n in i){if(!c[0]||e.converters[n+" "+c[0]]){o=n;break}s||(s=n)}o=o||s}if(o)return o!==c[0]&&c.unshift(o),i[o]}(d,x,s)),!h&&T.inArray("script",d.dataTypes)>-1&&T.inArray("json",d.dataTypes)<0&&(d.converters["text script"]=function(){}),w=function(e,t,i,r){var n,o,s,a,c,u={},p=e.dataTypes.slice();if(p[1])for(s in e.converters)u[s.toLowerCase()]=e.converters[s];for(o=p.shift();o;)if(e.responseFields[o]&&(i[e.responseFields[o]]=t),!c&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),c=o,o=p.shift())if("*"===o)o=c;else if("*"!==c&&c!==o){if(!(s=u[c+" "+o]||u["* "+o]))for(n in u)if((a=n.split(" "))[1]===o&&(s=u[c+" "+a[0]]||u["* "+a[0]])){!0===s?s=u[n]:!0!==u[n]&&(o=a[0],p.unshift(a[1]));break}if(!0!==s)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(e){return{state:"parsererror",error:s?e:"No conversion from "+c+" to "+o}}}return{state:"success",data:t}}(d,w,x,h),h?(d.ifModified&&((b=x.getResponseHeader("Last-Modified"))&&(T.lastModified[n]=b),(b=x.getResponseHeader("etag"))&&(T.etag[n]=b)),204===e||"HEAD"===d.type?C="nocontent":304===e?C="notmodified":(C=w.state,l=w.data,h=!(S=w.error))):(S=C,!e&&C||(C="error",e<0&&(e=0))),x.status=e,x.statusText=(t||C)+"",h?m.resolveWith(f,[l,C,x]):m.rejectWith(f,[x,C,S]),x.statusCode(y),y=void 0,p&&v.trigger(h?"ajaxSuccess":"ajaxError",[x,d,h?l:S]),g.fireWith(f,[x,C]),p&&(v.trigger("ajaxComplete",[x,d]),--T.active||T.event.trigger("ajaxStop")))}return x},getJSON:function(e,t,i){return T.get(e,t,i,"json")},getScript:function(e,t){return T.get(e,void 0,t,"script")}}),T.each(["get","post"],(function(e,t){T[t]=function(e,i,r,n){return g(i)&&(n=n||r,r=i,i=void 0),T.ajax(T.extend({url:e,type:t,dataType:n,data:i,success:r},T.isPlainObject(e)&&e))}})),T.ajaxPrefilter((function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")})),T._evalUrl=function(e,t,i){return T.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){T.globalEval(e,t,i)}})},T.fn.extend({wrapAll:function(e){var t;return this[0]&&(g(e)&&(e=e.call(this[0])),t=T(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return g(e)?this.each((function(t){T(this).wrapInner(e.call(this,t))})):this.each((function(){var t=T(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)}))},wrap:function(e){var t=g(e);return this.each((function(i){T(this).wrapAll(t?e.call(this,i):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){T(this).replaceWith(this.childNodes)})),this}}),T.expr.pseudos.hidden=function(e){return!T.expr.pseudos.visible(e)},T.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},T.ajaxSettings.xhr=function(){try{return new r.XMLHttpRequest}catch(e){}};var Yt={0:200,1223:204},Zt=T.ajaxSettings.xhr();m.cors=!!Zt&&"withCredentials"in Zt,m.ajax=Zt=!!Zt,T.ajaxTransport((function(e){var t,i;if(m.cors||Zt&&!e.crossDomain)return{send:function(n,o){var s,a=e.xhr();if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(s in e.xhrFields)a[s]=e.xhrFields[s];for(s in e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest"),n)a.setRequestHeader(s,n[s]);t=function(e){return function(){t&&(t=i=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===e?a.abort():"error"===e?"number"!=typeof a.status?o(0,"error"):o(a.status,a.statusText):o(Yt[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=t(),i=a.onerror=a.ontimeout=t("error"),void 0!==a.onabort?a.onabort=i:a.onreadystatechange=function(){4===a.readyState&&r.setTimeout((function(){t&&i()}))},t=t("abort");try{a.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}})),T.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),T.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return T.globalEval(e),e}}}),T.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),T.ajaxTransport("script",(function(e){var t,i;if(e.crossDomain||e.scriptAttrs)return{send:function(r,n){t=T("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",i=function(e){t.remove(),i=null,e&&n("error"===e.type?404:200,e.type)}),S.head.appendChild(t[0])},abort:function(){i&&i()}}}));var ei,ti=[],ii=/(=)\?(?=&|$)|\?\?/;T.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=ti.pop()||T.expando+"_"+Rt.guid++;return this[e]=!0,e}}),T.ajaxPrefilter("json jsonp",(function(e,t,i){var n,o,s,a=!1!==e.jsonp&&(ii.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&ii.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return n=e.jsonpCallback=g(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(ii,"$1"+n):!1!==e.jsonp&&(e.url+=(Mt.test(e.url)?"&":"?")+e.jsonp+"="+n),e.converters["script json"]=function(){return s||T.error(n+" was not called"),s[0]},e.dataTypes[0]="json",o=r[n],r[n]=function(){s=arguments},i.always((function(){void 0===o?T(r).removeProp(n):r[n]=o,e[n]&&(e.jsonpCallback=t.jsonpCallback,ti.push(n)),s&&g(o)&&o(s[0]),s=o=void 0})),"script"})),m.createHTMLDocument=((ei=S.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===ei.childNodes.length),T.parseHTML=function(e,t,i){return"string"!=typeof e?[]:("boolean"==typeof t&&(i=t,t=!1),t||(m.createHTMLDocument?((r=(t=S.implementation.createHTMLDocument("")).createElement("base")).href=S.location.href,t.head.appendChild(r)):t=S),o=!i&&[],(n=H.exec(e))?[t.createElement(n[1])]:(n=De([e],t,o),o&&o.length&&T(o).remove(),T.merge([],n.childNodes)));var r,n,o},T.fn.load=function(e,t,i){var r,n,o,s=this,a=e.indexOf(" ");return a>-1&&(r=Tt(e.slice(a)),e=e.slice(0,a)),g(t)?(i=t,t=void 0):t&&"object"==typeof t&&(n="POST"),s.length>0&&T.ajax({url:e,type:n||"GET",dataType:"html",data:t}).done((function(e){o=arguments,s.html(r?T("<div>").append(T.parseHTML(e)).find(r):e)})).always(i&&function(e,t){s.each((function(){i.apply(this,o||[e.responseText,t,e])}))}),this},T.expr.pseudos.animated=function(e){return T.grep(T.timers,(function(t){return e===t.elem})).length},T.offset={setOffset:function(e,t,i){var r,n,o,s,a,c,u=T.css(e,"position"),p=T(e),h={};"static"===u&&(e.style.position="relative"),a=p.offset(),o=T.css(e,"top"),c=T.css(e,"left"),("absolute"===u||"fixed"===u)&&(o+c).indexOf("auto")>-1?(s=(r=p.position()).top,n=r.left):(s=parseFloat(o)||0,n=parseFloat(c)||0),g(t)&&(t=t.call(e,i,T.extend({},a))),null!=t.top&&(h.top=t.top-a.top+s),null!=t.left&&(h.left=t.left-a.left+n),"using"in t?t.using.call(e,h):p.css(h)}},T.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){T.offset.setOffset(this,e,t)}));var t,i,r=this[0];return r?r.getClientRects().length?(t=r.getBoundingClientRect(),i=r.ownerDocument.defaultView,{top:t.top+i.pageYOffset,left:t.left+i.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,i,r=this[0],n={top:0,left:0};if("fixed"===T.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),i=r.ownerDocument,e=r.offsetParent||i.documentElement;e&&(e===i.body||e===i.documentElement)&&"static"===T.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((n=T(e).offset()).top+=T.css(e,"borderTopWidth",!0),n.left+=T.css(e,"borderLeftWidth",!0))}return{top:t.top-n.top-T.css(r,"marginTop",!0),left:t.left-n.left-T.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===T.css(e,"position");)e=e.offsetParent;return e||ve}))}}),T.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var i="pageYOffset"===t;T.fn[e]=function(r){return ee(this,(function(e,r,n){var o;if(y(e)?o=e:9===e.nodeType&&(o=e.defaultView),void 0===n)return o?o[t]:e[r];o?o.scrollTo(i?o.pageXOffset:n,i?n:o.pageYOffset):e[r]=n}),e,r,arguments.length)}})),T.each(["top","left"],(function(e,t){T.cssHooks[t]=et(m.pixelPosition,(function(e,i){if(i)return i=Ze(e,t),Ge.test(i)?T(e).position()[t]+"px":i}))})),T.each({Height:"height",Width:"width"},(function(e,t){T.each({padding:"inner"+e,content:t,"":"outer"+e},(function(i,r){T.fn[r]=function(n,o){var s=arguments.length&&(i||"boolean"!=typeof n),a=i||(!0===n||!0===o?"margin":"border");return ee(this,(function(t,i,n){var o;return y(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===n?T.css(t,i,a):T.style(t,i,n,a)}),t,s?n:void 0,s)}}))})),T.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){T.fn[t]=function(e){return this.on(t,e)}})),T.fn.extend({bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,r){return this.on(t,e,i,r)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),T.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){T.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}}));var ri=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;T.proxy=function(e,t){var i,r,n;if("string"==typeof t&&(i=e[t],t=e,e=i),g(e))return r=a.call(arguments,2),n=function(){return e.apply(t||this,r.concat(a.call(arguments)))},n.guid=e.guid=e.guid||T.guid++,n},T.holdReady=function(e){e?T.readyWait++:T.ready(!0)},T.isArray=Array.isArray,T.parseJSON=JSON.parse,T.nodeName=I,T.isFunction=g,T.isWindow=y,T.camelCase=ne,T.type=C,T.now=Date.now,T.isNumeric=function(e){var t=T.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},T.trim=function(e){return null==e?"":(e+"").replace(ri,"$1")},void 0===(i=function(){return T}.apply(t,[]))||(e.exports=i);var ni=r.jQuery,oi=r.$;return T.noConflict=function(e){return r.$===T&&(r.$=oi),e&&r.jQuery===T&&(r.jQuery=ni),T},void 0===n&&(r.jQuery=r.$=T),T},"object"==typeof e.exports?e.exports=r.document?n(r,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(r)},43108:()=>{},92505:()=>{},10146:()=>{},30173:()=>{},41137:()=>{},10592:()=>{}},t={};function i(r){var n=t[r];if(void 0!==n)return n.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,i),o.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var r={};(()=>{i.d(r,{w:()=>ii});const e="OutputFormat",t="ServiceProperties";class n{static throwIfNullOrUndefined(e,t){if(null==e)throw new Error("throwIfNullOrUndefined:"+t)}static throwIfNull(e,t){if(null===e)throw new Error("throwIfNull:"+t)}static throwIfNullOrWhitespace(e,t){if(n.throwIfNullOrUndefined(e,t),(""+e).trim().length<1)throw new Error("throwIfNullOrWhitespace:"+t)}static throwIfNullOrTooLong(e,t,i){if(n.throwIfNullOrUndefined(e,t),(""+e).length>i)throw new Error("throwIfNullOrTooLong:"+t+" (more than "+i.toString()+" characters)")}static throwIfNullOrTooShort(e,t,i){if(n.throwIfNullOrUndefined(e,t),(""+e).length<i)throw new Error("throwIfNullOrTooShort:"+t+" (less than "+i.toString()+" characters)")}static throwIfDisposed(e){if(e)throw new Error("the object is already disposed")}static throwIfArrayEmptyOrWhitespace(e,t){if(n.throwIfNullOrUndefined(e,t),0===e.length)throw new Error("throwIfArrayEmptyOrWhitespace:"+t);for(const i of e)n.throwIfNullOrWhitespace(i,t)}static throwIfFileDoesNotExist(e,t){n.throwIfNullOrWhitespace(e,t)}static throwIfNotUndefined(e,t){if(void 0!==e)throw new Error("throwIfNotUndefined:"+t)}}var o,s,a,c;!function(e){e[e.SpeechServiceConnection_Key=0]="SpeechServiceConnection_Key",e[e.SpeechServiceConnection_Endpoint=1]="SpeechServiceConnection_Endpoint",e[e.SpeechServiceConnection_Region=2]="SpeechServiceConnection_Region",e[e.SpeechServiceAuthorization_Token=3]="SpeechServiceAuthorization_Token",e[e.SpeechServiceAuthorization_Type=4]="SpeechServiceAuthorization_Type",e[e.SpeechServiceConnection_EndpointId=5]="SpeechServiceConnection_EndpointId",e[e.SpeechServiceConnection_TranslationToLanguages=6]="SpeechServiceConnection_TranslationToLanguages",e[e.SpeechServiceConnection_TranslationVoice=7]="SpeechServiceConnection_TranslationVoice",e[e.SpeechServiceConnection_TranslationFeatures=8]="SpeechServiceConnection_TranslationFeatures",e[e.SpeechServiceConnection_IntentRegion=9]="SpeechServiceConnection_IntentRegion",e[e.SpeechServiceConnection_ProxyHostName=10]="SpeechServiceConnection_ProxyHostName",e[e.SpeechServiceConnection_ProxyPort=11]="SpeechServiceConnection_ProxyPort",e[e.SpeechServiceConnection_ProxyUserName=12]="SpeechServiceConnection_ProxyUserName",e[e.SpeechServiceConnection_ProxyPassword=13]="SpeechServiceConnection_ProxyPassword",e[e.SpeechServiceConnection_RecoMode=14]="SpeechServiceConnection_RecoMode",e[e.SpeechServiceConnection_RecoLanguage=15]="SpeechServiceConnection_RecoLanguage",e[e.Speech_SessionId=16]="Speech_SessionId",e[e.SpeechServiceConnection_SynthLanguage=17]="SpeechServiceConnection_SynthLanguage",e[e.SpeechServiceConnection_SynthVoice=18]="SpeechServiceConnection_SynthVoice",e[e.SpeechServiceConnection_SynthOutputFormat=19]="SpeechServiceConnection_SynthOutputFormat",e[e.SpeechServiceConnection_AutoDetectSourceLanguages=20]="SpeechServiceConnection_AutoDetectSourceLanguages",e[e.SpeechServiceResponse_RequestDetailedResultTrueFalse=21]="SpeechServiceResponse_RequestDetailedResultTrueFalse",e[e.SpeechServiceResponse_RequestProfanityFilterTrueFalse=22]="SpeechServiceResponse_RequestProfanityFilterTrueFalse",e[e.SpeechServiceResponse_JsonResult=23]="SpeechServiceResponse_JsonResult",e[e.SpeechServiceResponse_JsonErrorDetails=24]="SpeechServiceResponse_JsonErrorDetails",e[e.CancellationDetails_Reason=25]="CancellationDetails_Reason",e[e.CancellationDetails_ReasonText=26]="CancellationDetails_ReasonText",e[e.CancellationDetails_ReasonDetailedText=27]="CancellationDetails_ReasonDetailedText",e[e.LanguageUnderstandingServiceResponse_JsonResult=28]="LanguageUnderstandingServiceResponse_JsonResult",e[e.SpeechServiceConnection_Url=29]="SpeechServiceConnection_Url",e[e.SpeechServiceConnection_InitialSilenceTimeoutMs=30]="SpeechServiceConnection_InitialSilenceTimeoutMs",e[e.SpeechServiceConnection_EndSilenceTimeoutMs=31]="SpeechServiceConnection_EndSilenceTimeoutMs",e[e.Speech_SegmentationSilenceTimeoutMs=32]="Speech_SegmentationSilenceTimeoutMs",e[e.SpeechServiceConnection_EnableAudioLogging=33]="SpeechServiceConnection_EnableAudioLogging",e[e.SpeechServiceConnection_LanguageIdMode=34]="SpeechServiceConnection_LanguageIdMode",e[e.SpeechServiceConnection_RecognitionEndpointVersion=35]="SpeechServiceConnection_RecognitionEndpointVersion",e[e.SpeechServiceConnection_SpeakerIdMode=36]="SpeechServiceConnection_SpeakerIdMode",e[e.SpeechServiceResponse_ProfanityOption=37]="SpeechServiceResponse_ProfanityOption",e[e.SpeechServiceResponse_PostProcessingOption=38]="SpeechServiceResponse_PostProcessingOption",e[e.SpeechServiceResponse_RequestWordLevelTimestamps=39]="SpeechServiceResponse_RequestWordLevelTimestamps",e[e.SpeechServiceResponse_StablePartialResultThreshold=40]="SpeechServiceResponse_StablePartialResultThreshold",e[e.SpeechServiceResponse_OutputFormatOption=41]="SpeechServiceResponse_OutputFormatOption",e[e.SpeechServiceResponse_TranslationRequestStablePartialResult=42]="SpeechServiceResponse_TranslationRequestStablePartialResult",e[e.SpeechServiceResponse_RequestWordBoundary=43]="SpeechServiceResponse_RequestWordBoundary",e[e.SpeechServiceResponse_RequestPunctuationBoundary=44]="SpeechServiceResponse_RequestPunctuationBoundary",e[e.SpeechServiceResponse_RequestSentenceBoundary=45]="SpeechServiceResponse_RequestSentenceBoundary",e[e.Conversation_ApplicationId=46]="Conversation_ApplicationId",e[e.Conversation_DialogType=47]="Conversation_DialogType",e[e.Conversation_Initial_Silence_Timeout=48]="Conversation_Initial_Silence_Timeout",e[e.Conversation_From_Id=49]="Conversation_From_Id",e[e.Conversation_Conversation_Id=50]="Conversation_Conversation_Id",e[e.Conversation_Custom_Voice_Deployment_Ids=51]="Conversation_Custom_Voice_Deployment_Ids",e[e.Conversation_Speech_Activity_Template=52]="Conversation_Speech_Activity_Template",e[e.Conversation_Request_Bot_Status_Messages=53]="Conversation_Request_Bot_Status_Messages",e[e.Conversation_Agent_Connection_Id=54]="Conversation_Agent_Connection_Id",e[e.SpeechServiceConnection_Host=55]="SpeechServiceConnection_Host",e[e.ConversationTranslator_Host=56]="ConversationTranslator_Host",e[e.ConversationTranslator_Name=57]="ConversationTranslator_Name",e[e.ConversationTranslator_CorrelationId=58]="ConversationTranslator_CorrelationId",e[e.ConversationTranslator_Token=59]="ConversationTranslator_Token",e[e.PronunciationAssessment_ReferenceText=60]="PronunciationAssessment_ReferenceText",e[e.PronunciationAssessment_GradingSystem=61]="PronunciationAssessment_GradingSystem",e[e.PronunciationAssessment_Granularity=62]="PronunciationAssessment_Granularity",e[e.PronunciationAssessment_EnableMiscue=63]="PronunciationAssessment_EnableMiscue",e[e.PronunciationAssessment_Json=64]="PronunciationAssessment_Json",e[e.PronunciationAssessment_Params=65]="PronunciationAssessment_Params",e[e.SpeakerRecognition_Api_Version=66]="SpeakerRecognition_Api_Version"}(o||(o={}));class u{constructor(){this.privKeys=[],this.privValues=[]}getProperty(e,t){let i;i="string"==typeof e?e:o[e];for(let e=0;e<this.privKeys.length;e++)if(this.privKeys[e]===i)return this.privValues[e];if(void 0!==t)return String(t)}setProperty(e,t){let i;i="string"==typeof e?e:o[e];for(let e=0;e<this.privKeys.length;e++)if(this.privKeys[e]===i)return void(this.privValues[e]=t);this.privKeys.push(i),this.privValues.push(t)}clone(){const e=new u;for(let t=0;t<this.privKeys.length;t++)e.privKeys.push(this.privKeys[t]),e.privValues.push(this.privValues[t]);return e}mergeTo(e){this.privKeys.forEach((t=>{if(void 0===e.getProperty(t,void 0)){const i=this.getProperty(t);e.setProperty(t,i)}}))}get keys(){return this.privKeys}}!function(e){e[e.Simple=0]="Simple",e[e.Detailed=1]="Detailed"}(s||(s={})),function(e){e[e.Masked=0]="Masked",e[e.Removed=1]="Removed",e[e.Raw=2]="Raw"}(a||(a={})),function(e){e[e.Raw8Khz8BitMonoMULaw=0]="Raw8Khz8BitMonoMULaw",e[e.Riff16Khz16KbpsMonoSiren=1]="Riff16Khz16KbpsMonoSiren",e[e.Audio16Khz16KbpsMonoSiren=2]="Audio16Khz16KbpsMonoSiren",e[e.Audio16Khz32KBitRateMonoMp3=3]="Audio16Khz32KBitRateMonoMp3",e[e.Audio16Khz128KBitRateMonoMp3=4]="Audio16Khz128KBitRateMonoMp3",e[e.Audio16Khz64KBitRateMonoMp3=5]="Audio16Khz64KBitRateMonoMp3",e[e.Audio24Khz48KBitRateMonoMp3=6]="Audio24Khz48KBitRateMonoMp3",e[e.Audio24Khz96KBitRateMonoMp3=7]="Audio24Khz96KBitRateMonoMp3",e[e.Audio24Khz160KBitRateMonoMp3=8]="Audio24Khz160KBitRateMonoMp3",e[e.Raw16Khz16BitMonoTrueSilk=9]="Raw16Khz16BitMonoTrueSilk",e[e.Riff16Khz16BitMonoPcm=10]="Riff16Khz16BitMonoPcm",e[e.Riff8Khz16BitMonoPcm=11]="Riff8Khz16BitMonoPcm",e[e.Riff24Khz16BitMonoPcm=12]="Riff24Khz16BitMonoPcm",e[e.Riff8Khz8BitMonoMULaw=13]="Riff8Khz8BitMonoMULaw",e[e.Raw16Khz16BitMonoPcm=14]="Raw16Khz16BitMonoPcm",e[e.Raw24Khz16BitMonoPcm=15]="Raw24Khz16BitMonoPcm",e[e.Raw8Khz16BitMonoPcm=16]="Raw8Khz16BitMonoPcm",e[e.Ogg16Khz16BitMonoOpus=17]="Ogg16Khz16BitMonoOpus",e[e.Ogg24Khz16BitMonoOpus=18]="Ogg24Khz16BitMonoOpus",e[e.Raw48Khz16BitMonoPcm=19]="Raw48Khz16BitMonoPcm",e[e.Riff48Khz16BitMonoPcm=20]="Riff48Khz16BitMonoPcm",e[e.Audio48Khz96KBitRateMonoMp3=21]="Audio48Khz96KBitRateMonoMp3",e[e.Audio48Khz192KBitRateMonoMp3=22]="Audio48Khz192KBitRateMonoMp3",e[e.Ogg48Khz16BitMonoOpus=23]="Ogg48Khz16BitMonoOpus",e[e.Webm16Khz16BitMonoOpus=24]="Webm16Khz16BitMonoOpus",e[e.Webm24Khz16BitMonoOpus=25]="Webm24Khz16BitMonoOpus",e[e.Raw24Khz16BitMonoTrueSilk=26]="Raw24Khz16BitMonoTrueSilk",e[e.Raw8Khz8BitMonoALaw=27]="Raw8Khz8BitMonoALaw",e[e.Riff8Khz8BitMonoALaw=28]="Riff8Khz8BitMonoALaw",e[e.Webm24Khz16Bit24KbpsMonoOpus=29]="Webm24Khz16Bit24KbpsMonoOpus",e[e.Audio16Khz16Bit32KbpsMonoOpus=30]="Audio16Khz16Bit32KbpsMonoOpus",e[e.Audio24Khz16Bit48KbpsMonoOpus=31]="Audio24Khz16Bit48KbpsMonoOpus",e[e.Audio24Khz16Bit24KbpsMonoOpus=32]="Audio24Khz16Bit24KbpsMonoOpus",e[e.Raw22050Hz16BitMonoPcm=33]="Raw22050Hz16BitMonoPcm",e[e.Riff22050Hz16BitMonoPcm=34]="Riff22050Hz16BitMonoPcm",e[e.Raw44100Hz16BitMonoPcm=35]="Raw44100Hz16BitMonoPcm",e[e.Riff44100Hz16BitMonoPcm=36]="Riff44100Hz16BitMonoPcm"}(c||(c={}));class p{constructor(){}static fromSubscription(e,t){n.throwIfNullOrWhitespace(e,"subscriptionKey"),n.throwIfNullOrWhitespace(t,"region");const i=new h;return i.setProperty(o.SpeechServiceConnection_Region,t),i.setProperty(o.SpeechServiceConnection_IntentRegion,t),i.setProperty(o.SpeechServiceConnection_Key,e),i}static fromEndpoint(e,t){n.throwIfNull(e,"endpoint");const i=new h;return i.setProperty(o.SpeechServiceConnection_Endpoint,e.href),void 0!==t&&i.setProperty(o.SpeechServiceConnection_Key,t),i}static fromHost(e,t){n.throwIfNull(e,"hostName");const i=new h;return i.setProperty(o.SpeechServiceConnection_Host,e.protocol+"//"+e.hostname+(""===e.port?"":":"+e.port)),void 0!==t&&i.setProperty(o.SpeechServiceConnection_Key,t),i}static fromAuthorizationToken(e,t){n.throwIfNull(e,"authorizationToken"),n.throwIfNullOrWhitespace(t,"region");const i=new h;return i.setProperty(o.SpeechServiceConnection_Region,t),i.setProperty(o.SpeechServiceConnection_IntentRegion,t),i.authorizationToken=e,i}close(){}}class h extends p{constructor(){super(),this.privProperties=new u,this.speechRecognitionLanguage="en-US",this.outputFormat=s.Simple}get properties(){return this.privProperties}get endPoint(){return new URL(this.privProperties.getProperty(o.SpeechServiceConnection_Endpoint))}get subscriptionKey(){return this.privProperties.getProperty(o.SpeechServiceConnection_Key)}get region(){return this.privProperties.getProperty(o.SpeechServiceConnection_Region)}get authorizationToken(){return this.privProperties.getProperty(o.SpeechServiceAuthorization_Token)}set authorizationToken(e){this.privProperties.setProperty(o.SpeechServiceAuthorization_Token,e)}get speechRecognitionLanguage(){return this.privProperties.getProperty(o.SpeechServiceConnection_RecoLanguage)}set speechRecognitionLanguage(e){this.privProperties.setProperty(o.SpeechServiceConnection_RecoLanguage,e)}get autoDetectSourceLanguages(){return this.privProperties.getProperty(o.SpeechServiceConnection_AutoDetectSourceLanguages)}set autoDetectSourceLanguages(e){this.privProperties.setProperty(o.SpeechServiceConnection_AutoDetectSourceLanguages,e)}get outputFormat(){return s[this.privProperties.getProperty(e,void 0)]}set outputFormat(t){this.privProperties.setProperty(e,s[t])}get endpointId(){return this.privProperties.getProperty(o.SpeechServiceConnection_EndpointId)}set endpointId(e){this.privProperties.setProperty(o.SpeechServiceConnection_EndpointId,e)}setProperty(e,t){n.throwIfNull(t,"value"),this.privProperties.setProperty(e,t)}getProperty(e,t){return this.privProperties.getProperty(e,t)}setProxy(e,t,i,r){this.setProperty(o[o.SpeechServiceConnection_ProxyHostName],e),this.setProperty(o[o.SpeechServiceConnection_ProxyPort],t),this.setProperty(o[o.SpeechServiceConnection_ProxyUserName],i),this.setProperty(o[o.SpeechServiceConnection_ProxyPassword],r)}setServiceProperty(e,i){const r=JSON.parse(this.privProperties.getProperty(t,"{}"));r[e]=i,this.privProperties.setProperty(t,JSON.stringify(r))}setProfanity(e){this.privProperties.setProperty(o.SpeechServiceResponse_ProfanityOption,a[e])}enableAudioLogging(){this.privProperties.setProperty(o.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privProperties.setProperty(o.SpeechServiceResponse_RequestWordLevelTimestamps,"true")}enableDictation(){this.privProperties.setProperty("ForceDictation","true")}clone(){const e=new h;return e.privProperties=this.privProperties.clone(),e}get speechSynthesisLanguage(){return this.privProperties.getProperty(o.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(e){this.privProperties.setProperty(o.SpeechServiceConnection_SynthLanguage,e)}get speechSynthesisVoiceName(){return this.privProperties.getProperty(o.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(e){this.privProperties.setProperty(o.SpeechServiceConnection_SynthVoice,e)}get speechSynthesisOutputFormat(){return c[this.privProperties.getProperty(o.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(e){this.privProperties.setProperty(o.SpeechServiceConnection_SynthOutputFormat,c[e])}}class l extends Error{constructor(e){super(e),this.name="ArgumentNull",this.message=e}}class d extends Error{constructor(e){super(e),this.name="InvalidOperation",this.message=e}}class f extends Error{constructor(e,t){super(t),this.name=e+"ObjectDisposed",this.message=t}}const v={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let m;const g=new Uint8Array(16);function y(){if(!m&&(m="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!m))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return m(g)}const S=[];for(let e=0;e<256;++e)S.push((e+256).toString(16).slice(1));function w(e,t=0){return(S[e[t+0]]+S[e[t+1]]+S[e[t+2]]+S[e[t+3]]+"-"+S[e[t+4]]+S[e[t+5]]+"-"+S[e[t+6]]+S[e[t+7]]+"-"+S[e[t+8]]+S[e[t+9]]+"-"+S[e[t+10]]+S[e[t+11]]+S[e[t+12]]+S[e[t+13]]+S[e[t+14]]+S[e[t+15]]).toLowerCase()}const b=function(e,t,i){if(v.randomUUID&&!t&&!e)return v.randomUUID();const r=(e=e||{}).random||(e.rng||y)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){i=i||0;for(let e=0;e<16;++e)t[i+e]=r[e];return t}return w(r)},C=()=>b().replace(new RegExp("-","g"),"").toUpperCase();class x{constructor(e){this.privEventListeners={},this.privIsDisposed=!1,this.privConsoleListener=void 0,this.privMetadata=e}onEvent(e){if(this.isDisposed())throw new f("EventSource");if(this.metadata)for(const t in this.metadata)t&&e.metadata&&(e.metadata[t]||(e.metadata[t]=this.metadata[t]));for(const t in this.privEventListeners)t&&this.privEventListeners[t]&&this.privEventListeners[t](e)}attach(e){const t=C();return this.privEventListeners[t]=e,{detach:()=>(delete this.privEventListeners[t],Promise.resolve())}}attachListener(e){return this.attach((t=>e.onEvent(t)))}attachConsoleListener(e){return this.privConsoleListener&&this.privConsoleListener.detach(),this.privConsoleListener=this.attach((t=>e.onEvent(t))),this.privConsoleListener}isDisposed(){return this.privIsDisposed}dispose(){this.privEventListeners=null,this.privIsDisposed=!0}get metadata(){return this.privMetadata}}var A,T,P,I,E,k,R;!function(e){e[e.Text=0]="Text",e[e.Binary=1]="Binary"}(A||(A={}));class M{constructor(e,t,i,r){if(this.privBody=null,e===A.Text&&t&&"string"!=typeof t)throw new d("Payload must be a string");if(e===A.Binary&&t&&!(t instanceof ArrayBuffer))throw new d("Payload must be ArrayBuffer");switch(this.privMessageType=e,this.privBody=t,this.privHeaders=i||{},this.privId=r||C(),this.messageType){case A.Binary:this.privSize=null!==this.binaryBody?this.binaryBody.byteLength:0;break;case A.Text:this.privSize=this.textBody.length}}get messageType(){return this.privMessageType}get headers(){return this.privHeaders}get body(){return this.privBody}get textBody(){if(this.privMessageType===A.Binary)throw new d("Not supported for binary message");return this.privBody}get binaryBody(){if(this.privMessageType===A.Text)throw new d("Not supported for text message");return this.privBody}get id(){return this.privId}}!function(e){e[e.Debug=0]="Debug",e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error",e[e.None=4]="None"}(T||(T={}));class D{constructor(e,t){this.privName=e,this.privEventId=C(),this.privEventTime=(new Date).toISOString(),this.privEventType=t,this.privMetadata={}}get name(){return this.privName}get eventId(){return this.privEventId}get eventTime(){return this.privEventTime}get eventType(){return this.privEventType}get metadata(){return this.privMetadata}}class N extends D{constructor(e,t,i=T.Info){super(e,i),this.privJsonResult=t}get jsonString(){return this.privJsonResult}}class O extends D{constructor(e,t,i=T.Info){super(e,i),this.privConnectionId=t}get connectionId(){return this.privConnectionId}}class L extends O{constructor(e,t,i){super("ConnectionStartEvent",e),this.privUri=t,this.privHeaders=i}get uri(){return this.privUri}get headers(){return this.privHeaders}}class z extends O{constructor(e){super("ConnectionEstablishedEvent",e)}}class B extends O{constructor(e,t,i){super("ConnectionClosedEvent",e,T.Debug),this.privReason=i,this.privStatusCode=t}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}}class _ extends O{constructor(e,t,i){super("ConnectionErrorEvent",e,T.Debug),this.privMessage=t,this.privType=i}get message(){return this.privMessage}get type(){return this.privType}}class F extends O{constructor(e,t,i){super("ConnectionMessageReceivedEvent",e),this.privNetworkReceivedTime=t,this.privMessage=i}get networkReceivedTime(){return this.privNetworkReceivedTime}get message(){return this.privMessage}}class H extends O{constructor(e,t,i){super("ConnectionMessageSentEvent",e),this.privNetworkSentTime=t,this.privMessage=i}get networkSentTime(){return this.privNetworkSentTime}get message(){return this.privMessage}}!function(e){e[e.None=0]="None",e[e.Connected=1]="Connected",e[e.Connecting=2]="Connecting",e[e.Disconnected=3]="Disconnected"}(P||(P={})),function(e){e[e.Error=0]="Error",e[e.EndOfStream=1]="EndOfStream"}(I||(I={})),function(e){e[e.NoError=0]="NoError",e[e.AuthenticationFailure=1]="AuthenticationFailure",e[e.BadRequestParameters=2]="BadRequestParameters",e[e.TooManyRequests=3]="TooManyRequests",e[e.ConnectionFailure=4]="ConnectionFailure",e[e.ServiceTimeout=5]="ServiceTimeout",e[e.ServiceError=6]="ServiceError",e[e.RuntimeError=7]="RuntimeError",e[e.Forbidden=8]="Forbidden"}(E||(E={}));class j{constructor(e){this.privResult=e}get result(){return this.privResult}}class K{constructor(e,t,i,r){this.privResultId=e,this.privReason=t,this.privErrorDetails=i,this.privProperties=r}get resultId(){return this.privResultId}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get properties(){return this.privProperties}}class q extends K{constructor(e,t,i,r,n,o){super(e,t,r,n),this.privAudioData=i,this.privAudioDuration=o}get audioData(){return this.privAudioData}get audioDuration(){return this.privAudioDuration}}!function(e){e[e.NoMatch=0]="NoMatch",e[e.Canceled=1]="Canceled",e[e.RecognizingSpeech=2]="RecognizingSpeech",e[e.RecognizedSpeech=3]="RecognizedSpeech",e[e.RecognizedKeyword=4]="RecognizedKeyword",e[e.RecognizingIntent=5]="RecognizingIntent",e[e.RecognizedIntent=6]="RecognizedIntent",e[e.TranslatingSpeech=7]="TranslatingSpeech",e[e.TranslatedSpeech=8]="TranslatedSpeech",e[e.SynthesizingAudio=9]="SynthesizingAudio",e[e.SynthesizingAudioCompleted=10]="SynthesizingAudioCompleted",e[e.SynthesizingAudioStarted=11]="SynthesizingAudioStarted",e[e.EnrollingVoiceProfile=12]="EnrollingVoiceProfile",e[e.EnrolledVoiceProfile=13]="EnrolledVoiceProfile",e[e.RecognizedSpeakers=14]="RecognizedSpeakers",e[e.RecognizedSpeaker=15]="RecognizedSpeaker",e[e.ResetVoiceProfile=16]="ResetVoiceProfile",e[e.DeletedVoiceProfile=17]="DeletedVoiceProfile",e[e.VoicesListRetrieved=18]="VoicesListRetrieved"}(k||(k={}));class U{constructor(e,t,i,r,n,o){this.privAudioOffset=e,this.privDuration=t,this.privText=i,this.privWordLength=r,this.privTextOffset=n,this.privBoundaryType=o}get audioOffset(){return this.privAudioOffset}get duration(){return this.privDuration}get text(){return this.privText}get wordLength(){return this.privWordLength}get textOffset(){return this.privTextOffset}get boundaryType(){return this.privBoundaryType}}class W{constructor(e,t){this.privAudioOffset=e,this.privText=t}get audioOffset(){return this.privAudioOffset}get text(){return this.privText}}class V{constructor(e,t,i){this.privAudioOffset=e,this.privVisemeId=t,this.privAnimation=i}get audioOffset(){return this.privAudioOffset}get visemeId(){return this.privVisemeId}get animation(){return this.privAnimation}}!function(e){e[e.None=0]="None",e[e.Resolved=1]="Resolved",e[e.Rejected=2]="Rejected"}(R||(R={}));class ${constructor(){this.resolve=e=>(this.privResolve(e),this),this.reject=e=>(this.privReject(e),this),this.privPromise=new Promise(((e,t)=>{this.privResolve=e,this.privReject=t}))}get promise(){return this.privPromise}}class G{static setEventSource(e){if(!e)throw new l("eventSource");G.privInstance=e}static get instance(){return G.privInstance}}G.privInstance=new x;class J{constructor(e){if(this.privSubscriptionIdCounter=0,this.privAddSubscriptions={},this.privRemoveSubscriptions={},this.privDisposedSubscriptions={},this.privDisposeReason=null,this.privList=[],e)for(const t of e)this.privList.push(t)}get(e){return this.throwIfDisposed(),this.privList[e]}first(){return this.get(0)}last(){return this.get(this.length()-1)}add(e){this.throwIfDisposed(),this.insertAt(this.privList.length,e)}insertAt(e,t){this.throwIfDisposed(),0===e?this.privList.unshift(t):e===this.privList.length?this.privList.push(t):this.privList.splice(e,0,t),this.triggerSubscriptions(this.privAddSubscriptions)}removeFirst(){return this.throwIfDisposed(),this.removeAt(0)}removeLast(){return this.throwIfDisposed(),this.removeAt(this.length()-1)}removeAt(e){return this.throwIfDisposed(),this.remove(e,1)[0]}remove(e,t){this.throwIfDisposed();const i=this.privList.splice(e,t);return this.triggerSubscriptions(this.privRemoveSubscriptions),i}clear(){this.throwIfDisposed(),this.remove(0,this.length())}length(){return this.throwIfDisposed(),this.privList.length}onAdded(e){this.throwIfDisposed();const t=this.privSubscriptionIdCounter++;return this.privAddSubscriptions[t]=e,{detach:()=>(delete this.privAddSubscriptions[t],Promise.resolve())}}onRemoved(e){this.throwIfDisposed();const t=this.privSubscriptionIdCounter++;return this.privRemoveSubscriptions[t]=e,{detach:()=>(delete this.privRemoveSubscriptions[t],Promise.resolve())}}onDisposed(e){this.throwIfDisposed();const t=this.privSubscriptionIdCounter++;return this.privDisposedSubscriptions[t]=e,{detach:()=>(delete this.privDisposedSubscriptions[t],Promise.resolve())}}join(e){return this.throwIfDisposed(),this.privList.join(e)}toArray(){const e=Array();return this.privList.forEach((t=>{e.push(t)})),e}any(e){return this.throwIfDisposed(),e?this.where(e).length()>0:this.length()>0}all(e){return this.throwIfDisposed(),this.where(e).length()===this.length()}forEach(e){this.throwIfDisposed();for(let t=0;t<this.length();t++)e(this.privList[t],t)}select(e){this.throwIfDisposed();const t=[];for(let i=0;i<this.privList.length;i++)t.push(e(this.privList[i],i));return new J(t)}where(e){this.throwIfDisposed();const t=new J;for(let i=0;i<this.privList.length;i++)e(this.privList[i],i)&&t.add(this.privList[i]);return t}orderBy(e){this.throwIfDisposed();const t=this.toArray().sort(e);return new J(t)}orderByDesc(e){return this.throwIfDisposed(),this.orderBy(((t,i)=>e(i,t)))}clone(){return this.throwIfDisposed(),new J(this.toArray())}concat(e){return this.throwIfDisposed(),new J(this.privList.concat(e.toArray()))}concatArray(e){return this.throwIfDisposed(),new J(this.privList.concat(e))}isDisposed(){return null==this.privList}dispose(e){this.isDisposed()||(this.privDisposeReason=e,this.privList=null,this.privAddSubscriptions=null,this.privRemoveSubscriptions=null,this.triggerSubscriptions(this.privDisposedSubscriptions))}throwIfDisposed(){if(this.isDisposed())throw new f("List",this.privDisposeReason)}triggerSubscriptions(e){if(e)for(const t in e)t&&e[t]()}}var X,Q=function(e,t,i,r){return new(i||(i=Promise))((function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};!function(e){e[e.Dequeue=0]="Dequeue",e[e.Peek=1]="Peek"}(X||(X={}));class Y{constructor(e){this.privPromiseStore=new J,this.privIsDrainInProgress=!1,this.privIsDisposing=!1,this.privDisposeReason=null,this.privList=e||new J,this.privDetachables=[],this.privSubscribers=new J,this.privDetachables.push(this.privList.onAdded((()=>this.drain())))}enqueue(e){this.throwIfDispose(),this.enqueueFromPromise(new Promise((t=>t(e))))}enqueueFromPromise(e){this.throwIfDispose(),e.then((e=>{this.privList.add(e)}),(()=>{}))}dequeue(){this.throwIfDispose();const e=new $;return this.privSubscribers&&(this.privSubscribers.add({deferral:e,type:X.Dequeue}),this.drain()),e.promise}peek(){this.throwIfDispose();const e=new $;return this.privSubscribers&&(this.privSubscribers.add({deferral:e,type:X.Peek}),this.drain()),e.promise}length(){return this.throwIfDispose(),this.privList.length()}isDisposed(){return null==this.privSubscribers}drainAndDispose(e,t){return Q(this,void 0,void 0,(function*(){if(!this.isDisposed()&&!this.privIsDisposing){this.privDisposeReason=t,this.privIsDisposing=!0;const i=this.privSubscribers;if(i){for(;i.length()>0;){i.removeFirst().deferral.resolve(void 0)}this.privSubscribers===i&&(this.privSubscribers=i)}for(const e of this.privDetachables)yield e.detach();if(this.privPromiseStore.length()>0&&e){const t=[];return this.privPromiseStore.toArray().forEach((e=>{t.push(e)})),Promise.all(t).finally((()=>{this.privSubscribers=null,this.privList.forEach((t=>{e(t)})),this.privList=null})).then()}this.privSubscribers=null,this.privList=null}}))}dispose(e){return Q(this,void 0,void 0,(function*(){yield this.drainAndDispose(null,e)}))}drain(){if(!this.privIsDrainInProgress&&!this.privIsDisposing){this.privIsDrainInProgress=!0;const e=this.privSubscribers,t=this.privList;if(e&&t){for(;t.length()>0&&e.length()>0&&!this.privIsDisposing;){const i=e.removeFirst();if(i.type===X.Peek)i.deferral.resolve(t.first());else{const e=t.removeFirst();i.deferral.resolve(e)}}this.privSubscribers===e&&(this.privSubscribers=e),this.privList===t&&(this.privList=t)}this.privIsDrainInProgress=!1}}throwIfDispose(){if(this.isDisposed()){if(this.privDisposeReason)throw new d(this.privDisposeReason);throw new f("Queue")}if(this.privIsDisposing)throw new d("Queue disposing")}}var Z,ee=function(e,t,i,r){return new(i||(i=Promise))((function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};class te{constructor(e){this.privIsWriteEnded=!1,this.privIsReadEnded=!1,this.privId=e||C(),this.privReaderQueue=new Y}get isClosed(){return this.privIsWriteEnded}get isReadEnded(){return this.privIsReadEnded}get id(){return this.privId}close(){this.privIsWriteEnded||(this.writeStreamChunk({buffer:null,isEnd:!0,timeReceived:Date.now()}),this.privIsWriteEnded=!0)}writeStreamChunk(e){if(this.throwIfClosed(),!this.privReaderQueue.isDisposed())try{this.privReaderQueue.enqueue(e)}catch(e){}}read(){if(this.privIsReadEnded)throw new d("Stream read has already finished");return this.privReaderQueue.dequeue().then((e=>ee(this,void 0,void 0,(function*(){return(void 0===e||e.isEnd)&&(yield this.privReaderQueue.dispose("End of stream reached")),e}))))}readEnded(){this.privIsReadEnded||(this.privIsReadEnded=!0,this.privReaderQueue=new Y)}throwIfClosed(){if(this.privIsWriteEnded)throw new d("Stream closed")}}!function(e){e[e.PCM=1]="PCM",e[e.MuLaw=2]="MuLaw",e[e.Siren=3]="Siren",e[e.MP3=4]="MP3",e[e.SILKSkype=5]="SILKSkype",e[e.OGG_OPUS=6]="OGG_OPUS",e[e.WEBM_OPUS=7]="WEBM_OPUS",e[e.ALaw=8]="ALaw",e[e.FLAC=9]="FLAC",e[e.OPUS=10]="OPUS"}(Z||(Z={}));class ie{static getDefaultInputFormat(){return re.getDefaultInputFormat()}static getWaveFormat(e,t,i,r){return new re(e,t,i,r)}static getWaveFormatPCM(e,t,i){return new re(e,t,i)}}class re extends ie{constructor(e=16e3,t=16,i=1,r=Z.PCM){super();let n=!0;switch(r){case Z.PCM:this.formatTag=1;break;case Z.ALaw:this.formatTag=6;break;case Z.MuLaw:this.formatTag=7;break;default:n=!1}if(this.bitsPerSample=t,this.samplesPerSec=e,this.channels=i,this.avgBytesPerSec=this.samplesPerSec*this.channels*(this.bitsPerSample/8),this.blockAlign=this.channels*Math.max(this.bitsPerSample,8),n){this.privHeader=new ArrayBuffer(44);const e=new DataView(this.privHeader);this.setString(e,0,"RIFF"),e.setUint32(4,0,!0),this.setString(e,8,"WAVEfmt "),e.setUint32(16,16,!0),e.setUint16(20,this.formatTag,!0),e.setUint16(22,this.channels,!0),e.setUint32(24,this.samplesPerSec,!0),e.setUint32(28,this.avgBytesPerSec,!0),e.setUint16(32,this.channels*(this.bitsPerSample/8),!0),e.setUint16(34,this.bitsPerSample,!0),this.setString(e,36,"data"),e.setUint32(40,0,!0)}}static getDefaultInputFormat(){return new re}static getAudioContext(e){const t=window.AudioContext||window.webkitAudioContext||!1;if(t)return void 0!==e&&navigator.mediaDevices.getSupportedConstraints().sampleRate?new t({sampleRate:e}):new t;throw new Error("Browser does not support Web Audio API (AudioContext is not available).")}close(){}get header(){return this.privHeader}setString(e,t,i){for(let r=0;r<i.length;r++)e.setUint8(t+r,i.charCodeAt(r))}}class ne extends re{constructor(e,t,i,r,n,o,s,a,c){super(i,o,t,e),this.formatTag=e,this.avgBytesPerSec=r,this.blockAlign=n,this.priAudioFormatString=s,this.priRequestAudioFormatString=a,this.priHasHeader=c}static fromSpeechSynthesisOutputFormat(e){return void 0===e?ne.getDefaultOutputFormat():ne.fromSpeechSynthesisOutputFormatString(ne.SpeechSynthesisOutputFormatToString[e])}static fromSpeechSynthesisOutputFormatString(e){switch(e){case"raw-8khz-8bit-mono-mulaw":return new ne(Z.MuLaw,1,8e3,8e3,1,8,e,e,!1);case"riff-16khz-16kbps-mono-siren":return new ne(Z.Siren,1,16e3,2e3,40,0,e,"audio-16khz-16kbps-mono-siren",!0);case"audio-16khz-16kbps-mono-siren":return new ne(Z.Siren,1,16e3,2e3,40,0,e,e,!1);case"audio-16khz-32kbitrate-mono-mp3":return new ne(Z.MP3,1,16e3,4096,2,16,e,e,!1);case"audio-16khz-128kbitrate-mono-mp3":return new ne(Z.MP3,1,16e3,16384,2,16,e,e,!1);case"audio-16khz-64kbitrate-mono-mp3":return new ne(Z.MP3,1,16e3,8192,2,16,e,e,!1);case"audio-24khz-48kbitrate-mono-mp3":return new ne(Z.MP3,1,24e3,6144,2,16,e,e,!1);case"audio-24khz-96kbitrate-mono-mp3":return new ne(Z.MP3,1,24e3,12288,2,16,e,e,!1);case"audio-24khz-160kbitrate-mono-mp3":return new ne(Z.MP3,1,24e3,20480,2,16,e,e,!1);case"raw-16khz-16bit-mono-truesilk":return new ne(Z.SILKSkype,1,16e3,32e3,2,16,e,e,!1);case"riff-8khz-16bit-mono-pcm":return new ne(Z.PCM,1,8e3,16e3,2,16,e,"raw-8khz-16bit-mono-pcm",!0);case"riff-24khz-16bit-mono-pcm":return new ne(Z.PCM,1,24e3,48e3,2,16,e,"raw-24khz-16bit-mono-pcm",!0);case"riff-8khz-8bit-mono-mulaw":return new ne(Z.MuLaw,1,8e3,8e3,1,8,e,"raw-8khz-8bit-mono-mulaw",!0);case"raw-16khz-16bit-mono-pcm":return new ne(Z.PCM,1,16e3,32e3,2,16,e,"raw-16khz-16bit-mono-pcm",!1);case"raw-24khz-16bit-mono-pcm":return new ne(Z.PCM,1,24e3,48e3,2,16,e,"raw-24khz-16bit-mono-pcm",!1);case"raw-8khz-16bit-mono-pcm":return new ne(Z.PCM,1,8e3,16e3,2,16,e,"raw-8khz-16bit-mono-pcm",!1);case"ogg-16khz-16bit-mono-opus":return new ne(Z.OGG_OPUS,1,16e3,8192,2,16,e,e,!1);case"ogg-24khz-16bit-mono-opus":return new ne(Z.OGG_OPUS,1,24e3,8192,2,16,e,e,!1);case"raw-48khz-16bit-mono-pcm":return new ne(Z.PCM,1,48e3,96e3,2,16,e,"raw-48khz-16bit-mono-pcm",!1);case"riff-48khz-16bit-mono-pcm":return new ne(Z.PCM,1,48e3,96e3,2,16,e,"raw-48khz-16bit-mono-pcm",!0);case"audio-48khz-96kbitrate-mono-mp3":return new ne(Z.MP3,1,48e3,12288,2,16,e,e,!1);case"audio-48khz-192kbitrate-mono-mp3":return new ne(Z.MP3,1,48e3,24576,2,16,e,e,!1);case"ogg-48khz-16bit-mono-opus":return new ne(Z.OGG_OPUS,1,48e3,12e3,2,16,e,e,!1);case"webm-16khz-16bit-mono-opus":return new ne(Z.WEBM_OPUS,1,16e3,4e3,2,16,e,e,!1);case"webm-24khz-16bit-mono-opus":return new ne(Z.WEBM_OPUS,1,24e3,6e3,2,16,e,e,!1);case"webm-24khz-16bit-24kbps-mono-opus":return new ne(Z.WEBM_OPUS,1,24e3,3e3,2,16,e,e,!1);case"audio-16khz-16bit-32kbps-mono-opus":return new ne(Z.OPUS,1,16e3,4e3,2,16,e,e,!1);case"audio-24khz-16bit-48kbps-mono-opus":return new ne(Z.OPUS,1,24e3,6e3,2,16,e,e,!1);case"audio-24khz-16bit-24kbps-mono-opus":return new ne(Z.OPUS,1,24e3,3e3,2,16,e,e,!1);case"audio-24khz-16bit-mono-flac":return new ne(Z.FLAC,1,24e3,24e3,2,16,e,e,!1);case"audio-48khz-16bit-mono-flac":return new ne(Z.FLAC,1,48e3,3e4,2,16,e,e,!1);case"raw-24khz-16bit-mono-truesilk":return new ne(Z.SILKSkype,1,24e3,48e3,2,16,e,e,!1);case"raw-8khz-8bit-mono-alaw":return new ne(Z.ALaw,1,8e3,8e3,1,8,e,e,!1);case"riff-8khz-8bit-mono-alaw":return new ne(Z.ALaw,1,8e3,8e3,1,8,e,"raw-8khz-8bit-mono-alaw",!0);case"raw-22050hz-16bit-mono-pcm":return new ne(Z.PCM,1,22050,44100,2,16,e,e,!1);case"riff-22050hz-16bit-mono-pcm":return new ne(Z.PCM,1,22050,44100,2,16,e,"raw-22050hz-16bit-mono-pcm",!0);case"raw-44100hz-16bit-mono-pcm":return new ne(Z.PCM,1,44100,88200,2,16,e,e,!1);case"riff-44100hz-16bit-mono-pcm":return new ne(Z.PCM,1,44100,88200,2,16,e,"raw-44100hz-16bit-mono-pcm",!0);default:return new ne(Z.PCM,1,16e3,32e3,2,16,"riff-16khz-16bit-mono-pcm","raw-16khz-16bit-mono-pcm",!0)}}static getDefaultOutputFormat(){return ne.fromSpeechSynthesisOutputFormatString("undefined"!=typeof window?"audio-24khz-48kbitrate-mono-mp3":"riff-16khz-16bit-mono-pcm")}get hasHeader(){return this.priHasHeader}get header(){if(this.hasHeader)return this.privHeader}updateHeader(e){if(this.priHasHeader){const t=new DataView(this.privHeader);t.setUint32(4,e+this.privHeader.byteLength-8,!0),t.setUint32(40,e,!0)}}get requestAudioFormatString(){return this.priRequestAudioFormatString}}ne.SpeechSynthesisOutputFormatToString={[c.Raw8Khz8BitMonoMULaw]:"raw-8khz-8bit-mono-mulaw",[c.Riff16Khz16KbpsMonoSiren]:"riff-16khz-16kbps-mono-siren",[c.Audio16Khz16KbpsMonoSiren]:"audio-16khz-16kbps-mono-siren",[c.Audio16Khz32KBitRateMonoMp3]:"audio-16khz-32kbitrate-mono-mp3",[c.Audio16Khz128KBitRateMonoMp3]:"audio-16khz-128kbitrate-mono-mp3",[c.Audio16Khz64KBitRateMonoMp3]:"audio-16khz-64kbitrate-mono-mp3",[c.Audio24Khz48KBitRateMonoMp3]:"audio-24khz-48kbitrate-mono-mp3",[c.Audio24Khz96KBitRateMonoMp3]:"audio-24khz-96kbitrate-mono-mp3",[c.Audio24Khz160KBitRateMonoMp3]:"audio-24khz-160kbitrate-mono-mp3",[c.Raw16Khz16BitMonoTrueSilk]:"raw-16khz-16bit-mono-truesilk",[c.Riff16Khz16BitMonoPcm]:"riff-16khz-16bit-mono-pcm",[c.Riff8Khz16BitMonoPcm]:"riff-8khz-16bit-mono-pcm",[c.Riff24Khz16BitMonoPcm]:"riff-24khz-16bit-mono-pcm",[c.Riff8Khz8BitMonoMULaw]:"riff-8khz-8bit-mono-mulaw",[c.Raw16Khz16BitMonoPcm]:"raw-16khz-16bit-mono-pcm",[c.Raw24Khz16BitMonoPcm]:"raw-24khz-16bit-mono-pcm",[c.Raw8Khz16BitMonoPcm]:"raw-8khz-16bit-mono-pcm",[c.Ogg16Khz16BitMonoOpus]:"ogg-16khz-16bit-mono-opus",[c.Ogg24Khz16BitMonoOpus]:"ogg-24khz-16bit-mono-opus",[c.Raw48Khz16BitMonoPcm]:"raw-48khz-16bit-mono-pcm",[c.Riff48Khz16BitMonoPcm]:"riff-48khz-16bit-mono-pcm",[c.Audio48Khz96KBitRateMonoMp3]:"audio-48khz-96kbitrate-mono-mp3",[c.Audio48Khz192KBitRateMonoMp3]:"audio-48khz-192kbitrate-mono-mp3",[c.Ogg48Khz16BitMonoOpus]:"ogg-48khz-16bit-mono-opus",[c.Webm16Khz16BitMonoOpus]:"webm-16khz-16bit-mono-opus",[c.Webm24Khz16BitMonoOpus]:"webm-24khz-16bit-mono-opus",[c.Webm24Khz16Bit24KbpsMonoOpus]:"webm-24khz-16bit-24kbps-mono-opus",[c.Raw24Khz16BitMonoTrueSilk]:"raw-24khz-16bit-mono-truesilk",[c.Raw8Khz8BitMonoALaw]:"raw-8khz-8bit-mono-alaw",[c.Riff8Khz8BitMonoALaw]:"riff-8khz-8bit-mono-alaw",[c.Audio16Khz16Bit32KbpsMonoOpus]:"audio-16khz-16bit-32kbps-mono-opus",[c.Audio24Khz16Bit48KbpsMonoOpus]:"audio-24khz-16bit-48kbps-mono-opus",[c.Audio24Khz16Bit24KbpsMonoOpus]:"audio-24khz-16bit-24kbps-mono-opus",[c.Raw22050Hz16BitMonoPcm]:"raw-22050hz-16bit-mono-pcm",[c.Riff22050Hz16BitMonoPcm]:"riff-22050hz-16bit-mono-pcm",[c.Raw44100Hz16BitMonoPcm]:"raw-44100hz-16bit-mono-pcm",[c.Riff44100Hz16BitMonoPcm]:"riff-44100hz-16bit-mono-pcm"};var oe,se=function(e,t,i,r){return new(i||(i=Promise))((function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};class ae{constructor(){}static createPullStream(){return ce.create()}}class ce extends ae{static create(){return new ue}}class ue extends ce{constructor(){super(),this.privId=C(),this.privStream=new te}set format(e){null==e&&(this.privFormat=ne.getDefaultOutputFormat()),this.privFormat=e}get format(){return this.privFormat}get isClosed(){return this.privStream.isClosed}id(){return this.privId}read(e){return se(this,void 0,void 0,(function*(){const t=new Int8Array(e);let i=0;if(void 0!==this.privLastChunkView){if(this.privLastChunkView.length>e.byteLength)return t.set(this.privLastChunkView.slice(0,e.byteLength)),this.privLastChunkView=this.privLastChunkView.slice(e.byteLength),Promise.resolve(e.byteLength);t.set(this.privLastChunkView),i=this.privLastChunkView.length,this.privLastChunkView=void 0}for(;i<e.byteLength&&!this.privStream.isReadEnded;){const r=yield this.privStream.read();if(void 0===r||r.isEnd)this.privStream.readEnded();else{let n;r.buffer.byteLength>e.byteLength-i?(n=r.buffer.slice(0,e.byteLength-i),this.privLastChunkView=new Int8Array(r.buffer.slice(e.byteLength-i))):n=r.buffer,t.set(new Int8Array(n),i),i+=n.byteLength}}return i}))}write(e){n.throwIfNullOrUndefined(this.privStream,"must set format before writing"),this.privStream.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}}class pe extends ae{constructor(){super()}static create(e){return new he(e)}}class he extends pe{constructor(e){super(),this.privId=C(),this.privCallback=e}set format(e){}write(e){this.privCallback.write&&this.privCallback.write(e)}close(){this.privCallback.close&&this.privCallback.close()}id(){return this.privId}}!function(e){e.WordBoundary="WordBoundary",e.Bookmark="Bookmark",e.Viseme="Viseme",e.SentenceBoundary="SentenceBoundary",e.SessionEnd="SessionEnd"}(oe||(oe={}));class le{constructor(e){this.privSynthesisAudioMetadata=JSON.parse(e)}static fromJSON(e){return new le(e)}get Metadata(){return this.privSynthesisAudioMetadata.Metadata}}class de extends D{constructor(e,t,i=T.Info){super(e,i),this.privRequestId=t}get requestId(){return this.privRequestId}}class fe extends de{constructor(e,t,i){super("SynthesisTriggeredEvent",e),this.privSessionAudioDestinationId=t,this.privTurnAudioDestinationId=i}get audioSessionDestinationId(){return this.privSessionAudioDestinationId}get audioTurnDestinationId(){return this.privTurnAudioDestinationId}}class ve extends de{constructor(e,t){super("ConnectingToSynthesisServiceEvent",e),this.privAuthFetchEventId=t}get authFetchEventId(){return this.privAuthFetchEventId}}class me extends de{constructor(e,t){super("SynthesisStartedEvent",e),this.privAuthFetchEventId=t}get authFetchEventId(){return this.privAuthFetchEventId}}var ge=function(e,t,i,r){return new(i||(i=Promise))((function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};class ye{constructor(){this.privIsDisposed=!1,this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!1,this.privBytesReceived=0,this.privInTurn=!1,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privRequestId=C(),this.privTurnDeferral=new $,this.privTurnDeferral.resolve()}get requestId(){return this.privRequestId}get streamId(){return this.privStreamId}set streamId(e){this.privStreamId=e}get audioOutputFormat(){return this.privAudioOutputFormat}set audioOutputFormat(e){this.privAudioOutputFormat=e}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSynthesisEnded(){return this.privIsSynthesisEnded}get isSynthesizing(){return this.privIsSynthesizing}get currentTextOffset(){return this.privTextOffset}get currentSentenceOffset(){return this.privSentenceOffset}get bytesReceived(){return this.privBytesReceived}get audioDuration(){return this.privAudioDuration}getAllReceivedAudio(){return ge(this,void 0,void 0,(function*(){return this.privReceivedAudio?Promise.resolve(this.privReceivedAudio):this.privIsSynthesisEnded?(yield this.readAllAudioFromStream(),Promise.resolve(this.privReceivedAudio)):null}))}getAllReceivedAudioWithHeader(){return ge(this,void 0,void 0,(function*(){if(this.privReceivedAudioWithHeader)return this.privReceivedAudioWithHeader;if(!this.privIsSynthesisEnded)return null;if(this.audioOutputFormat.hasHeader){const e=yield this.getAllReceivedAudio();return this.privReceivedAudioWithHeader=Ae.addHeader(e,this.audioOutputFormat),this.privReceivedAudioWithHeader}return this.getAllReceivedAudio()}))}startNewSynthesis(e,t,i,r){this.privIsSynthesisEnded=!1,this.privIsSynthesizing=!0,this.privRequestId=e,this.privRawText=t,this.privIsSSML=i,this.privAudioOutputStream=new ue,this.privAudioOutputStream.format=this.privAudioOutputFormat,this.privReceivedAudio=null,this.privReceivedAudioWithHeader=null,this.privBytesReceived=0,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privPartialVisemeAnimation="",void 0!==r&&(this.privTurnAudioDestination=r,this.privTurnAudioDestination.format=this.privAudioOutputFormat),this.onEvent(new fe(this.requestId,void 0,void 0===r?void 0:r.id()))}onPreConnectionStart(e){this.privAuthFetchEventId=e,this.onEvent(new ve(this.privRequestId,this.privAuthFetchEventId))}onAuthCompleted(e){e&&this.onComplete()}onConnectionEstablishCompleted(e){if(200===e)return this.onEvent(new me(this.requestId,this.privAuthFetchEventId)),void(this.privBytesReceived=0);403===e&&this.onComplete()}onServiceResponseMessage(e){const t=JSON.parse(e);this.streamId=t.audio.streamId}onServiceTurnEndResponse(){this.privInTurn=!1,this.privTurnDeferral.resolve(),this.onComplete()}onServiceTurnStartResponse(){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch((()=>{}))),this.privInTurn=!0,this.privTurnDeferral=new $}onAudioChunkReceived(e){this.isSynthesizing&&(this.privAudioOutputStream.write(e),this.privBytesReceived+=e.byteLength,void 0!==this.privTurnAudioDestination&&this.privTurnAudioDestination.write(e))}onTextBoundaryEvent(e){this.updateTextOffset(e.Data.text.Text,e.Type)}onVisemeMetadataReceived(e){void 0!==e.Data.AnimationChunk&&(this.privPartialVisemeAnimation+=e.Data.AnimationChunk)}onSessionEnd(e){this.privAudioDuration=e.Data.Offset}dispose(){this.privIsDisposed||(this.privIsDisposed=!0)}onStopSynthesizing(){this.onComplete()}getAndClearVisemeAnimation(){const e=this.privPartialVisemeAnimation;return this.privPartialVisemeAnimation="",e}onEvent(e){G.instance.onEvent(e)}static isXmlTag(e){return e.length>=2&&"<"===e[0]&&">"===e[e.length-1]}updateTextOffset(e,t){t===oe.WordBoundary?(this.privTextOffset=this.privRawText.indexOf(e,this.privNextSearchTextIndex),this.privTextOffset>=0&&(this.privNextSearchTextIndex=this.privTextOffset+e.length,this.privIsSSML&&this.withinXmlTag(this.privTextOffset)&&!ye.isXmlTag(e)&&this.updateTextOffset(e,t))):(this.privSentenceOffset=this.privRawText.indexOf(e,this.privNextSearchSentenceIndex),this.privSentenceOffset>=0&&(this.privNextSearchSentenceIndex=this.privSentenceOffset+e.length,this.privIsSSML&&this.withinXmlTag(this.privSentenceOffset)&&!ye.isXmlTag(e)&&this.updateTextOffset(e,t)))}onComplete(){this.privIsSynthesizing&&(this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!0,this.privAudioOutputStream.close(),this.privInTurn=!1,void 0!==this.privTurnAudioDestination&&(this.privTurnAudioDestination.close(),this.privTurnAudioDestination=void 0))}readAllAudioFromStream(){return ge(this,void 0,void 0,(function*(){if(this.privIsSynthesisEnded){this.privReceivedAudio=new ArrayBuffer(this.bytesReceived);try{yield this.privAudioOutputStream.read(this.privReceivedAudio)}catch(e){this.privReceivedAudio=new ArrayBuffer(0)}}}))}withinXmlTag(e){return this.privRawText.indexOf("<",e+1)>this.privRawText.indexOf(">",e+1)}}class Se{constructor(e){this.privContext={},this.privSpeechSynthesizer=e}setSection(e,t){this.privContext[e]=t}set audioOutputFormat(e){this.privAudioOutputFormat=e}toJSON(){const e=this.buildSynthesisContext();return this.setSection("synthesis",e),JSON.stringify(this.privContext)}buildSynthesisContext(){return{audio:{metadataOptions:{bookmarkEnabled:!!this.privSpeechSynthesizer.bookmarkReached,punctuationBoundaryEnabled:this.privSpeechSynthesizer.properties.getProperty(o.SpeechServiceResponse_RequestPunctuationBoundary,!!this.privSpeechSynthesizer.wordBoundary),sentenceBoundaryEnabled:this.privSpeechSynthesizer.properties.getProperty(o.SpeechServiceResponse_RequestSentenceBoundary,!1),sessionEndEnabled:!0,visemeEnabled:!!this.privSpeechSynthesizer.visemeReceived,wordBoundaryEnabled:this.privSpeechSynthesizer.properties.getProperty(o.SpeechServiceResponse_RequestWordBoundary,!!this.privSpeechSynthesizer.wordBoundary)},outputFormat:this.privAudioOutputFormat.requestAudioFormatString},language:{autoDetection:this.privSpeechSynthesizer.autoDetectSourceLanguage}}}}class we{toJsonString(){return JSON.stringify(this.iPrivConfig)}get(){return this.iPrivConfig}set(e){this.iPrivConfig=e}}class be{}be.AuthKey="Ocp-Apim-Subscription-Key",be.Authorization="Authorization",be.SpIDAuthKey="Apim-Subscription-Id",be.ConnectionId="X-ConnectionId",be.ContentType="Content-Type",be.CustomCommandsAppId="X-CommandsAppId",be.Path="Path",be.RequestId="X-RequestId",be.RequestStreamId="X-StreamId",be.RequestTimestamp="X-Timestamp";class Ce extends M{constructor(e,t,i,r,n,o,s,a){if(!t)throw new l("path");if(!i)throw new l("requestId");const c={};if(c[be.Path]=t,c[be.RequestId]=i,c[be.RequestTimestamp]=(new Date).toISOString(),r&&(c[be.ContentType]=r),o&&(c[be.RequestStreamId]=o),s)for(const e in s)e&&(c[e]=s[e]);a?super(e,n,c,a):super(e,n,c),this.privPath=t,this.privRequestId=i,this.privContentType=r,this.privStreamId=o,this.privAdditionalHeaders=s}get path(){return this.privPath}get requestId(){return this.privRequestId}get contentType(){return this.privContentType}get streamId(){return this.privStreamId}get additionalHeaders(){return this.privAdditionalHeaders}static fromConnectionMessage(e){let t=null,i=null,r=null,n=null;const o={};if(e.headers)for(const s in e.headers)s&&(s.toLowerCase()===be.Path.toLowerCase()?t=e.headers[s]:s.toLowerCase()===be.RequestId.toLowerCase()?i=e.headers[s]:s.toLowerCase()===be.ContentType.toLowerCase()?r=e.headers[s]:s.toLowerCase()===be.RequestStreamId.toLowerCase()?n=e.headers[s]:o[s]=e.headers[s]);return new Ce(e.messageType,t,i,r,e.body,n,o,e.id)}}var xe=function(e,t,i,r){return new(i||(i=Promise))((function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};class Ae{constructor(e,t,i,r,n){if(this.speakOverride=void 0,this.receiveMessageOverride=void 0,this.connectImplOverride=void 0,this.configConnectionOverride=void 0,this.privConnectionConfigurationPromise=void 0,!e)throw new l("authentication");if(!t)throw new l("connectionFactory");if(!i)throw new l("synthesizerConfig");this.privAuthentication=e,this.privConnectionFactory=t,this.privSynthesizerConfig=i,this.privIsDisposed=!1,this.privSpeechSynthesizer=r,this.privSessionAudioDestination=n,this.privSynthesisTurn=new ye,this.privConnectionEvents=new x,this.privServiceEvents=new x,this.privSynthesisContext=new Se(this.privSpeechSynthesizer),this.privAgentConfig=new we,this.connectionEvents.attach((e=>{if("ConnectionClosedEvent"===e.name){const t=e;1e3!==t.statusCode&&this.cancelSynthesisLocal(I.Error,1007===t.statusCode?E.BadRequestParameters:E.ConnectionFailure,`${t.reason} websocket error code: ${t.statusCode}`)}}))}get synthesisContext(){return this.privSynthesisContext}get agentConfig(){return this.privAgentConfig}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}set activityTemplate(e){this.privActivityTemplate=e}get activityTemplate(){return this.privActivityTemplate}set audioOutputFormat(e){this.privAudioOutputFormat=e,this.privSynthesisTurn.audioOutputFormat=e,void 0!==this.privSessionAudioDestination&&(this.privSessionAudioDestination.format=e),void 0!==this.synthesisContext&&(this.synthesisContext.audioOutputFormat=e)}static addHeader(e,t){if(!t.hasHeader)return e;t.updateHeader(e.byteLength);const i=new Uint8Array(e.byteLength+t.header.byteLength);return i.set(new Uint8Array(t.header),0),i.set(new Uint8Array(e),t.header.byteLength),i.buffer}isDisposed(){return this.privIsDisposed}dispose(e){return xe(this,void 0,void 0,(function*(){if(this.privIsDisposed=!0,void 0!==this.privSessionAudioDestination&&this.privSessionAudioDestination.close(),void 0!==this.privConnectionConfigurationPromise){const t=yield this.privConnectionConfigurationPromise;yield t.dispose(e)}}))}connect(){return xe(this,void 0,void 0,(function*(){yield this.connectImpl()}))}sendNetworkMessage(e,t){return xe(this,void 0,void 0,(function*(){const i="string"==typeof t?A.Text:A.Binary,r="string"==typeof t?"application/json":"";return(yield this.fetchConnection()).send(new Ce(i,e,this.privSynthesisTurn.requestId,r,t))}))}Speak(e,t,i,r,n,o){return xe(this,void 0,void 0,(function*(){let s;if(s=t?e:this.privSpeechSynthesizer.buildSsml(e),void 0!==this.speakOverride)return this.speakOverride(s,i,r,n);this.privSuccessCallback=r,this.privErrorCallback=n,this.privSynthesisTurn.startNewSynthesis(i,e,t,o);try{yield this.connectImpl();const e=yield this.fetchConnection();yield this.sendSynthesisContext(e),yield this.sendSsmlMessage(e,s,i);const t=new j(new q(i,k.SynthesizingAudioStarted));this.privSpeechSynthesizer.synthesisStarted&&this.privSpeechSynthesizer.synthesisStarted(this.privSpeechSynthesizer,t),this.receiveMessage()}catch(e){return this.cancelSynthesisLocal(I.Error,E.ConnectionFailure,e),Promise.reject(e)}}))}cancelSynthesis(e,t,i,r){const n=new u;n.setProperty("CancellationErrorCode",E[i]);const o=new q(e,k.Canceled,void 0,r,n);if(this.privSpeechSynthesizer.SynthesisCanceled){const e=new j(o);try{this.privSpeechSynthesizer.SynthesisCanceled(this.privSpeechSynthesizer,e)}catch(e){}}if(this.privSuccessCallback)try{this.privSuccessCallback(o)}catch(e){}}cancelSynthesisLocal(e,t,i){this.privSynthesisTurn.isSynthesizing&&(this.privSynthesisTurn.onStopSynthesizing(),this.cancelSynthesis(this.privSynthesisTurn.requestId,e,t,i))}processTypeSpecificMessages(e){return!0}receiveMessage(){return xe(this,void 0,void 0,(function*(){try{const e=yield this.fetchConnection(),t=yield e.read();if(void 0!==this.receiveMessageOverride)return this.receiveMessageOverride();if(this.privIsDisposed)return;if(!t)return this.privSynthesisTurn.isSynthesizing?this.receiveMessage():void 0;const i=Ce.fromConnectionMessage(t);if(i.requestId.toLowerCase()===this.privSynthesisTurn.requestId.toLowerCase())switch(i.path.toLowerCase()){case"turn.start":this.privSynthesisTurn.onServiceTurnStartResponse();break;case"response":this.privSynthesisTurn.onServiceResponseMessage(i.textBody);break;case"audio":if(this.privSynthesisTurn.streamId.toLowerCase()===i.streamId.toLowerCase()&&i.binaryBody){if(this.privSynthesisTurn.onAudioChunkReceived(i.binaryBody),this.privSpeechSynthesizer.synthesizing)try{const e=Ae.addHeader(i.binaryBody,this.privSynthesisTurn.audioOutputFormat),t=new j(new q(this.privSynthesisTurn.requestId,k.SynthesizingAudio,e));this.privSpeechSynthesizer.synthesizing(this.privSpeechSynthesizer,t)}catch(e){}void 0!==this.privSessionAudioDestination&&this.privSessionAudioDestination.write(i.binaryBody)}break;case"audio.metadata":const e=le.fromJSON(i.textBody).Metadata;for(const t of e)switch(t.Type){case oe.WordBoundary:case oe.SentenceBoundary:this.privSynthesisTurn.onTextBoundaryEvent(t);const e=new U(t.Data.Offset,t.Data.Duration,t.Data.text.Text,t.Data.text.Length,t.Type===oe.WordBoundary?this.privSynthesisTurn.currentTextOffset:this.privSynthesisTurn.currentSentenceOffset,t.Data.text.BoundaryType);if(this.privSpeechSynthesizer.wordBoundary)try{this.privSpeechSynthesizer.wordBoundary(this.privSpeechSynthesizer,e)}catch(e){}break;case oe.Bookmark:const i=new W(t.Data.Offset,t.Data.Bookmark);if(this.privSpeechSynthesizer.bookmarkReached)try{this.privSpeechSynthesizer.bookmarkReached(this.privSpeechSynthesizer,i)}catch(e){}break;case oe.Viseme:if(this.privSynthesisTurn.onVisemeMetadataReceived(t),t.Data.IsLastAnimation){const e=new V(t.Data.Offset,t.Data.VisemeId,this.privSynthesisTurn.getAndClearVisemeAnimation());if(this.privSpeechSynthesizer.visemeReceived)try{this.privSpeechSynthesizer.visemeReceived(this.privSpeechSynthesizer,e)}catch(e){}}break;case oe.SessionEnd:this.privSynthesisTurn.onSessionEnd(t)}break;case"turn.end":let t;this.privSynthesisTurn.onServiceTurnEndResponse();try{const e=yield this.privSynthesisTurn.getAllReceivedAudioWithHeader();t=new q(this.privSynthesisTurn.requestId,k.SynthesizingAudioCompleted,e,void 0,void 0,this.privSynthesisTurn.audioDuration),this.privSuccessCallback&&this.privSuccessCallback(t)}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}if(this.privSpeechSynthesizer.synthesisCompleted)try{this.privSpeechSynthesizer.synthesisCompleted(this.privSpeechSynthesizer,new j(t))}catch(e){}break;default:this.processTypeSpecificMessages(i)||this.privServiceEvents&&this.serviceEvents.onEvent(new N(i.path.toLowerCase(),i.textBody))}return this.receiveMessage()}catch(e){}}))}sendSynthesisContext(e){const t=this.synthesisContext.toJSON();if(t)return e.send(new Ce(A.Text,"synthesis.context",this.privSynthesisTurn.requestId,"application/json",t))}connectImpl(e=!1){if(null!=this.privConnectionPromise)return this.privConnectionPromise.then((e=>e.state()===P.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl()):this.privConnectionPromise),(()=>(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl())));this.privAuthFetchEventId=C(),this.privConnectionId=C(),this.privSynthesisTurn.onPreConnectionStart(this.privAuthFetchEventId);const t=e?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId);return this.privConnectionPromise=t.then((t=>xe(this,void 0,void 0,(function*(){this.privSynthesisTurn.onAuthCompleted(!1);const i=this.privConnectionFactory.create(this.privSynthesizerConfig,t,this.privConnectionId);i.events.attach((e=>{this.connectionEvents.onEvent(e)}));const r=yield i.open();return 200===r.statusCode?(this.privSynthesisTurn.onConnectionEstablishCompleted(r.statusCode),Promise.resolve(i)):403!==r.statusCode||e?(this.privSynthesisTurn.onConnectionEstablishCompleted(r.statusCode),Promise.reject(`Unable to contact server. StatusCode: ${r.statusCode}, ${this.privSynthesizerConfig.parameters.getProperty(o.SpeechServiceConnection_Endpoint)} Reason: ${r.reason}`)):this.connectImpl(!0)}))),(e=>{throw this.privSynthesisTurn.onAuthCompleted(!0),new Error(e)})),this.privConnectionPromise.catch((()=>{})),this.privConnectionPromise}sendSpeechServiceConfig(e,t){if(t)return e.send(new Ce(A.Text,"speech.config",this.privSynthesisTurn.requestId,"application/json",t))}sendSsmlMessage(e,t,i){return e.send(new Ce(A.Text,"ssml",i,"application/ssml+xml",t))}fetchConnection(){return xe(this,void 0,void 0,(function*(){return void 0!==this.privConnectionConfigurationPromise?this.privConnectionConfigurationPromise.then((e=>e.state()===P.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection()):this.privConnectionConfigurationPromise),(()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection()))):(this.privConnectionConfigurationPromise=this.configureConnection(),yield this.privConnectionConfigurationPromise)}))}configureConnection(){return xe(this,void 0,void 0,(function*(){const e=yield this.connectImpl();return void 0!==this.configConnectionOverride?this.configConnectionOverride(e):(yield this.sendSpeechServiceConfig(e,this.privSynthesizerConfig.SpeechServiceConfig.serialize()),e)}))}}Ae.telemetryDataEnabled=!0;class Te extends D{constructor(e){super("BackgroundEvent",T.Error),this.privError=e}get error(){return this.privError}}var Pe=function(e,t,i,r){return new(i||(i=Promise))((function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const Ie={[Z.PCM]:"audio/wav",[Z.MuLaw]:"audio/x-wav",[Z.MP3]:"audio/mpeg",[Z.OGG_OPUS]:"audio/ogg",[Z.WEBM_OPUS]:"audio/webm; codecs=opus",[Z.ALaw]:"audio/x-wav",[Z.FLAC]:"audio/flac"};class Ee{constructor(e){this.privPlaybackStarted=!1,this.privAppendingToBuffer=!1,this.privMediaSourceOpened=!1,this.privBytesReceived=0,this.privId=e||C(),this.privIsPaused=!1,this.privIsClosed=!1}id(){return this.privId}write(e,t,i){void 0!==this.privAudioBuffer?(this.privAudioBuffer.push(e),this.updateSourceBuffer().then((()=>{t&&t()}),(e=>{i&&i(e)}))):void 0!==this.privAudioOutputStream&&(this.privAudioOutputStream.write(e),this.privBytesReceived+=e.byteLength)}close(e,t){if(this.privIsClosed=!0,void 0!==this.privSourceBuffer)this.handleSourceBufferUpdateEnd().then((()=>{e&&e()}),(e=>{t&&t(e)}));else if(void 0!==this.privAudioOutputStream&&"undefined"!=typeof window)if(this.privFormat.formatTag!==Z.PCM&&this.privFormat.formatTag!==Z.MuLaw&&this.privFormat.formatTag!==Z.ALaw||!1!==this.privFormat.hasHeader){let i=new ArrayBuffer(this.privBytesReceived);this.privAudioOutputStream.read(i).then((()=>{i=Ae.addHeader(i,this.privFormat);const r=new Blob([i],{type:Ie[this.privFormat.formatTag]});this.privAudio.src=window.URL.createObjectURL(r),this.notifyPlayback().then((()=>{e&&e()}),(e=>{t&&t(e)}))}),(e=>{t&&t(e)}))}else console.warn("Play back is not supported for raw PCM, mulaw or alaw format without header."),this.onAudioEnd&&this.onAudioEnd(this);else this.onAudioEnd&&this.onAudioEnd(this)}set format(e){if("undefined"!=typeof AudioContext||"undefined"!=typeof window&&void 0!==window.webkitAudioContext){this.privFormat=e;const t=Ie[this.privFormat.formatTag];void 0===t?console.warn(`Unknown mimeType for format ${Z[this.privFormat.formatTag]}; playback is not supported.`):"undefined"!=typeof MediaSource&&MediaSource.isTypeSupported(t)?(this.privAudio=new Audio,this.privAudioBuffer=[],this.privMediaSource=new MediaSource,this.privAudio.src=URL.createObjectURL(this.privMediaSource),this.privAudio.load(),this.privMediaSource.onsourceopen=()=>{this.privMediaSourceOpened=!0,this.privMediaSource.duration=1800,this.privSourceBuffer=this.privMediaSource.addSourceBuffer(t),this.privSourceBuffer.onupdate=()=>{this.updateSourceBuffer().catch((e=>{G.instance.onEvent(new Te(e))}))},this.privSourceBuffer.onupdateend=()=>{this.handleSourceBufferUpdateEnd().catch((e=>{G.instance.onEvent(new Te(e))}))},this.privSourceBuffer.onupdatestart=()=>{this.privAppendingToBuffer=!1}},this.updateSourceBuffer().catch((e=>{G.instance.onEvent(new Te(e))}))):(console.warn(`Format ${Z[this.privFormat.formatTag]} could not be played by MSE, streaming playback is not enabled.`),this.privAudioOutputStream=new ue,this.privAudioOutputStream.format=this.privFormat,this.privAudio=new Audio)}}get volume(){var e,t;return null!==(t=null===(e=this.privAudio)||void 0===e?void 0:e.volume)&&void 0!==t?t:-1}set volume(e){this.privAudio&&(this.privAudio.volume=e)}mute(){this.privAudio&&(this.privAudio.muted=!0)}unmute(){this.privAudio&&(this.privAudio.muted=!1)}get isClosed(){return this.privIsClosed}get currentTime(){return void 0!==this.privAudio?this.privAudio.currentTime:-1}pause(){this.privIsPaused||void 0===this.privAudio||(this.privAudio.pause(),this.privIsPaused=!0)}resume(e,t){this.privIsPaused&&void 0!==this.privAudio&&(this.privAudio.play().then((()=>{e&&e()}),(e=>{t&&t(e)})),this.privIsPaused=!1)}get internalAudio(){return this.privAudio}updateSourceBuffer(){return Pe(this,void 0,void 0,(function*(){if(void 0!==this.privAudioBuffer&&this.privAudioBuffer.length>0&&this.sourceBufferAvailable()){this.privAppendingToBuffer=!0;const e=this.privAudioBuffer.shift();try{this.privSourceBuffer.appendBuffer(e)}catch(t){return this.privAudioBuffer.unshift(e),void console.log("buffer filled, pausing addition of binaries until space is made")}yield this.notifyPlayback()}else this.canEndStream()&&(yield this.handleSourceBufferUpdateEnd())}))}handleSourceBufferUpdateEnd(){return Pe(this,void 0,void 0,(function*(){this.canEndStream()&&this.sourceBufferAvailable()&&(this.privMediaSource.endOfStream(),yield this.notifyPlayback())}))}notifyPlayback(){return Pe(this,void 0,void 0,(function*(){this.privPlaybackStarted||void 0===this.privAudio||(this.privPlaybackStarted=!0,this.onAudioStart&&this.onAudioStart(this),this.privAudio.onended=()=>{this.onAudioEnd&&this.onAudioEnd(this)},this.privIsPaused||(yield this.privAudio.play()))}))}canEndStream(){return this.isClosed&&void 0!==this.privSourceBuffer&&0===this.privAudioBuffer.length&&this.privMediaSourceOpened&&!this.privAppendingToBuffer&&"open"===this.privMediaSource.readyState}sourceBufferAvailable(){return void 0!==this.privSourceBuffer&&!this.privSourceBuffer.updating}}class ke{constructor(e,t){this.privActualSampleRate=e,this.privDesiredSampleRate=t}encode(e){const t=this.downSampleAudioFrame(e,this.privActualSampleRate,this.privDesiredSampleRate);if(!t)return null;const i=2*t.length,r=new ArrayBuffer(i),n=new DataView(r);return this.floatTo16BitPCM(n,0,t),r}setString(e,t,i){for(let r=0;r<i.length;r++)e.setUint8(t+r,i.charCodeAt(r))}floatTo16BitPCM(e,t,i){for(let r=0;r<i.length;r++,t+=2){const n=Math.max(-1,Math.min(1,i[r]));e.setInt16(t,n<0?32768*n:32767*n,!0)}}downSampleAudioFrame(e,t,i){if(!e)return null;if(i===t||i>t)return e;const r=t/i,n=Math.round(e.length/r),o=new Float32Array(n);let s=0,a=0;for(;a<n;){const t=Math.round((a+1)*r);let i=0,n=0;for(;s<t&&s<e.length;)i+=e[s++],n++;o[a++]=i/n}return o}}class Re{constructor(e){this.privStopInputOnRelease=e}record(e,t,i){const r=new ke(e.sampleRate,16e3),n=e.createMediaStreamSource(t),o=()=>{const o=(()=>{let t=0;try{return e.createScriptProcessor(t,1,1)}catch(i){t=2048;let r=e.sampleRate;for(;t<16384&&r>=32e3;)t<<=1,r>>=1;return e.createScriptProcessor(t,1,1)}})();o.onaudioprocess=e=>{const t=e.inputBuffer.getChannelData(0);if(i&&!i.isClosed){const e=r.encode(t);e&&i.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()})}},n.connect(o),o.connect(e.destination),this.privMediaResources={scriptProcessorNode:o,source:n,stream:t}};if(e.audioWorklet){if(!this.privSpeechProcessorScript){const e=new Blob(["class SP extends AudioWorkletProcessor {\n                    constructor(options) {\n                      super(options);\n                    }\n                    process(inputs, outputs) {\n                      const input = inputs[0];\n                      const output = [];\n                      for (let channel = 0; channel < input.length; channel += 1) {\n                        output[channel] = input[channel];\n                      }\n                      this.port.postMessage(output[0]);\n                      return true;\n                    }\n                  }\n                  registerProcessor('speech-processor', SP);"],{type:"application/javascript; charset=utf-8"});this.privSpeechProcessorScript=URL.createObjectURL(e)}e.audioWorklet.addModule(this.privSpeechProcessorScript).then((()=>{const o=new AudioWorkletNode(e,"speech-processor");o.port.onmessage=e=>{const t=e.data;if(i&&!i.isClosed){const e=r.encode(t);e&&i.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()})}},n.connect(o),o.connect(e.destination),this.privMediaResources={scriptProcessorNode:o,source:n,stream:t}})).catch((()=>{o()}))}else try{o()}catch(e){throw new Error(`Unable to start audio worklet node for PCMRecorder: ${e}`)}}releaseMediaResources(e){this.privMediaResources&&(this.privMediaResources.scriptProcessorNode&&(this.privMediaResources.scriptProcessorNode.disconnect(e.destination),this.privMediaResources.scriptProcessorNode=null),this.privMediaResources.source&&(this.privMediaResources.source.disconnect(),this.privStopInputOnRelease&&this.privMediaResources.stream.getTracks().forEach((e=>e.stop())),this.privMediaResources.source=null))}setWorkletUrl(e){this.privSpeechProcessorScript=e}}var Me,De,Ne,Oe;!function(e){e[e.Interactive=0]="Interactive",e[e.Conversation=1]="Conversation",e[e.Dictation=2]="Dictation"}(Me||(Me={})),function(e){e[e.Simple=0]="Simple",e[e.Detailed=1]="Detailed"}(De||(De={}));class Le{constructor(e){this.context=e}serialize(){return JSON.stringify(this,((e,t)=>{if(t&&"object"==typeof t){const e={};for(const i in t)Object.hasOwnProperty.call(t,i)&&(e[i&&i.charAt(0).toLowerCase()+i.substring(1)]=t[i]);return e}return t}))}get Context(){return this.context}get Recognition(){return this.recognition}set Recognition(e){this.recognition=e.toLowerCase()}}class ze{constructor(e){this.system=new Be,this.os=e}}class Be{constructor(){this.name="SpeechSDK",this.version="1.28.0",this.build="JavaScript",this.lang="JavaScript"}}class _e{constructor(e,t,i){this.platform=e,this.name=t,this.version=i}}!function(e){e.Bluetooth="Bluetooth",e.Wired="Wired",e.WiFi="WiFi",e.Cellular="Cellular",e.InBuilt="InBuilt",e.Unknown="Unknown"}(Ne||(Ne={})),function(e){e.Phone="Phone",e.Speaker="Speaker",e.Car="Car",e.Headset="Headset",e.Thermostat="Thermostat",e.Microphones="Microphones",e.Deskphone="Deskphone",e.RemoteControl="RemoteControl",e.Unknown="Unknown",e.File="File",e.Stream="Stream"}(Oe||(Oe={}));class Fe extends D{constructor(e,t,i=T.Info){super(e,i),this.privAudioSourceId=t}get audioSourceId(){return this.privAudioSourceId}}class He extends Fe{constructor(e){super("AudioSourceInitializingEvent",e)}}class je extends Fe{constructor(e){super("AudioSourceReadyEvent",e)}}class Ke extends Fe{constructor(e){super("AudioSourceOffEvent",e)}}class qe extends Fe{constructor(e,t){super("AudioSourceErrorEvent",e,T.Error),this.privError=t}get error(){return this.privError}}class Ue extends Fe{constructor(e,t,i){super(e,t),this.privAudioNodeId=i}get audioNodeId(){return this.privAudioNodeId}}class We extends Ue{constructor(e,t){super("AudioStreamNodeAttachingEvent",e,t)}}class Ve extends Ue{constructor(e,t){super("AudioStreamNodeAttachedEvent",e,t)}}class $e extends Ue{constructor(e,t){super("AudioStreamNodeDetachedEvent",e,t)}}class Ge extends Ue{constructor(e,t,i){super("AudioStreamNodeErrorEvent",e,t),this.privError=i}get error(){return this.privError}}class Je extends te{constructor(e,t){super(t),this.privTargetChunkSize=e,this.privNextBufferReadyBytes=0}writeStreamChunk(e){if(e.isEnd||0===this.privNextBufferReadyBytes&&e.buffer.byteLength===this.privTargetChunkSize)return void super.writeStreamChunk(e);let t=0;for(;t<e.buffer.byteLength;){void 0===this.privNextBufferToWrite&&(this.privNextBufferToWrite=new ArrayBuffer(this.privTargetChunkSize),this.privNextBufferStartTime=e.timeReceived);const i=Math.min(e.buffer.byteLength-t,this.privTargetChunkSize-this.privNextBufferReadyBytes),r=new Uint8Array(this.privNextBufferToWrite),n=new Uint8Array(e.buffer.slice(t,i+t));r.set(n,this.privNextBufferReadyBytes),this.privNextBufferReadyBytes+=i,t+=i,this.privNextBufferReadyBytes===this.privTargetChunkSize&&(super.writeStreamChunk({buffer:this.privNextBufferToWrite,isEnd:!1,timeReceived:this.privNextBufferStartTime}),this.privNextBufferReadyBytes=0,this.privNextBufferToWrite=void 0)}}close(){0===this.privNextBufferReadyBytes||this.isClosed||super.writeStreamChunk({buffer:this.privNextBufferToWrite.slice(0,this.privNextBufferReadyBytes),isEnd:!1,timeReceived:this.privNextBufferStartTime}),super.close()}}var Xe=function(e,t,i,r){return new(i||(i=Promise))((function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};class Qe{constructor(e,t,i,r){this.privRecorder=e,this.deviceId=t,this.privStreams={},this.privOutputChunkSize=Qe.AUDIOFORMAT.avgBytesPerSec/10,this.privId=i||C(),this.privEvents=new x,this.privMediaStream=r||null,this.privIsClosing=!1}get format(){return Promise.resolve(Qe.AUDIOFORMAT)}turnOn(){if(this.privInitializeDeferral)return this.privInitializeDeferral.promise;this.privInitializeDeferral=new $;try{this.createAudioContext()}catch(e){if(e instanceof Error){const t=e;this.privInitializeDeferral.reject(t.name+": "+t.message)}else this.privInitializeDeferral.reject(e);return this.privInitializeDeferral.promise}const e=window.navigator;let t=e.getUserMedia||e.webkitGetUserMedia||e.mozGetUserMedia||e.msGetUserMedia;if(e.mediaDevices&&(t=(t,i,r)=>{e.mediaDevices.getUserMedia(t).then(i).catch(r)}),t){const e=()=>{this.onEvent(new He(this.privId)),this.privMediaStream&&this.privMediaStream.active?(this.onEvent(new je(this.privId)),this.privInitializeDeferral.resolve()):t({audio:!this.deviceId||{deviceId:this.deviceId},video:!1},(e=>{this.privMediaStream=e,this.onEvent(new je(this.privId)),this.privInitializeDeferral.resolve()}),(e=>{const t=`Error occurred during microphone initialization: ${e}`;this.privInitializeDeferral.reject(t),this.onEvent(new qe(this.privId,t))}))};"suspended"===this.privContext.state?this.privContext.resume().then(e).catch((e=>{this.privInitializeDeferral.reject(`Failed to initialize audio context: ${e}`)})):e()}else{const e="Browser does not support getUserMedia.";this.privInitializeDeferral.reject(e),this.onEvent(new qe(e,""))}return this.privInitializeDeferral.promise}id(){return this.privId}attach(e){return this.onEvent(new We(this.privId,e)),this.listen(e).then((t=>(this.onEvent(new Ve(this.privId,e)),{detach:()=>Xe(this,void 0,void 0,(function*(){return t.readEnded(),delete this.privStreams[e],this.onEvent(new $e(this.privId,e)),this.turnOff()})),id:()=>e,read:()=>t.read()})))}detach(e){e&&this.privStreams[e]&&(this.privStreams[e].close(),delete this.privStreams[e],this.onEvent(new $e(this.privId,e)))}turnOff(){return Xe(this,void 0,void 0,(function*(){for(const e in this.privStreams)if(e){const t=this.privStreams[e];t&&t.close()}this.onEvent(new Ke(this.privId)),this.privInitializeDeferral&&(yield this.privInitializeDeferral,this.privInitializeDeferral=null),yield this.destroyAudioContext()}))}get events(){return this.privEvents}get deviceInfo(){return this.getMicrophoneLabel().then((e=>({bitspersample:Qe.AUDIOFORMAT.bitsPerSample,channelcount:Qe.AUDIOFORMAT.channels,connectivity:Ne.Unknown,manufacturer:"Speech SDK",model:e,samplerate:Qe.AUDIOFORMAT.samplesPerSec,type:Oe.Microphones})))}setProperty(e,t){if("MICROPHONE-WorkletSourceUrl"!==e)throw new Error("Property '"+e+"' is not supported on Microphone.");this.privRecorder.setWorkletUrl(t)}getMicrophoneLabel(){const e="microphone";if(void 0!==this.privMicrophoneLabel)return Promise.resolve(this.privMicrophoneLabel);if(void 0===this.privMediaStream||!this.privMediaStream.active)return Promise.resolve(e);this.privMicrophoneLabel=e;const t=this.privMediaStream.getTracks()[0].getSettings().deviceId;if(void 0===t)return Promise.resolve(this.privMicrophoneLabel);const i=new $;return navigator.mediaDevices.enumerateDevices().then((e=>{for(const i of e)if(i.deviceId===t){this.privMicrophoneLabel=i.label;break}i.resolve(this.privMicrophoneLabel)}),(()=>i.resolve(this.privMicrophoneLabel))),i.promise}listen(e){return Xe(this,void 0,void 0,(function*(){yield this.turnOn();const t=new Je(this.privOutputChunkSize,e);this.privStreams[e]=t;try{this.privRecorder.record(this.privContext,this.privMediaStream,t)}catch(t){throw this.onEvent(new Ge(this.privId,e,t)),t}return t}))}onEvent(e){this.privEvents.onEvent(e),G.instance.onEvent(e)}createAudioContext(){this.privContext||(this.privContext=re.getAudioContext(Qe.AUDIOFORMAT.samplesPerSec))}destroyAudioContext(){return Xe(this,void 0,void 0,(function*(){if(!this.privContext)return;this.privRecorder.releaseMediaResources(this.privContext);let e=!1;"close"in this.privContext&&(e=!0),e?this.privIsClosing||(this.privIsClosing=!0,yield this.privContext.close(),this.privContext=null,this.privIsClosing=!1):null!==this.privContext&&"running"===this.privContext.state&&(yield this.privContext.suspend())}))}}Qe.AUDIOFORMAT=ie.getDefaultInputFormat();var Ye=function(e,t,i,r){return new(i||(i=Promise))((function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};class Ze{constructor(e,t,i){this.privStreams={},this.privHeaderEnd=44,this.privId=i||C(),this.privEvents=new x,this.privSource=e,"undefined"!=typeof window&&"undefined"!=typeof Blob&&this.privSource instanceof Blob?this.privFilename=e.name:this.privFilename=t||"unknown.wav",this.privAudioFormatPromise=this.readHeader()}get format(){return this.privAudioFormatPromise}turnOn(){if(this.privFilename.lastIndexOf(".wav")!==this.privFilename.length-4){const e=this.privFilename+" is not supported. Only WAVE files are allowed at the moment.";return this.onEvent(new qe(e,"")),Promise.reject(e)}this.onEvent(new He(this.privId)),this.onEvent(new je(this.privId))}id(){return this.privId}attach(e){return Ye(this,void 0,void 0,(function*(){this.onEvent(new We(this.privId,e));const t=yield this.upload(e);return this.onEvent(new Ve(this.privId,e)),Promise.resolve({detach:()=>Ye(this,void 0,void 0,(function*(){t.readEnded(),delete this.privStreams[e],this.onEvent(new $e(this.privId,e)),yield this.turnOff()})),id:()=>e,read:()=>t.read()})}))}detach(e){e&&this.privStreams[e]&&(this.privStreams[e].close(),delete this.privStreams[e],this.onEvent(new $e(this.privId,e)))}turnOff(){for(const e in this.privStreams)if(e){const t=this.privStreams[e];t&&!t.isClosed&&t.close()}return this.onEvent(new Ke(this.privId)),Promise.resolve()}get events(){return this.privEvents}get deviceInfo(){return this.privAudioFormatPromise.then((e=>Promise.resolve({bitspersample:e.bitsPerSample,channelcount:e.channels,connectivity:Ne.Unknown,manufacturer:"Speech SDK",model:"File",samplerate:e.samplesPerSec,type:Oe.File})))}readHeader(){const e=this.privSource.slice(0,4296),t=new $,i=e=>{const i=new DataView(e),r=e=>String.fromCharCode(i.getUint8(e),i.getUint8(e+1),i.getUint8(e+2),i.getUint8(e+3));if("RIFF"!==r(0))return void t.reject("Invalid WAV header in file, RIFF was not found");if("WAVE"!==r(8)||"fmt "!==r(12))return void t.reject("Invalid WAV header in file, WAVEfmt was not found");const n=i.getInt32(16,!0),o=i.getUint16(22,!0),s=i.getUint32(24,!0),a=i.getUint16(34,!0);let c=36+Math.max(n-16,0);for(;"data"!==r(c);c+=2)if(c>4288)return void t.reject("Invalid WAV header in file, data block was not found");this.privHeaderEnd=c+8,t.resolve(ie.getWaveFormatPCM(s,a,o))};if("undefined"!=typeof window&&"undefined"!=typeof Blob&&e instanceof Blob){const t=new FileReader;t.onload=e=>{const t=e.target.result;i(t)},t.readAsArrayBuffer(e)}else{const t=e;i(t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength))}return t.promise}upload(e){return Ye(this,void 0,void 0,(function*(){const t=t=>{const i=`Error occurred while processing '${this.privFilename}'. ${t}`;throw this.onEvent(new Ge(this.privId,e,i)),new Error(i)};try{yield this.turnOn();const i=yield this.privAudioFormatPromise,r=new Je(i.avgBytesPerSec/10,e);this.privStreams[e]=r;const n=this.privSource.slice(this.privHeaderEnd),o=e=>{r.isClosed||(r.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()}),r.close())};if("undefined"!=typeof window&&"undefined"!=typeof Blob&&n instanceof Blob){const e=new FileReader;e.onerror=e=>t(e.toString()),e.onload=e=>{const t=e.target.result;o(t)},e.readAsArrayBuffer(n)}else{const e=n;o(e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength))}return r}catch(e){t(e)}}))}onEvent(e){this.privEvents.onEvent(e),G.instance.onEvent(e)}}class et{}var tt=function(e,t,i,r){return new(i||(i=Promise))((function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};class it{constructor(){}static createPushStream(e){return rt.create(e)}static createPullStream(e,t){return ot.create(e,t)}}class rt extends it{static create(e){return new nt(e)}}class nt extends rt{constructor(e){super(),this.privFormat=void 0===e?re.getDefaultInputFormat():e,this.privEvents=new x,this.privId=C(),this.privStream=new Je(this.privFormat.avgBytesPerSec/10)}get format(){return Promise.resolve(this.privFormat)}write(e){this.privStream.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}id(){return this.privId}turnOn(){this.onEvent(new He(this.privId)),this.onEvent(new je(this.privId))}attach(e){return tt(this,void 0,void 0,(function*(){this.onEvent(new We(this.privId,e)),yield this.turnOn();const t=this.privStream;return this.onEvent(new Ve(this.privId,e)),{detach:()=>tt(this,void 0,void 0,(function*(){return this.onEvent(new $e(this.privId,e)),this.turnOff()})),id:()=>e,read:()=>t.read()}}))}detach(e){this.onEvent(new $e(this.privId,e))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:Ne.Unknown,manufacturer:"Speech SDK",model:"PushStream",samplerate:this.privFormat.samplesPerSec,type:Oe.Stream})}onEvent(e){this.privEvents.onEvent(e),G.instance.onEvent(e)}toBuffer(e){const t=Buffer.alloc(e.byteLength),i=new Uint8Array(e);for(let e=0;e<t.length;++e)t[e]=i[e];return t}}class ot extends it{constructor(){super()}static create(e,t){return new st(e,t)}}class st extends ot{constructor(e,t){super(),this.privFormat=void 0===t?ie.getDefaultInputFormat():t,this.privEvents=new x,this.privId=C(),this.privCallback=e,this.privIsClosed=!1,this.privBufferSize=this.privFormat.avgBytesPerSec/10}get format(){return Promise.resolve(this.privFormat)}close(){this.privIsClosed=!0,this.privCallback.close()}id(){return this.privId}turnOn(){this.onEvent(new He(this.privId)),this.onEvent(new je(this.privId))}attach(e){return tt(this,void 0,void 0,(function*(){return this.onEvent(new We(this.privId,e)),yield this.turnOn(),this.onEvent(new Ve(this.privId,e)),{detach:()=>(this.privCallback.close(),this.onEvent(new $e(this.privId,e)),this.turnOff()),id:()=>e,read:()=>{let e,t=0;for(;t<this.privBufferSize;){const i=new ArrayBuffer(this.privBufferSize-t),r=this.privCallback.read(i);if(void 0===e)e=i;else{new Int8Array(e).set(new Int8Array(i),t)}if(0===r)break;t+=r}return Promise.resolve({buffer:e.slice(0,t),isEnd:this.privIsClosed||0===t,timeReceived:Date.now()})}}}))}detach(e){this.onEvent(new $e(this.privId,e))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:Ne.Unknown,manufacturer:"Speech SDK",model:"PullStream",samplerate:this.privFormat.samplesPerSec,type:Oe.Stream})}onEvent(e){this.privEvents.onEvent(e),G.instance.onEvent(e)}}class at{}var ct=i(10592);class ut{constructor(e){n.throwIfNullOrUndefined(ct.openSync,"\nFile System access not available, please use Push or PullAudioOutputStream"),this.privFd=ct.openSync(e,"w")}set format(e){n.throwIfNotUndefined(this.privAudioFormat,"format is already set"),this.privAudioFormat=e;let t=0;this.privAudioFormat.hasHeader&&(t=this.privAudioFormat.header.byteLength),void 0!==this.privFd&&(this.privWriteStream=ct.createWriteStream("",{fd:this.privFd,start:t,autoClose:!1}))}write(e){n.throwIfNullOrUndefined(this.privAudioFormat,"must set format before writing."),void 0!==this.privWriteStream&&this.privWriteStream.write(new Uint8Array(e.slice(0)))}close(){void 0!==this.privFd&&(this.privWriteStream.on("finish",(()=>{this.privAudioFormat.hasHeader&&(this.privAudioFormat.updateHeader(this.privWriteStream.bytesWritten),ct.writeSync(this.privFd,new Int8Array(this.privAudioFormat.header),0,this.privAudioFormat.header.byteLength,0)),ct.closeSync(this.privFd),this.privFd=void 0})),this.privWriteStream.end())}id(){return this.privId}}class pt{static fromDefaultMicrophoneInput(){const e=new Re(!0);return new ht(new Qe(e))}static fromMicrophoneInput(e){const t=new Re(!0);return new ht(new Qe(t,e))}static fromWavFileInput(e,t="unnamedBuffer.wav"){return new ht(new Ze(e,t))}static fromStreamInput(e){if(e instanceof et)return new ht(new st(e));if(e instanceof it)return new ht(e);if("undefined"!=typeof MediaStream&&e instanceof MediaStream){const t=new Re(!1);return new ht(new Qe(t,null,null,e))}throw new Error("Not Supported Type")}static fromDefaultSpeakerOutput(){return new lt(new Ee)}static fromSpeakerOutput(e){if(void 0===e)return pt.fromDefaultSpeakerOutput();if(e instanceof Ee)return new lt(e);throw new Error("Not Supported Type")}static fromAudioFileOutput(e){return new lt(new ut(e))}static fromStreamOutput(e){if(e instanceof at)return new lt(new he(e));if(e instanceof pe)return new lt(e);if(e instanceof ce)return new lt(e);throw new Error("Not Supported Type")}}class ht extends pt{constructor(e){super(),this.privSource=e}get format(){return this.privSource.format}close(e,t){this.privSource.turnOff().then((()=>{e&&e()}),(e=>{t&&t(e)}))}id(){return this.privSource.id()}turnOn(){return this.privSource.turnOn()}attach(e){return this.privSource.attach(e)}detach(e){return this.privSource.detach(e)}turnOff(){return this.privSource.turnOff()}get events(){return this.privSource.events}setProperty(e,t){if(n.throwIfNull(t,"value"),void 0===this.privSource.setProperty)throw new Error("This AudioConfig instance does not support setting properties.");this.privSource.setProperty(e,t)}getProperty(e,t){if(void 0!==this.privSource.getProperty)return this.privSource.getProperty(e,t);throw new Error("This AudioConfig instance does not support getting properties.")}get deviceInfo(){return this.privSource.deviceInfo}}class lt extends pt{constructor(e){super(),this.privDestination=e}set format(e){this.privDestination.format=e}write(e){this.privDestination.write(e)}close(){this.privDestination.close()}id(){return this.privDestination.id()}setProperty(){throw new Error("This AudioConfig instance does not support setting properties.")}getProperty(){throw new Error("This AudioConfig instance does not support getting properties.")}}var dt=i(10146),ft=i(30173),vt=i(43108),mt=i.n(vt),gt=i(92505),yt=i.n(gt),St=i(41137),wt=i.n(St);class bt{constructor(e,t){this.privStatusCode=e,this.privReason=t}get statusCode(){return this.privStatusCode}get reason(){return this.privReason}}class Ct{constructor(e,t,i){if(this.privPayload=null,!t)throw new l("payload");if(e===A.Binary&&"ArrayBuffer"!==t.__proto__.constructor.name)throw new d("Payload must be ArrayBuffer");if(e===A.Text&&"string"!=typeof t)throw new d("Payload must be a string");this.privMessageType=e,this.privPayload=t,this.privId=i||C()}get messageType(){return this.privMessageType}get payload(){return this.privPayload}get textContent(){if(this.privMessageType===A.Binary)throw new d("Not supported for binary message");return this.privPayload}get binaryContent(){if(this.privMessageType===A.Text)throw new d("Not supported for text message");return this.privPayload}get id(){return this.privId}}var xt=function(e,t,i,r){return new(i||(i=Promise))((function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};class At{constructor(e,t,i,r,n,o){if(!e)throw new l("uri");if(!i)throw new l("messageFormatter");this.proxyInfo=r,this.privConnectionEvents=new x,this.privConnectionId=t,this.privMessageFormatter=i,this.privConnectionState=P.None,this.privUri=e,this.privHeaders=n,this.privEnableCompression=o,this.privHeaders[be.ConnectionId]=this.privConnectionId,this.privLastErrorReceived=""}get state(){return this.privConnectionState}open(){if(this.privConnectionState===P.Disconnected)return Promise.reject(`Cannot open a connection that is in ${this.privConnectionState} state`);if(this.privConnectionEstablishDeferral)return this.privConnectionEstablishDeferral.promise;this.privConnectionEstablishDeferral=new $,this.privCertificateValidatedDeferral=new $,this.privConnectionState=P.Connecting;try{if("undefined"==typeof WebSocket||At.forceNpmWebSocket){const e={headers:this.privHeaders,perMessageDeflate:this.privEnableCompression};this.privCertificateValidatedDeferral.resolve(),e.agent=this.getAgent();let t=new URL(this.privUri).protocol;"wss:"===(null==t?void 0:t.toLocaleLowerCase())?t="https:":"ws:"===(null==t?void 0:t.toLocaleLowerCase())&&(t="http:"),e.agent.protocol=t,this.privWebsocketClient=new(wt())(this.privUri,e)}else this.privCertificateValidatedDeferral.resolve(),this.privWebsocketClient=new WebSocket(this.privUri);this.privWebsocketClient.binaryType="arraybuffer",this.privReceivingMessageQueue=new Y,this.privDisconnectDeferral=new $,this.privSendMessageQueue=new Y,this.processSendQueue().catch((e=>{G.instance.onEvent(new Te(e))}))}catch(e){return this.privConnectionEstablishDeferral.resolve(new bt(500,e)),this.privConnectionEstablishDeferral.promise}return this.onEvent(new L(this.privConnectionId,this.privUri)),this.privWebsocketClient.onopen=()=>{this.privCertificateValidatedDeferral.promise.then((()=>{this.privConnectionState=P.Connected,this.onEvent(new z(this.privConnectionId)),this.privConnectionEstablishDeferral.resolve(new bt(200,""))}),(e=>{this.privConnectionEstablishDeferral.reject(e)}))},this.privWebsocketClient.onerror=e=>{this.onEvent(new _(this.privConnectionId,e.message,e.type)),this.privLastErrorReceived=e.message},this.privWebsocketClient.onclose=e=>{this.privConnectionState===P.Connecting?(this.privConnectionState=P.Disconnected,this.privConnectionEstablishDeferral.resolve(new bt(e.code,e.reason+" "+this.privLastErrorReceived))):(this.privConnectionState=P.Disconnected,this.privWebsocketClient=null,this.onEvent(new B(this.privConnectionId,e.code,e.reason))),this.onClose(e.code,e.reason).catch((e=>{G.instance.onEvent(new Te(e))}))},this.privWebsocketClient.onmessage=e=>{const t=(new Date).toISOString();if(this.privConnectionState===P.Connected){const i=new $;if(this.privReceivingMessageQueue.enqueueFromPromise(i.promise),e.data instanceof ArrayBuffer){const r=new Ct(A.Binary,e.data);this.privMessageFormatter.toConnectionMessage(r).then((e=>{this.onEvent(new F(this.privConnectionId,t,e)),i.resolve(e)}),(e=>{i.reject(`Invalid binary message format. Error: ${e}`)}))}else{const r=new Ct(A.Text,e.data);this.privMessageFormatter.toConnectionMessage(r).then((e=>{this.onEvent(new F(this.privConnectionId,t,e)),i.resolve(e)}),(e=>{i.reject(`Invalid text message format. Error: ${e}`)}))}}},this.privConnectionEstablishDeferral.promise}send(e){if(this.privConnectionState!==P.Connected)return Promise.reject(`Cannot send on connection that is in ${P[this.privConnectionState]} state`);const t=new $,i=new $;return this.privSendMessageQueue.enqueueFromPromise(i.promise),this.privMessageFormatter.fromConnectionMessage(e).then((r=>{i.resolve({Message:e,RawWebsocketMessage:r,sendStatusDeferral:t})}),(e=>{i.reject(`Error formatting the message. ${e}`)})),t.promise}read(){return this.privConnectionState!==P.Connected?Promise.reject(`Cannot read on connection that is in ${this.privConnectionState} state`):this.privReceivingMessageQueue.dequeue()}close(e){return this.privWebsocketClient?(this.privConnectionState!==P.Disconnected&&this.privWebsocketClient.close(1e3,e||"Normal closure by client"),this.privDisconnectDeferral.promise):Promise.resolve()}get events(){return this.privConnectionEvents}sendRawMessage(e){try{return e?(this.onEvent(new H(this.privConnectionId,(new Date).toISOString(),e.Message)),this.isWebsocketOpen?(this.privWebsocketClient.send(e.RawWebsocketMessage.payload),Promise.resolve()):Promise.reject("websocket send error: Websocket not ready "+this.privConnectionId+" "+e.Message.id+" "+(new Error).stack)):Promise.resolve()}catch(e){return Promise.reject(`websocket send error: ${e}`)}}onClose(e,t){return xt(this,void 0,void 0,(function*(){const i=`Connection closed. ${e}: ${t}`;this.privConnectionState=P.Disconnected,this.privDisconnectDeferral.resolve(),yield this.privReceivingMessageQueue.drainAndDispose((()=>{}),i),yield this.privSendMessageQueue.drainAndDispose((e=>{e.sendStatusDeferral.reject(i)}),i)}))}processSendQueue(){return xt(this,void 0,void 0,(function*(){for(;;){const e=this.privSendMessageQueue.dequeue(),t=yield e;if(!t)return;try{yield this.sendRawMessage(t),t.sendStatusDeferral.resolve()}catch(e){t.sendStatusDeferral.reject(e)}}}))}onEvent(e){this.privConnectionEvents.onEvent(e),G.instance.onEvent(e)}getAgent(){const e=new(mt().Agent)(this.createConnection);return void 0!==this.proxyInfo&&void 0!==this.proxyInfo.HostName&&this.proxyInfo.Port>0&&(e.proxyInfo=this.proxyInfo),e}static GetProxyAgent(e){const t={host:e.HostName,port:e.Port};e.UserName?t.headers={"Proxy-Authentication":"Basic "+new Buffer(`${e.UserName}:${void 0===e.Password?"":e.Password}`).toString("base64")}:t.headers={},t.headers.requestOCSP="true";return new(yt())(t)}createConnection(e,t){let i;if(t=Object.assign(Object.assign({},t),{requestOCSP:!0,servername:t.host}),this.proxyInfo){const r=At.GetProxyAgent(this.proxyInfo);i=new Promise(((i,n)=>{r.callback(e,t,((e,t)=>{e?n(e):i(t)}))}))}else i=t.secureEndpoint?Promise.resolve(ft.connect(t)):Promise.resolve(dt.connect(t));return i}get isWebsocketOpen(){return this.privWebsocketClient&&this.privWebsocketClient.readyState===this.privWebsocketClient.OPEN}}At.forceNpmWebSocket=!1;var Tt=function(e,t,i,r){return new(i||(i=Promise))((function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};class Pt{constructor(e,t,i,r,n,o=!1,s){if(this.privIsDisposed=!1,!e)throw new l("uri");if(!r)throw new l("messageFormatter");this.privMessageFormatter=r;let a="",c=0;if(t)for(const i in t)if(i){a+=0===c&&-1===e.indexOf("?")?"?":"&";a+=encodeURIComponent(i);let r=t[i];r&&(r=encodeURIComponent(r),a+=`=${r}`),c++}if(i)for(const t in i)if(t){a+=0===c&&-1===e.indexOf("?")?"?":"&";a+=`${t}=${encodeURIComponent(i[t])}`,c++}this.privUri=e+a,this.privId=s||C(),this.privConnectionMessageAdapter=new At(this.privUri,this.id,this.privMessageFormatter,n,i,o)}dispose(){return Tt(this,void 0,void 0,(function*(){this.privIsDisposed=!0,this.privConnectionMessageAdapter&&(yield this.privConnectionMessageAdapter.close())}))}isDisposed(){return this.privIsDisposed}get id(){return this.privId}get uri(){return this.privUri}state(){return this.privConnectionMessageAdapter.state}open(){return this.privConnectionMessageAdapter.open()}send(e){return this.privConnectionMessageAdapter.send(e)}read(){return this.privConnectionMessageAdapter.read()}get events(){return this.privConnectionMessageAdapter.events}}class It{constructor(e,t,i,r){this.privProxyHostName=e,this.privProxyPort=t,this.privProxyUserName=i,this.privProxyPassword=r}static fromParameters(e){return new It(e.getProperty(o.SpeechServiceConnection_ProxyHostName),parseInt(e.getProperty(o.SpeechServiceConnection_ProxyPort),10),e.getProperty(o.SpeechServiceConnection_ProxyUserName),e.getProperty(o.SpeechServiceConnection_ProxyPassword))}static fromRecognizerConfig(e){return this.fromParameters(e.parameters)}get HostName(){return this.privProxyHostName}get Port(){return this.privProxyPort}get UserName(){return this.privProxyUserName}get Password(){return this.privProxyPassword}}class Et{}Et.BotId="botid",Et.CustomSpeechDeploymentId="cid",Et.CustomVoiceDeploymentId="deploymentId",Et.EnableAudioLogging="storeAudio",Et.EnableLanguageId="lidEnabled",Et.EnableWordLevelTimestamps="wordLevelTimestamps",Et.EndSilenceTimeoutMs="endSilenceTimeoutMs",Et.SegmentationSilenceTimeoutMs="segmentationSilenceTimeoutMs",Et.Format="format",Et.InitialSilenceTimeoutMs="initialSilenceTimeoutMs",Et.Language="language",Et.Profanity="profanity",Et.RequestBotStatusMessages="enableBotMessageStatus",Et.StableIntermediateThreshold="stableIntermediateThreshold",Et.StableTranslation="stableTranslation",Et.TestHooks="testhooks",Et.Postprocessing="postprocessing",Et.CtsMeetingId="meetingId",Et.CtsDeviceId="deviceId",Et.CtsIsParticipant="isParticipant";class kt{static getHostSuffix(e){if(e){if(e.toLowerCase().startsWith("china"))return".azure.cn";if(e.toLowerCase().startsWith("usgov"))return".azure.us"}return".microsoft.com"}setCommonUrlParams(e,i,r){new Map([[o.Speech_SegmentationSilenceTimeoutMs,Et.SegmentationSilenceTimeoutMs],[o.SpeechServiceConnection_EnableAudioLogging,Et.EnableAudioLogging],[o.SpeechServiceConnection_EndSilenceTimeoutMs,Et.EndSilenceTimeoutMs],[o.SpeechServiceConnection_InitialSilenceTimeoutMs,Et.InitialSilenceTimeoutMs],[o.SpeechServiceResponse_PostProcessingOption,Et.Postprocessing],[o.SpeechServiceResponse_ProfanityOption,Et.Profanity],[o.SpeechServiceResponse_RequestWordLevelTimestamps,Et.EnableWordLevelTimestamps],[o.SpeechServiceResponse_StablePartialResultThreshold,Et.StableIntermediateThreshold]]).forEach(((t,n)=>{this.setUrlParameter(n,t,e,i,r)}));const n=JSON.parse(e.parameters.getProperty(t,"{}"));Object.keys(n).forEach((e=>{i[e]=n[e]}))}setUrlParameter(e,t,i,r,n){const o=i.parameters.getProperty(e,void 0);!o||n&&-1!==n.search(t)||(r[t]=o.toLocaleLowerCase())}}class Rt{toConnectionMessage(e){const t=new $;try{if(e.messageType===A.Text){const i=e.textContent;let r={},n=null;if(i){const e=i.split("\r\n\r\n");e&&e.length>0&&(r=this.parseHeaders(e[0]),e.length>1&&(n=e[1]))}t.resolve(new M(e.messageType,n,r,e.id))}else if(e.messageType===A.Binary){const i=e.binaryContent;let r={},n=null;if(!i||i.byteLength<2)throw new Error("Invalid binary message format. Header length missing.");const o=new DataView(i),s=o.getInt16(0);if(i.byteLength<s+2)throw new Error("Invalid binary message format. Header content missing.");let a="";for(let e=0;e<s;e++)a+=String.fromCharCode(o.getInt8(e+2));r=this.parseHeaders(a),i.byteLength>s+2&&(n=i.slice(2+s)),t.resolve(new M(e.messageType,n,r,e.id))}}catch(e){t.reject(`Error formatting the message. Error: ${e}`)}return t.promise}fromConnectionMessage(e){const t=new $;try{if(e.messageType===A.Text){const i=`${this.makeHeaders(e)}\r\n${e.textBody?e.textBody:""}`;t.resolve(new Ct(A.Text,i,e.id))}else if(e.messageType===A.Binary){const i=this.makeHeaders(e),r=e.binaryBody,n=this.stringToArrayBuffer(i),o=new Int8Array(n),s=o.byteLength,a=new Int8Array(2+s+(r?r.byteLength:0));if(a[0]=s>>8&255,a[1]=255&s,a.set(o,2),r){const e=new Int8Array(r);a.set(e,2+s)}const c=a.buffer;t.resolve(new Ct(A.Binary,c,e.id))}}catch(e){t.reject(`Error formatting the message. ${e}`)}return t.promise}makeHeaders(e){let t="";if(e.headers)for(const i in e.headers)i&&(t+=`${i}: ${e.headers[i]}\r\n`);return t}parseHeaders(e){const t={};if(e){const i=e.match(/[^\r\n]+/g);if(t)for(const e of i)if(e){const i=e.indexOf(":"),r=i>0?e.substr(0,i).trim().toLowerCase():e,n=i>0&&e.length>i+1?e.substr(i+1).trim():"";t[r]=n}}return t}stringToArrayBuffer(e){const t=new ArrayBuffer(e.length),i=new DataView(t);for(let t=0;t<e.length;t++)i.setUint8(t,e.charCodeAt(t));return t}}class Mt{constructor(){this.synthesisUri="/cognitiveservices/websocket/v1"}create(e,t,i){let r=e.parameters.getProperty(o.SpeechServiceConnection_Endpoint,void 0);const n=e.parameters.getProperty(o.SpeechServiceConnection_Region,void 0),s=kt.getHostSuffix(n),a=e.parameters.getProperty(o.SpeechServiceConnection_EndpointId,void 0),c=void 0===a?"tts":"voice",u=e.parameters.getProperty(o.SpeechServiceConnection_Host,"wss://"+n+"."+c+".speech"+s);r||(r=u+this.synthesisUri);const p={};void 0!==t.token&&""!==t.token&&(p[t.headerName]=t.token),p[be.ConnectionId]=i,void 0!==a&&(p[Et.CustomVoiceDeploymentId]=a),e.parameters.setProperty(o.SpeechServiceConnection_Url,r);const h="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new Pt(r,{},p,new Rt,It.fromParameters(e.parameters),h,i)}}var Dt;!function(e){e[e.Standard=0]="Standard",e[e.Custom=1]="Custom"}(Dt||(Dt={}));class Nt{constructor(e,t){this.privSynthesisServiceType=Dt.Standard,this.privSpeechServiceConfig=e||new Le(new ze(null)),this.privParameters=t}get parameters(){return this.privParameters}get synthesisServiceType(){return this.privSynthesisServiceType}set synthesisServiceType(e){this.privSynthesisServiceType=e}get SpeechServiceConfig(){return this.privSpeechServiceConfig}}class Ot{constructor(e,t){this.privHeaderName=e,this.privToken=t}get headerName(){return this.privHeaderName}get token(){return this.privToken}}class Lt{constructor(e){if(!e)throw new l("subscriptionKey");this.privAuthInfo=new Ot(be.AuthKey,e)}fetch(e){return Promise.resolve(this.privAuthInfo)}fetchOnExpiry(e){return Promise.resolve(this.privAuthInfo)}}class zt{constructor(e,t){if(!e)throw new l("fetchCallback");if(!t)throw new l("fetchOnExpiryCallback");this.privFetchCallback=e,this.privFetchOnExpiryCallback=t}fetch(e){return this.privFetchCallback(e).then((e=>new Ot(be.Authorization,void 0===e?void 0:zt.privTokenPrefix+e)))}fetchOnExpiry(e){return this.privFetchOnExpiryCallback(e).then((e=>new Ot(be.Authorization,void 0===e?void 0:zt.privTokenPrefix+e)))}}zt.privTokenPrefix="bearer ";class Bt{static get requestOptions(){return Bt.privDefaultRequestOptions}static get configParams(){return Bt.privDefaultParams}static get restErrors(){return Bt.privRestErrors}}Bt.privDefaultRequestOptions={headers:{Accept:"application/json"},ignoreCache:!1,timeout:1e4},Bt.privRestErrors={authInvalidSubscriptionKey:"You must specify either an authentication token to use, or a Cognitive Speech subscription key.",authInvalidSubscriptionRegion:"You must specify the Cognitive Speech region to use.",invalidArgs:"Required input not found: {arg}.",invalidCreateJoinConversationResponse:"Creating/Joining conversation failed with HTTP {status}.",invalidParticipantRequest:"The requested participant was not found.",permissionDeniedConnect:"Required credentials not found.",permissionDeniedConversation:"Invalid operation: only the host can {command} the conversation.",permissionDeniedParticipant:"Invalid operation: only the host can {command} a participant.",permissionDeniedSend:"Invalid operation: the conversation is not in a connected state.",permissionDeniedStart:"Invalid operation: there is already an active conversation."},Bt.privDefaultParams={apiVersion:"api-version",authorization:"Authorization",clientAppId:"X-ClientAppId",contentTypeKey:"Content-Type",correlationId:"X-CorrelationId",languageCode:"language",nickname:"nickname",profanity:"profanity",requestId:"X-RequestId",roomId:"roomid",sessionToken:"token",subscriptionKey:"Ocp-Apim-Subscription-Key",subscriptionRegion:"Ocp-Apim-Subscription-Region",token:"X-CapitoToken"};var _t,Ft,Ht,jt=i(51719),Kt=i.n(jt),qt=function(e,t,i,r){return new(i||(i=Promise))((function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};!function(e){e.Get="GET",e.Post="POST",e.Delete="DELETE",e.File="file"}(_t||(_t={}));class Ut{constructor(e){if(!e)throw new l("configParams");this.privHeaders=e.headers,this.privIgnoreCache=e.ignoreCache}static extractHeaderValue(e,t){let i="";try{const r=t.trim().split(/[\r\n]+/),n={};r.forEach((e=>{const t=e.split(": "),i=t.shift().toLowerCase(),r=t.join(": ");n[i]=r})),i=n[e.toLowerCase()]}catch(e){}return i}set options(e){this.privHeaders=e.headers,this.privIgnoreCache=e.ignoreCache}setHeaders(e,t){this.privHeaders[e]=t}request(e,t,i={},r=null){const n=new $,o=e===_t.File?"POST":e,s=(e,t={})=>{const i=e;return{data:JSON.stringify(t),headers:JSON.stringify(e.headers),json:t,ok:e.statusCode>=200&&e.statusCode<300,status:e.statusCode,statusText:t.error?t.error.message:i.statusText?i.statusText:i.statusMessage}};return this.privIgnoreCache&&(this.privHeaders["Cache-Control"]="no-cache"),e===_t.Post&&r&&(this.privHeaders["content-type"]="application/json",this.privHeaders["Content-Type"]="application/json"),(r=>{Kt()(t,o,this.privHeaders,200,201,202,204,400,401,402,403,404)(""===this.queryParams(i)?"":`?${this.queryParams(i)}`,r).then((t=>qt(this,void 0,void 0,(function*(){if(e===_t.Delete||204===t.statusCode)n.resolve(s(t));else try{const e=yield t.json();n.resolve(s(t,e))}catch(e){n.resolve(s(t))}})))).catch((e=>{n.reject(e)}))})(r),n.promise}queryParams(e={}){return Object.keys(e).map((t=>encodeURIComponent(t)+"="+encodeURIComponent(e[t]))).join("&")}}class Wt{constructor(e,t){let i=e.parameters.getProperty(o.SpeechServiceConnection_Endpoint,void 0);if(!i){const t=e.parameters.getProperty(o.SpeechServiceConnection_Region,"westus"),r=kt.getHostSuffix(t);i=e.parameters.getProperty(o.SpeechServiceConnection_Host,`https://${t}.tts.speech${r}`)}this.privUri=`${i}/cognitiveservices/voices/list`;const r=Bt.requestOptions;this.privRestAdapter=new Ut(r),this.privAuthentication=t}getVoicesList(e){return this.privRestAdapter.setHeaders(be.ConnectionId,e),this.privAuthentication.fetch(e).then((e=>(this.privRestAdapter.setHeaders(e.headerName,e.token),this.privRestAdapter.request(_t.Get,this.privUri))))}}!function(e){e[e.Unknown=0]="Unknown",e[e.Female=1]="Female",e[e.Male=2]="Male"}(Ft||(Ft={})),function(e){e[e.OnlineNeural=1]="OnlineNeural",e[e.OnlineStandard=2]="OnlineStandard",e[e.OfflineNeural=3]="OfflineNeural",e[e.OfflineStandard=4]="OfflineStandard"}(Ht||(Ht={}));class Vt{constructor(e){if(this.privStyleList=[],this.privVoicePath="",e&&(this.privName=e.Name,this.privLocale=e.Locale,this.privShortName=e.ShortName,this.privLocalName=e.LocalName,this.privVoiceType=e.VoiceType.endsWith("Standard")?Ht.OnlineStandard:Ht.OnlineNeural,this.privGender="Male"===e.Gender?Ft.Male:"Female"===e.Gender?Ft.Female:Ft.Unknown,e.StyleList&&Array.isArray(e.StyleList)))for(const t of e.StyleList)this.privStyleList.push(t)}get name(){return this.privName}get locale(){return this.privLocale}get shortName(){return this.privShortName}get localName(){return this.privLocalName}get gender(){return this.privGender}get voiceType(){return this.privVoiceType}get styleList(){return this.privStyleList}get voicePath(){return this.privVoicePath}}class $t extends K{constructor(e,t,i){if(Array.isArray(t)){super(e,k.VoicesListRetrieved,void 0,new u),this.privVoices=[];for(const e of t)this.privVoices.push(new Vt(e))}else super(e,k.Canceled,i||"Error information unavailable",new u)}get voices(){return this.privVoices}}var Gt=function(e,t,i,r){return new(i||(i=Promise))((function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};class Jt{constructor(e,t){const i=e;n.throwIfNull(i,"speechConfig"),null!==t&&(this.audioConfig=void 0===t?"undefined"==typeof window?void 0:pt.fromDefaultSpeakerOutput():t),this.privProperties=i.properties.clone(),this.privDisposed=!1,this.privSynthesizing=!1,this.privConnectionFactory=new Mt,this.synthesisRequestQueue=new Y,this.implCommonSynthesizeSetup()}get authorizationToken(){return this.properties.getProperty(o.SpeechServiceAuthorization_Token)}set authorizationToken(e){n.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(o.SpeechServiceAuthorization_Token,e)}get properties(){return this.privProperties}get autoDetectSourceLanguage(){return"OpenRange"===this.properties.getProperty(o.SpeechServiceConnection_AutoDetectSourceLanguages)}static FromConfig(e,t,i){const r=e;return t.properties.mergeTo(r.properties),new Jt(e,i)}buildSsml(e){const t={"af-ZA":"af-ZA-AdriNeural","am-ET":"am-ET-AmehaNeural","ar-AE":"ar-AE-FatimaNeural","ar-BH":"ar-BH-AliNeural","ar-DZ":"ar-DZ-AminaNeural","ar-EG":"ar-EG-SalmaNeural","ar-IQ":"ar-IQ-BasselNeural","ar-JO":"ar-JO-SanaNeural","ar-KW":"ar-KW-FahedNeural","ar-LY":"ar-LY-ImanNeural","ar-MA":"ar-MA-JamalNeural","ar-QA":"ar-QA-AmalNeural","ar-SA":"ar-SA-HamedNeural","ar-SY":"ar-SY-AmanyNeural","ar-TN":"ar-TN-HediNeural","ar-YE":"ar-YE-MaryamNeural","bg-BG":"bg-BG-BorislavNeural","bn-BD":"bn-BD-NabanitaNeural","bn-IN":"bn-IN-BashkarNeural","ca-ES":"ca-ES-JoanaNeural","cs-CZ":"cs-CZ-AntoninNeural","cy-GB":"cy-GB-AledNeural","da-DK":"da-DK-ChristelNeural","de-AT":"de-AT-IngridNeural","de-CH":"de-CH-JanNeural","de-DE":"de-DE-KatjaNeural","el-GR":"el-GR-AthinaNeural","en-AU":"en-AU-NatashaNeural","en-CA":"en-CA-ClaraNeural","en-GB":"en-GB-LibbyNeural","en-HK":"en-HK-SamNeural","en-IE":"en-IE-ConnorNeural","en-IN":"en-IN-NeerjaNeural","en-KE":"en-KE-AsiliaNeural","en-NG":"en-NG-AbeoNeural","en-NZ":"en-NZ-MitchellNeural","en-PH":"en-PH-JamesNeural","en-SG":"en-SG-LunaNeural","en-TZ":"en-TZ-ElimuNeural","en-US":"en-US-JennyNeural","en-ZA":"en-ZA-LeahNeural","es-AR":"es-AR-ElenaNeural","es-BO":"es-BO-MarceloNeural","es-CL":"es-CL-CatalinaNeural","es-CO":"es-CO-GonzaloNeural","es-CR":"es-CR-JuanNeural","es-CU":"es-CU-BelkysNeural","es-DO":"es-DO-EmilioNeural","es-EC":"es-EC-AndreaNeural","es-ES":"es-ES-AlvaroNeural","es-GQ":"es-GQ-JavierNeural","es-GT":"es-GT-AndresNeural","es-HN":"es-HN-CarlosNeural","es-MX":"es-MX-DaliaNeural","es-NI":"es-NI-FedericoNeural","es-PA":"es-PA-MargaritaNeural","es-PE":"es-PE-AlexNeural","es-PR":"es-PR-KarinaNeural","es-PY":"es-PY-MarioNeural","es-SV":"es-SV-LorenaNeural","es-US":"es-US-AlonsoNeural","es-UY":"es-UY-MateoNeural","es-VE":"es-VE-PaolaNeural","et-EE":"et-EE-AnuNeural","fa-IR":"fa-IR-DilaraNeural","fi-FI":"fi-FI-SelmaNeural","fil-PH":"fil-PH-AngeloNeural","fr-BE":"fr-BE-CharlineNeural","fr-CA":"fr-CA-SylvieNeural","fr-CH":"fr-CH-ArianeNeural","fr-FR":"fr-FR-DeniseNeural","ga-IE":"ga-IE-ColmNeural","gl-ES":"gl-ES-RoiNeural","gu-IN":"gu-IN-DhwaniNeural","he-IL":"he-IL-AvriNeural","hi-IN":"hi-IN-MadhurNeural","hr-HR":"hr-HR-GabrijelaNeural","hu-HU":"hu-HU-NoemiNeural","id-ID":"id-ID-ArdiNeural","is-IS":"is-IS-GudrunNeural","it-IT":"it-IT-IsabellaNeural","ja-JP":"ja-JP-NanamiNeural","jv-ID":"jv-ID-DimasNeural","kk-KZ":"kk-KZ-AigulNeural","km-KH":"km-KH-PisethNeural","kn-IN":"kn-IN-GaganNeural","ko-KR":"ko-KR-SunHiNeural","lo-LA":"lo-LA-ChanthavongNeural","lt-LT":"lt-LT-LeonasNeural","lv-LV":"lv-LV-EveritaNeural","mk-MK":"mk-MK-AleksandarNeural","ml-IN":"ml-IN-MidhunNeural","mr-IN":"mr-IN-AarohiNeural","ms-MY":"ms-MY-OsmanNeural","mt-MT":"mt-MT-GraceNeural","my-MM":"my-MM-NilarNeural","nb-NO":"nb-NO-PernilleNeural","nl-BE":"nl-BE-ArnaudNeural","nl-NL":"nl-NL-ColetteNeural","pl-PL":"pl-PL-AgnieszkaNeural","ps-AF":"ps-AF-GulNawazNeural","pt-BR":"pt-BR-FranciscaNeural","pt-PT":"pt-PT-DuarteNeural","ro-RO":"ro-RO-AlinaNeural","ru-RU":"ru-RU-SvetlanaNeural","si-LK":"si-LK-SameeraNeural","sk-SK":"sk-SK-LukasNeural","sl-SI":"sl-SI-PetraNeural","so-SO":"so-SO-MuuseNeural","sr-RS":"sr-RS-NicholasNeural","su-ID":"su-ID-JajangNeural","sv-SE":"sv-SE-SofieNeural","sw-KE":"sw-KE-RafikiNeural","sw-TZ":"sw-TZ-DaudiNeural","ta-IN":"ta-IN-PallaviNeural","ta-LK":"ta-LK-KumarNeural","ta-SG":"ta-SG-AnbuNeural","te-IN":"te-IN-MohanNeural","th-TH":"th-TH-PremwadeeNeural","tr-TR":"tr-TR-AhmetNeural","uk-UA":"uk-UA-OstapNeural","ur-IN":"ur-IN-GulNeural","ur-PK":"ur-PK-AsadNeural","uz-UZ":"uz-UZ-MadinaNeural","vi-VN":"vi-VN-HoaiMyNeural","zh-CN":"zh-CN-XiaoxiaoNeural","zh-HK":"zh-HK-HiuMaanNeural","zh-TW":"zh-TW-HsiaoChenNeural","zu-ZA":"zu-ZA-ThandoNeural"};let i=this.properties.getProperty(o.SpeechServiceConnection_SynthLanguage,"en-US"),r=this.properties.getProperty(o.SpeechServiceConnection_SynthVoice,""),n=Jt.XMLEncode(e);return this.autoDetectSourceLanguage?i="en-US":r=r||t[i],r&&(n=`<voice name='${r}'>${n}</voice>`),n=`<speak version='1.0' xmlns='http://www.w3.org/2001/10/synthesis' xmlns:mstts='http://www.w3.org/2001/mstts' xmlns:emo='http://www.w3.org/2009/10/emotionml' xml:lang='${i}'>${n}</speak>`,n}speakTextAsync(e,t,i,r){this.speakImpl(e,!1,t,i,r)}speakSsmlAsync(e,t,i,r){this.speakImpl(e,!0,t,i,r)}getVoicesAsync(e=""){return Gt(this,void 0,void 0,(function*(){return this.getVoices(e)}))}close(e,t){n.throwIfDisposed(this.privDisposed),function(e,t,i){e.then((e=>{try{t&&t(e)}catch(e){if(i)try{if(e instanceof Error){const t=e;i(t.name+": "+t.message)}else i(e)}catch(e){}}}),(e=>{if(i)try{if(e instanceof Error){const t=e;i(t.name+": "+t.message)}else i(e)}catch(e){}}))}(this.dispose(!0),e,t)}get internalData(){return this.privAdapter}dispose(e){return Gt(this,void 0,void 0,(function*(){this.privDisposed||(e&&this.privAdapter&&(yield this.privAdapter.dispose()),this.privDisposed=!0)}))}createSynthesizerConfig(e){return new Nt(e,this.privProperties)}createSynthesisAdapter(e,t,i,r){return new Ae(e,t,r,this,this.audioConfig)}implCommonSynthesizeSetup(){let e="undefined"!=typeof window?"Browser":"Node",t="unknown",i="unknown";"undefined"!=typeof navigator&&(e=e+"/"+navigator.platform,t=navigator.userAgent,i=navigator.appVersion);const r=this.createSynthesizerConfig(new Le(new ze(new _e(e,t,i)))),n=this.privProperties.getProperty(o.SpeechServiceConnection_Key,void 0),s=n&&""!==n?new Lt(n):new zt((()=>{const e=this.privProperties.getProperty(o.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(e)}),(()=>{const e=this.privProperties.getProperty(o.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(e)}));this.privAdapter=this.createSynthesisAdapter(s,this.privConnectionFactory,this.audioConfig,r),this.privAdapter.audioOutputFormat=ne.fromSpeechSynthesisOutputFormat(c[this.properties.getProperty(o.SpeechServiceConnection_SynthOutputFormat,void 0)]),this.privRestAdapter=new Wt(r,s)}speakImpl(e,t,i,r,o){try{n.throwIfDisposed(this.privDisposed);const s=C();let a;a=o instanceof at?new he(o):o instanceof ce?o:void 0!==o?new ut(o):void 0,this.synthesisRequestQueue.enqueue(new Xt(s,e,t,(e=>{if(this.privSynthesizing=!1,i)try{i(e)}catch(e){r&&r(e)}i=void 0,this.adapterSpeak().catch((()=>{}))}),(e=>{r&&r(e)}),a)),this.adapterSpeak().catch((()=>{}))}catch(e){if(r)if(e instanceof Error){const t=e;r(t.name+": "+t.message)}else r(e);this.dispose(!0).catch((()=>{}))}}getVoices(e){return Gt(this,void 0,void 0,(function*(){const t=C(),i=yield this.privRestAdapter.getVoicesList(t);if(i.ok&&Array.isArray(i.json)){let r=i.json;return e&&e.length>0&&(r=r.filter((t=>!!t.Locale&&t.Locale.toLowerCase()===e.toLowerCase()))),new $t(t,r,void 0)}return new $t(t,void 0,`Error: ${i.status}: ${i.statusText}`)}))}adapterSpeak(){return Gt(this,void 0,void 0,(function*(){if(!this.privDisposed&&!this.privSynthesizing){this.privSynthesizing=!0;const e=yield this.synthesisRequestQueue.dequeue();return this.privAdapter.Speak(e.text,e.isSSML,e.requestId,e.cb,e.err,e.dataStream)}}))}static XMLEncode(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}}class Xt{constructor(e,t,i,r,n,o){this.requestId=e,this.text=t,this.isSSML=i,this.cb=r,this.err=n,this.dataStream=o}}var Qt=i(19755),Yt=i.n(Qt),Zt=function(){function e(){}return e.prototype.appendPickerHTMLtoChatWindowFooter=function(e){this.hostInstance.chatEle.find(".kore-chat-footer .footerContainer").append(e)},e.prototype.installTextToSpeechTemplate=function(){var e=this,t=e.hostInstance.$;e.pickerHTML=t(e.getTextToSpeechTemplateString()),e.appendPickerHTMLtoChatWindowFooter(e.pickerHTML),e.bindEvents()},e.prototype.getTextToSpeechTemplateString=function(){return'<div class="sdkFooterIcon ttspeakerDiv ttsOff">         <button class="ttspeaker" title="Talk to speak">             <span class="ttsSpeakerEnable"></span>             <span class="ttsSpeakerDisable"></span>             <span style="display:none;"><audio id="ttspeaker" controls="" autoplay="" name="media"><source src="" type="audio/wav"></audio></span>        </button>     </div> '},e.prototype.bindEvents=function(){var e=this;(0,e.hostInstance.$)(e.pickerHTML).on("click",".ttspeaker",(function(t){e.OnSpeakerButtonClick&&e.OnSpeakerButtonClick()}))},e}();var ei,ti=(ei=function(e,t){return ei=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},ei(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}ei(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});const ii=function(e){function t(t){var i=e.call(this)||this;i.name="AzureTTS",i._txtToSpeak="",i.config=t,i.config.key||console.error("Please configure the Azure TTS API-KEY"),i.config.region||(i.config.region="eastus"),i.speechConfig=p.fromSubscription(i.config.key,i.config.region),i.player=new Ee;var r=pt.fromSpeakerOutput(i.player);return i.speechSynthesizer=new Jt(i.speechConfig,r),i}return ti(t,e),t.prototype.onHostCreate=function(){var e=this;this.hostInstance.on("viewInit",(function(t){e.onInit()}))},t.prototype.onInit=function(){this.installTextToSpeechTemplate()},t.prototype.OnSpeakerButtonClick=function(){var e=this;Yt()(".ttspeakerDiv").hasClass("ttsOff")?(Yt()(".ttspeakerDiv").removeClass("ttsOff"),this.player.resume(),this.hostInstance.on("afterRenderMessage",(function(t){var i=t.msgData;if("bot_response"===(null==i?void 0:i.type)&&!e.hostInstance.minimized&&!e.hostInstance.historyLoading){if(i.message[0]&&i.message[0].component&&"template"===i.message[0].component.type)e._txtToSpeak="";else if("string"==typeof(i.message[0]&&i.message[0].component&&i.message[0].component))e._txtToSpeak=i.message[0]&&i.message[0].component&&i.message[0].component;else try{e._txtToSpeak=i.message[0].component.payload.text?i.message[0].component.payload.text.replace(/\r?\n/g,". ."):"",e._txtToSpeak=e.hostInstance.helpers.checkMarkdowns(e._txtToSpeak),e._txtToSpeak=e._txtToSpeak.replace("___","<hr/>"),e._txtToSpeak=e._txtToSpeak.replace("---","<hr/>")}catch(t){e._txtToSpeak=""}i.message[0].component&&i.message[0].component.payload&&i.message[0].component.payload.speech_hint&&(e._txtToSpeak=i.message[0].component.payload.speech_hint),e.textToSpeech(e._txtToSpeak)}}))):(this.stop(),Yt()(".ttspeakerDiv").addClass("ttsOff"))},t.prototype.stop=function(){this.player.pause()},t.prototype.textToSpeech=function(e){this.speechSynthesizer.speakTextAsync(e)},t.prototype.setCaretEnd=function(e){},t}(Zt)})();var n=r.w;export{n as AzureTTS};