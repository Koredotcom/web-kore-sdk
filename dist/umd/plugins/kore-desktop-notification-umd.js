!function(o,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.KoreDesktopNotificationPluginSDK=t():o.KoreDesktopNotificationPluginSDK=t()}(self,(()=>(()=>{"use strict";var o={d:(t,e)=>{for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o:(o,t)=>Object.prototype.hasOwnProperty.call(o,t),r:o=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})}},t={};o.r(t),o.d(t,{KoreDesktopNotificationPlugin:()=>n});var e=function(){return e=Object.assign||function(o){for(var t,e=1,n=arguments.length;e<n;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(o[i]=t[i]);return o},e.apply(this,arguments)};const n=function(){function o(o){this.name="KoreDesktopNotificationPlugin ",this.config={},this.isOutTabFocus=!1,this.config=e(e({},this.config),o)}return o.prototype.onHostCreate=function(){var o=this,t=this;t.hostInstance.on("jwtGrantSuccess",(function(e){t.onInit(),o.config=t.extend(t,e)}))},o.prototype.onInit=function(){"default"===Notification.permission&&Notification.requestPermission(),window.addEventListener("blur",(function(){o.isOutTabFocus=!0})),window.addEventListener("focus",(function(){o.isOutTabFocus=!1}));var o=this;o.hostInstance.on("onWSMessage",(function(t){var e,n,i,s,a,r,u,c,d,l,p,f;"agent_connected"===(null===(n=null===(e=t.messageData)||void 0===e?void 0:e.message)||void 0===n?void 0:n.type)&&new Audio("https://uat.kore.ai/agents/sounds/Basic%20Alert%20High.mp3").play();if("bot_response"===t.messageData.type&&(null===(u=null===(r=null===(a=null===(s=null===(i=t.messageData)||void 0===i?void 0:i.message[0])||void 0===s?void 0:s.component)||void 0===a?void 0:a.payload)||void 0===r?void 0:r.payload)||void 0===u?void 0:u.text)){if("granted"!==Notification.permission)return;var v,g={body:null===(f=null===(p=null===(l=null===(d=null===(c=t.messageData)||void 0===c?void 0:c.message[0])||void 0===d?void 0:d.component)||void 0===l?void 0:l.payload)||void 0===p?void 0:p.payload)||void 0===f?void 0:f.text,vibrate:[200,100,200],sound:"/home/vishalveerannapet/kore/desktop-notification/web-kore-sdk/src/plugins/desktopNotifications/Desktop Notification sdk.mp3",requireInteraction:!1,onclick:function(o){o.target.close()}};if(o.isOutTabFocus)v=new Notification("You have a new notification ",g),new Audio("https://uat.kore.ai/agents/sounds/Basic%20Alert%20High.mp3").play();v&&(v.onclick=function(o){window.parent.focus(),v.close()})}}))},o.prototype.extend=function(o,t){for(var e in t)t.hasOwnProperty(e)&&(o[e]&&"object"==typeof t[e]?this.extend(o[e],t[e]):o[e]=t[e]);return o},o}();return t})()));